{"ast":null,"code":"import { Rect as $3YKfq$Rect, LayoutInfo as $3YKfq$LayoutInfo } from \"@react-stately/virtualizer\";\nimport { ListLayout as $3YKfq$ListLayout } from \"@react-stately/layout\";\nclass $d20755daac213984$export$c7e5f5ea00052bf extends (0, $3YKfq$ListLayout) {\n  update(invalidationContext) {\n    var _invalidationContext_layoutOptions;\n    this.isLoading = ((_invalidationContext_layoutOptions = invalidationContext.layoutOptions) === null || _invalidationContext_layoutOptions === void 0 ? void 0 : _invalidationContext_layoutOptions.isLoading) || false;\n    super.update(invalidationContext);\n  }\n  buildCollection() {\n    let nodes = super.buildCollection(this.padding);\n    let y = this.contentSize.height;\n    if (this.isLoading) {\n      let rect = new (0, $3YKfq$Rect)(0, y, this.virtualizer.visibleRect.width, 40);\n      let loader = new (0, $3YKfq$LayoutInfo)('loader', 'loader', rect);\n      let node = {\n        layoutInfo: loader,\n        validRect: loader.rect\n      };\n      nodes.push(node);\n      this.layoutNodes.set(loader.key, node);\n      y = loader.rect.maxY;\n    }\n    if (nodes.length === 0) {\n      var _this_placeholderHeight;\n      let rect = new (0, $3YKfq$Rect)(0, y, this.virtualizer.visibleRect.width, (_this_placeholderHeight = this.placeholderHeight) !== null && _this_placeholderHeight !== void 0 ? _this_placeholderHeight : this.virtualizer.visibleRect.height);\n      let placeholder = new (0, $3YKfq$LayoutInfo)('placeholder', 'placeholder', rect);\n      let node = {\n        layoutInfo: placeholder,\n        validRect: placeholder.rect\n      };\n      nodes.push(node);\n      this.layoutNodes.set(placeholder.key, node);\n      y = placeholder.rect.maxY;\n    }\n    this.contentSize.height = y + this.padding;\n    return nodes;\n  }\n  buildSection(node, x, y) {\n    // Synthesize a collection node for the header.\n    let headerNode = {\n      type: 'header',\n      key: node.key + ':header',\n      parentKey: node.key,\n      value: null,\n      level: node.level,\n      hasChildNodes: false,\n      childNodes: [],\n      rendered: node.rendered,\n      textValue: node.textValue\n    };\n    // Build layout node for it and adjust y offset of section children.\n    let header = this.buildSectionHeader(headerNode, x, y);\n    header.node = headerNode;\n    header.layoutInfo.parentKey = node.key;\n    this.layoutNodes.set(headerNode.key, header);\n    y += header.layoutInfo.rect.height;\n    let section = super.buildSection(node, x, y);\n    section.children.unshift(header);\n    return section;\n  }\n  constructor(opts) {\n    super(opts);\n    this.isLoading = false;\n    this.placeholderHeight = opts.placeholderHeight;\n    this.padding = opts.padding;\n  }\n}\nexport { $d20755daac213984$export$c7e5f5ea00052bf as ListBoxLayout };","map":{"version":3,"names":["$d20755daac213984$export$c7e5f5ea00052bf","$3YKfq$ListLayout","update","invalidationContext","_invalidationContext_layoutOptions","isLoading","layoutOptions","buildCollection","nodes","padding","y","contentSize","height","rect","$3YKfq$Rect","virtualizer","visibleRect","width","loader","$3YKfq$LayoutInfo","node","layoutInfo","validRect","push","layoutNodes","set","key","maxY","length","_this_placeholderHeight","placeholderHeight","placeholder","buildSection","x","headerNode","type","parentKey","value","level","hasChildNodes","childNodes","rendered","textValue","header","buildSectionHeader","section","children","unshift","constructor","opts"],"sources":["/Users/oscar.meunier/Documents/Coding/Personal/final/goodreads/node_modules/@react-spectrum/listbox/dist/packages/@react-spectrum/listbox/src/ListBoxLayout.ts"],"sourcesContent":["import {InvalidationContext, LayoutInfo, Rect} from '@react-stately/virtualizer';\nimport {LayoutNode, ListLayout, ListLayoutOptions} from '@react-stately/layout';\nimport {Node} from '@react-types/shared';\n\ninterface ListBoxLayoutProps {\n  isLoading?: boolean\n}\n\ninterface ListBoxLayoutOptions extends ListLayoutOptions {\n  placeholderHeight: number,\n  padding: number\n}\n\nexport class ListBoxLayout<T> extends ListLayout<T, ListBoxLayoutProps> {\n  private isLoading: boolean = false;\n  private placeholderHeight: number;\n  private padding: number;\n\n  constructor(opts: ListBoxLayoutOptions) {\n    super(opts);\n    this.placeholderHeight = opts.placeholderHeight;\n    this.padding = opts.padding;\n  }\n\n  update(invalidationContext: InvalidationContext<ListBoxLayoutProps>): void {\n    this.isLoading = invalidationContext.layoutOptions?.isLoading || false;\n    super.update(invalidationContext);\n  }\n\n  protected buildCollection(): LayoutNode[] {\n    let nodes = super.buildCollection(this.padding);\n    let y = this.contentSize.height;\n\n    if (this.isLoading) {\n      let rect = new Rect(0, y, this.virtualizer.visibleRect.width, 40);\n      let loader = new LayoutInfo('loader', 'loader', rect);\n      let node = {\n        layoutInfo: loader,\n        validRect: loader.rect\n      };\n      nodes.push(node);\n      this.layoutNodes.set(loader.key, node);\n      y = loader.rect.maxY;\n    }\n\n    if (nodes.length === 0) {\n      let rect = new Rect(0, y, this.virtualizer.visibleRect.width, this.placeholderHeight ?? this.virtualizer.visibleRect.height);\n      let placeholder = new LayoutInfo('placeholder', 'placeholder', rect);\n      let node = {\n        layoutInfo: placeholder,\n        validRect: placeholder.rect\n      };\n      nodes.push(node);\n      this.layoutNodes.set(placeholder.key, node);\n      y = placeholder.rect.maxY;\n    }\n\n    this.contentSize.height = y + this.padding;\n    return nodes;\n  }\n\n  protected buildSection(node: Node<T>, x: number, y: number): LayoutNode {\n    // Synthesize a collection node for the header.\n    let headerNode = {\n      type: 'header',\n      key: node.key + ':header',\n      parentKey: node.key,\n      value: null,\n      level: node.level,\n      hasChildNodes: false,\n      childNodes: [],\n      rendered: node.rendered,\n      textValue: node.textValue\n    };\n\n    // Build layout node for it and adjust y offset of section children.\n    let header = this.buildSectionHeader(headerNode, x, y);\n    header.node = headerNode;\n    header.layoutInfo.parentKey = node.key;\n    this.layoutNodes.set(headerNode.key, header);\n    y += header.layoutInfo.rect.height;\n\n    let section = super.buildSection(node, x, y);\n    section.children.unshift(header);\n    return section;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}