{"ast":null,"code":"import { registerDropTarget as $67560de7c78cb232$export$c28d9fb4a54e471a } from \"./DragManager.mjs\";\nimport { DragTypes as $7252cd45fc48c07c$export$7f04ce188c91447c, globalAllowedDropOperations as $7252cd45fc48c07c$export$f0130eb70b6347b8, globalDndState as $7252cd45fc48c07c$export$6ca6700462636d0b, readFromDataTransfer as $7252cd45fc48c07c$export$d9e760437831f8b3, setGlobalDnDState as $7252cd45fc48c07c$export$6c10d32b362bfa5f, setGlobalDropEffect as $7252cd45fc48c07c$export$64f52ed7349ddb84 } from \"./utils.mjs\";\nimport { DROP_EFFECT_TO_DROP_OPERATION as $103790afe9474d1c$export$608ecc6f1b23c35d, DROP_OPERATION as $103790afe9474d1c$export$60b7b4bcf3903d8e, DROP_OPERATION_ALLOWED as $103790afe9474d1c$export$9bbdfc78cf083e16, DROP_OPERATION_TO_DROP_EFFECT as $103790afe9474d1c$export$5eacb0769d26d3b2 } from \"./constants.mjs\";\nimport { useVirtualDrop as $224594fe3e57ff1e$export$62447ad3d2ec7da6 } from \"./useVirtualDrop.mjs\";\nimport { useState as $j5n4S$useState, useRef as $j5n4S$useRef } from \"react\";\nimport { useEffectEvent as $j5n4S$useEffectEvent, useLayoutEffect as $j5n4S$useLayoutEffect, isMac as $j5n4S$isMac, isIPad as $j5n4S$isIPad } from \"@react-aria/utils\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nconst $5c06e4929e123553$var$DROP_ACTIVATE_TIMEOUT = 800;\nfunction $5c06e4929e123553$export$ccdee5eaf73cf661(options) {\n  let {\n    hasDropButton: hasDropButton,\n    isDisabled: isDisabled\n  } = options;\n  let [isDropTarget, setDropTarget] = (0, $j5n4S$useState)(false);\n  let state = (0, $j5n4S$useRef)({\n    x: 0,\n    y: 0,\n    dragOverElements: new Set(),\n    dropEffect: 'none',\n    allowedOperations: (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).all,\n    dropActivateTimer: null\n  }).current;\n  let fireDropEnter = e => {\n    setDropTarget(true);\n    if (typeof options.onDropEnter === 'function') {\n      let rect = e.currentTarget.getBoundingClientRect();\n      options.onDropEnter({\n        type: 'dropenter',\n        x: e.clientX - rect.x,\n        y: e.clientY - rect.y\n      });\n    }\n  };\n  let fireDropExit = e => {\n    setDropTarget(false);\n    if (typeof options.onDropExit === 'function') {\n      let rect = e.currentTarget.getBoundingClientRect();\n      options.onDropExit({\n        type: 'dropexit',\n        x: e.clientX - rect.x,\n        y: e.clientY - rect.y\n      });\n    }\n  };\n  let onDragOver = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    let allowedOperations = $5c06e4929e123553$var$getAllowedOperations(e);\n    if (e.clientX === state.x && e.clientY === state.y && allowedOperations === state.allowedOperations) {\n      e.dataTransfer.dropEffect = state.dropEffect;\n      return;\n    }\n    state.x = e.clientX;\n    state.y = e.clientY;\n    let prevDropEffect = state.dropEffect;\n    // Update drop effect if allowed drop operations changed (e.g. user pressed modifier key).\n    if (allowedOperations !== state.allowedOperations) {\n      let allowedOps = $5c06e4929e123553$var$allowedOperationsToArray(allowedOperations);\n      let dropOperation = allowedOps[0];\n      if (typeof options.getDropOperation === 'function') {\n        let types = new (0, $7252cd45fc48c07c$export$7f04ce188c91447c)(e.dataTransfer);\n        dropOperation = $5c06e4929e123553$var$getDropOperation(allowedOperations, options.getDropOperation(types, allowedOps));\n      }\n      state.dropEffect = (0, $103790afe9474d1c$export$5eacb0769d26d3b2)[dropOperation] || 'none';\n    }\n    if (typeof options.getDropOperationForPoint === 'function') {\n      let types = new (0, $7252cd45fc48c07c$export$7f04ce188c91447c)(e.dataTransfer);\n      let rect = e.currentTarget.getBoundingClientRect();\n      let dropOperation = $5c06e4929e123553$var$getDropOperation(allowedOperations, options.getDropOperationForPoint(types, $5c06e4929e123553$var$allowedOperationsToArray(allowedOperations), state.x - rect.x, state.y - rect.y));\n      state.dropEffect = (0, $103790afe9474d1c$export$5eacb0769d26d3b2)[dropOperation] || 'none';\n    }\n    state.allowedOperations = allowedOperations;\n    e.dataTransfer.dropEffect = state.dropEffect;\n    // If the drop operation changes, update state and fire events appropriately.\n    if (state.dropEffect === 'none' && prevDropEffect !== 'none') fireDropExit(e);else if (state.dropEffect !== 'none' && prevDropEffect === 'none') fireDropEnter(e);\n    if (typeof options.onDropMove === 'function' && state.dropEffect !== 'none') {\n      let rect = e.currentTarget.getBoundingClientRect();\n      options.onDropMove({\n        type: 'dropmove',\n        x: state.x - rect.x,\n        y: state.y - rect.y\n      });\n    }\n    clearTimeout(state.dropActivateTimer);\n    if (typeof options.onDropActivate === 'function' && state.dropEffect !== 'none') {\n      let rect = e.currentTarget.getBoundingClientRect();\n      state.dropActivateTimer = setTimeout(() => {\n        options.onDropActivate({\n          type: 'dropactivate',\n          x: state.x - rect.x,\n          y: state.y - rect.y\n        });\n      }, $5c06e4929e123553$var$DROP_ACTIVATE_TIMEOUT);\n    }\n  };\n  let onDragEnter = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.add(e.target);\n    if (state.dragOverElements.size > 1) return;\n    let allowedOperationsBits = $5c06e4929e123553$var$getAllowedOperations(e);\n    let allowedOperations = $5c06e4929e123553$var$allowedOperationsToArray(allowedOperationsBits);\n    let dropOperation = allowedOperations[0];\n    if (typeof options.getDropOperation === 'function') {\n      let types = new (0, $7252cd45fc48c07c$export$7f04ce188c91447c)(e.dataTransfer);\n      dropOperation = $5c06e4929e123553$var$getDropOperation(allowedOperationsBits, options.getDropOperation(types, allowedOperations));\n    }\n    if (typeof options.getDropOperationForPoint === 'function') {\n      let types = new (0, $7252cd45fc48c07c$export$7f04ce188c91447c)(e.dataTransfer);\n      let rect = e.currentTarget.getBoundingClientRect();\n      dropOperation = $5c06e4929e123553$var$getDropOperation(allowedOperationsBits, options.getDropOperationForPoint(types, allowedOperations, e.clientX - rect.x, e.clientY - rect.y));\n    }\n    state.x = e.clientX;\n    state.y = e.clientY;\n    state.allowedOperations = allowedOperationsBits;\n    state.dropEffect = (0, $103790afe9474d1c$export$5eacb0769d26d3b2)[dropOperation] || 'none';\n    e.dataTransfer.dropEffect = state.dropEffect;\n    if (dropOperation !== 'cancel') fireDropEnter(e);\n  };\n  let onDragLeave = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    // We would use e.relatedTarget to detect if the drag is still inside the drop target,\n    // but it is always null in WebKit. https://bugs.webkit.org/show_bug.cgi?id=66547\n    // Instead, we track all of the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target);\n    for (let element of state.dragOverElements) if (!e.currentTarget.contains(element)) state.dragOverElements.delete(element);\n    if (state.dragOverElements.size > 0) return;\n    if (state.dropEffect !== 'none') fireDropExit(e);\n    clearTimeout(state.dropActivateTimer);\n  };\n  let onDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    // Track drop effect in global state for Chrome Android. https://bugs.chromium.org/p/chromium/issues/detail?id=1353951\n    // Android onDragEnd always returns \"none\" as its drop effect.\n    (0, $7252cd45fc48c07c$export$64f52ed7349ddb84)(state.dropEffect);\n    if (typeof options.onDrop === 'function') {\n      let dropOperation = (0, $103790afe9474d1c$export$608ecc6f1b23c35d)[state.dropEffect];\n      let items = (0, $7252cd45fc48c07c$export$d9e760437831f8b3)(e.dataTransfer);\n      let rect = e.currentTarget.getBoundingClientRect();\n      let event = {\n        type: 'drop',\n        x: e.clientX - rect.x,\n        y: e.clientY - rect.y,\n        items: items,\n        dropOperation: dropOperation\n      };\n      options.onDrop(event);\n    }\n    let dndStateSnapshot = {\n      ...(0, $7252cd45fc48c07c$export$6ca6700462636d0b)\n    };\n    state.dragOverElements.clear();\n    fireDropExit(e);\n    clearTimeout(state.dropActivateTimer);\n    // If there wasn't a collection being tracked as a dragged collection, then we are in a case where a non RSP drag is dropped on a\n    // RSP collection and thus we don't need to preserve the global drop effect\n    if (dndStateSnapshot.draggingCollectionRef == null) (0, $7252cd45fc48c07c$export$64f52ed7349ddb84)(undefined);else\n      // Otherwise we need to preserve the global dnd state for onDragEnd's isInternal check.\n      // At the moment fireDropExit may clear dropCollectionRef (i.e. useDroppableCollection's provided onDropExit, required to clear dropCollectionRef when exiting a valid drop target)\n      (0, $7252cd45fc48c07c$export$6c10d32b362bfa5f)(dndStateSnapshot);\n  };\n  let onDropEnter = (0, $j5n4S$useEffectEvent)(e => {\n    if (typeof options.onDropEnter === 'function') options.onDropEnter(e);\n  });\n  let onDropExit = (0, $j5n4S$useEffectEvent)(e => {\n    if (typeof options.onDropExit === 'function') options.onDropExit(e);\n  });\n  let onDropActivate = (0, $j5n4S$useEffectEvent)(e => {\n    if (typeof options.onDropActivate === 'function') options.onDropActivate(e);\n  });\n  let onKeyboardDrop = (0, $j5n4S$useEffectEvent)(e => {\n    if (typeof options.onDrop === 'function') options.onDrop(e);\n  });\n  let getDropOperationKeyboard = (0, $j5n4S$useEffectEvent)((types, allowedOperations) => {\n    if (options.getDropOperation) return options.getDropOperation(types, allowedOperations);\n    return allowedOperations[0];\n  });\n  let {\n    ref: ref\n  } = options;\n  (0, $j5n4S$useLayoutEffect)(() => {\n    if (isDisabled) return;\n    return $67560de7c78cb232$export$c28d9fb4a54e471a({\n      element: ref.current,\n      getDropOperation: getDropOperationKeyboard,\n      onDropEnter(e) {\n        setDropTarget(true);\n        onDropEnter(e);\n      },\n      onDropExit(e) {\n        setDropTarget(false);\n        onDropExit(e);\n      },\n      onDrop: onKeyboardDrop,\n      onDropActivate: onDropActivate\n    });\n  }, [isDisabled, ref, getDropOperationKeyboard, onDropEnter, onDropExit, onKeyboardDrop, onDropActivate]);\n  let {\n    dropProps: dropProps\n  } = (0, $224594fe3e57ff1e$export$62447ad3d2ec7da6)();\n  if (isDisabled) return {\n    dropProps: {},\n    dropButtonProps: {\n      isDisabled: true\n    },\n    isDropTarget: false\n  };\n  return {\n    dropProps: {\n      ...(!hasDropButton && dropProps),\n      onDragEnter: onDragEnter,\n      onDragOver: onDragOver,\n      onDragLeave: onDragLeave,\n      onDrop: onDrop\n    },\n    dropButtonProps: {\n      ...(hasDropButton && dropProps)\n    },\n    isDropTarget: isDropTarget\n  };\n}\nfunction $5c06e4929e123553$var$getAllowedOperations(e) {\n  let allowedOperations = (0, $103790afe9474d1c$export$9bbdfc78cf083e16)[e.dataTransfer.effectAllowed];\n  // WebKit always sets effectAllowed to \"copyMove\" on macOS, and \"all\" on iOS, regardless of what was\n  // set during the dragstart event: https://bugs.webkit.org/show_bug.cgi?id=178058\n  //\n  // Android Chrome also sets effectAllowed to \"copyMove\" in all cases: https://bugs.chromium.org/p/chromium/issues/detail?id=1359182\n  //\n  // If the drag started within the page, we can use a global variable to get the real allowed operations.\n  // This needs to be intersected with the actual effectAllowed, which may have been filtered based on modifier keys.\n  // Unfortunately, this means that link operations do not work at all in Safari.\n  if (0, $7252cd45fc48c07c$export$f0130eb70b6347b8) allowedOperations &= (0, $7252cd45fc48c07c$export$f0130eb70b6347b8);\n  // Chrome and Safari on macOS will automatically filter effectAllowed when pressing modifier keys,\n  // allowing the user to switch between move, link, and copy operations. Firefox on macOS and all\n  // Windows browsers do not do this, so do it ourselves instead. The exact keys are platform dependent.\n  // https://ux.stackexchange.com/questions/83748/what-are-the-most-common-modifier-keys-for-dragging-objects-with-a-mouse\n  //\n  // Note that none of these modifiers are ever set in WebKit due to a bug: https://bugs.webkit.org/show_bug.cgi?id=77465\n  // However, Safari does update effectAllowed correctly, so we can just rely on that.\n  let allowedModifiers = (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).none;\n  if ((0, $j5n4S$isMac)()) {\n    if (e.altKey) allowedModifiers |= (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).copy;\n    // Chrome and Safari both use the Control key for link, even though Finder uses Command + Option.\n    // iPadOS doesn't support link operations and will not fire the drop event at all if dropEffect is set to link.\n    // https://bugs.webkit.org/show_bug.cgi?id=244701\n    if (e.ctrlKey && !(0, $j5n4S$isIPad)()) allowedModifiers |= (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).link;\n    if (e.metaKey) allowedModifiers |= (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).move;\n  } else {\n    if (e.altKey) allowedModifiers |= (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).link;\n    if (e.shiftKey) allowedModifiers |= (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).move;\n    if (e.ctrlKey) allowedModifiers |= (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).copy;\n  }\n  if (allowedModifiers) return allowedOperations & allowedModifiers;\n  return allowedOperations;\n}\nfunction $5c06e4929e123553$var$allowedOperationsToArray(allowedOperationsBits) {\n  let allowedOperations = [];\n  if (allowedOperationsBits & (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).move) allowedOperations.push('move');\n  if (allowedOperationsBits & (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).copy) allowedOperations.push('copy');\n  if (allowedOperationsBits & (0, $103790afe9474d1c$export$60b7b4bcf3903d8e).link) allowedOperations.push('link');\n  return allowedOperations;\n}\nfunction $5c06e4929e123553$var$getDropOperation(allowedOperations, operation) {\n  let op = (0, $103790afe9474d1c$export$60b7b4bcf3903d8e)[operation];\n  return allowedOperations & op ? operation : 'cancel';\n}\nexport { $5c06e4929e123553$export$ccdee5eaf73cf661 as useDrop };","map":{"version":3,"names":["$5c06e4929e123553$var$DROP_ACTIVATE_TIMEOUT","$5c06e4929e123553$export$ccdee5eaf73cf661","options","hasDropButton","isDisabled","isDropTarget","setDropTarget","$j5n4S$useState","state","$j5n4S$useRef","x","y","dragOverElements","Set","dropEffect","allowedOperations","$103790afe9474d1c$export$60b7b4bcf3903d8e","all","dropActivateTimer","current","fireDropEnter","e","onDropEnter","rect","currentTarget","getBoundingClientRect","type","clientX","clientY","fireDropExit","onDropExit","onDragOver","preventDefault","stopPropagation","$5c06e4929e123553$var$getAllowedOperations","dataTransfer","prevDropEffect","allowedOps","$5c06e4929e123553$var$allowedOperationsToArray","dropOperation","getDropOperation","types","$7252cd45fc48c07c$export$7f04ce188c91447c","$5c06e4929e123553$var$getDropOperation","$103790afe9474d1c$export$5eacb0769d26d3b2","getDropOperationForPoint","onDropMove","clearTimeout","onDropActivate","setTimeout","onDragEnter","add","target","size","allowedOperationsBits","onDragLeave","delete","element","contains","onDrop","$7252cd45fc48c07c$export$64f52ed7349ddb84","$103790afe9474d1c$export$608ecc6f1b23c35d","items","$7252cd45fc48c07c$export$d9e760437831f8b3","event","dndStateSnapshot","$7252cd45fc48c07c$export$6ca6700462636d0b","clear","draggingCollectionRef","undefined","$7252cd45fc48c07c$export$6c10d32b362bfa5f","$j5n4S$useEffectEvent","onKeyboardDrop","getDropOperationKeyboard","ref","$j5n4S$useLayoutEffect","$67560de7c78cb232$export$c28d9fb4a54e471a","dropProps","$224594fe3e57ff1e$export$62447ad3d2ec7da6","dropButtonProps","$103790afe9474d1c$export$9bbdfc78cf083e16","effectAllowed","$7252cd45fc48c07c$export$f0130eb70b6347b8","allowedModifiers","none","$j5n4S$isMac","altKey","copy","ctrlKey","$j5n4S$isIPad","link","metaKey","move","shiftKey","push","operation","op"],"sources":["/Users/oscar.meunier/Documents/Coding/Personal/final/goodreads/node_modules/@react-aria/dnd/dist/packages/@react-aria/dnd/src/useDrop.ts"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaButtonProps} from '@react-types/button';\nimport {DragEvent, HTMLAttributes, useRef, useState} from 'react';\nimport * as DragManager from './DragManager';\nimport {DragTypes, globalAllowedDropOperations, globalDndState, readFromDataTransfer, setGlobalDnDState, setGlobalDropEffect} from './utils';\nimport {DROP_EFFECT_TO_DROP_OPERATION, DROP_OPERATION, DROP_OPERATION_ALLOWED, DROP_OPERATION_TO_DROP_EFFECT} from './constants';\nimport {DropActivateEvent, DropEnterEvent, DropEvent, DropExitEvent, DropMoveEvent, DropOperation, DragTypes as IDragTypes, RefObject} from '@react-types/shared';\nimport {isIPad, isMac, useEffectEvent, useLayoutEffect} from '@react-aria/utils';\nimport {useVirtualDrop} from './useVirtualDrop';\n\nexport interface DropOptions {\n  /** A ref for the droppable element. */\n  ref: RefObject<HTMLElement | null>,\n  /**\n   * A function returning the drop operation to be performed when items matching the given types are dropped\n   * on the drop target.\n   */\n  getDropOperation?: (types: IDragTypes, allowedOperations: DropOperation[]) => DropOperation,\n  /** A function that returns the drop operation for a specific point within the target. */\n  getDropOperationForPoint?: (types: IDragTypes, allowedOperations: DropOperation[], x: number, y: number) => DropOperation,\n  /** Handler that is called when a valid drag enters the drop target. */\n  onDropEnter?: (e: DropEnterEvent) => void,\n  /** Handler that is called when a valid drag is moved within the drop target. */\n  onDropMove?: (e: DropMoveEvent) => void,\n  /**\n   * Handler that is called after a valid drag is held over the drop target for a period of time.\n   * This typically opens the item so that the user can drop within it.\n   * @private\n   */\n  onDropActivate?: (e: DropActivateEvent) => void,\n  /** Handler that is called when a valid drag exits the drop target. */\n  onDropExit?: (e: DropExitEvent) => void,\n  /** Handler that is called when a valid drag is dropped on the drop target. */\n  onDrop?: (e: DropEvent) => void,\n  /**\n   * Whether the item has an explicit focusable drop affordance to initiate accessible drag and drop mode.\n   * If true, the dropProps will omit these event handlers, and they will be applied to dropButtonProps instead.\n   */\n  hasDropButton?: boolean,\n  /**\n   * Whether the drop target is disabled. If true, the drop target will not accept any drops.\n   */\n  isDisabled?: boolean\n}\n\nexport interface DropResult {\n  /** Props for the droppable element. */\n  dropProps: HTMLAttributes<HTMLElement>,\n  /** Whether the drop target is currently focused or hovered. */\n  isDropTarget: boolean,\n  /** Props for the explicit drop button affordance, if any. */\n  dropButtonProps?: AriaButtonProps\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 800;\n\n/**\n * Handles drop interactions for an element, with support for traditional mouse and touch\n * based drag and drop, in addition to full parity for keyboard and screen reader users.\n */\nexport function useDrop(options: DropOptions): DropResult {\n  let {hasDropButton, isDisabled} = options;\n  let [isDropTarget, setDropTarget] = useState(false);\n  let state = useRef({\n    x: 0,\n    y: 0,\n    dragOverElements: new Set<Element>(),\n    dropEffect: 'none' as DataTransfer['dropEffect'],\n    allowedOperations: DROP_OPERATION.all,\n    dropActivateTimer: null\n  }).current;\n\n  let fireDropEnter = (e: DragEvent) => {\n    setDropTarget(true);\n\n    if (typeof options.onDropEnter === 'function') {\n      let rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n      options.onDropEnter({\n        type: 'dropenter',\n        x: e.clientX - rect.x,\n        y: e.clientY - rect.y\n      });\n    }\n  };\n\n  let fireDropExit = (e: DragEvent) => {\n    setDropTarget(false);\n\n    if (typeof options.onDropExit === 'function') {\n      let rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n      options.onDropExit({\n        type: 'dropexit',\n        x: e.clientX - rect.x,\n        y: e.clientY - rect.y\n      });\n    }\n  };\n\n  let onDragOver = (e: DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    let allowedOperations = getAllowedOperations(e);\n    if (e.clientX === state.x && e.clientY === state.y && allowedOperations === state.allowedOperations) {\n      e.dataTransfer.dropEffect = state.dropEffect;\n      return;\n    }\n\n    state.x = e.clientX;\n    state.y = e.clientY;\n\n    let prevDropEffect = state.dropEffect;\n\n    // Update drop effect if allowed drop operations changed (e.g. user pressed modifier key).\n    if (allowedOperations !== state.allowedOperations) {\n      let allowedOps = allowedOperationsToArray(allowedOperations);\n      let dropOperation = allowedOps[0];\n      if (typeof options.getDropOperation === 'function') {\n        let types = new DragTypes(e.dataTransfer);\n        dropOperation = getDropOperation(allowedOperations, options.getDropOperation(types, allowedOps));\n      }\n      state.dropEffect = DROP_OPERATION_TO_DROP_EFFECT[dropOperation] || 'none';\n    }\n\n    if (typeof options.getDropOperationForPoint === 'function') {\n      let types = new DragTypes(e.dataTransfer);\n      let rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n      let dropOperation = getDropOperation(\n        allowedOperations,\n        options.getDropOperationForPoint(types, allowedOperationsToArray(allowedOperations), state.x - rect.x, state.y - rect.y)\n      );\n      state.dropEffect = DROP_OPERATION_TO_DROP_EFFECT[dropOperation] || 'none';\n    }\n\n    state.allowedOperations = allowedOperations;\n    e.dataTransfer.dropEffect = state.dropEffect;\n\n    // If the drop operation changes, update state and fire events appropriately.\n    if (state.dropEffect === 'none' && prevDropEffect !== 'none') {\n      fireDropExit(e);\n    } else if (state.dropEffect !== 'none' && prevDropEffect === 'none') {\n      fireDropEnter(e);\n    }\n\n    if (typeof options.onDropMove === 'function' && state.dropEffect !== 'none') {\n      let rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n      options.onDropMove({\n        type: 'dropmove',\n        x: state.x - rect.x,\n        y: state.y - rect.y\n      });\n    }\n\n    clearTimeout(state.dropActivateTimer);\n\n    if (typeof options.onDropActivate === 'function' && state.dropEffect !== 'none') {\n      let rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n      state.dropActivateTimer = setTimeout(() => {\n        options.onDropActivate({\n          type: 'dropactivate',\n          x: state.x - rect.x,\n          y: state.y - rect.y\n        });\n      }, DROP_ACTIVATE_TIMEOUT);\n    }\n  };\n\n  let onDragEnter = (e: DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    let allowedOperationsBits = getAllowedOperations(e);\n    let allowedOperations = allowedOperationsToArray(allowedOperationsBits);\n    let dropOperation = allowedOperations[0];\n\n    if (typeof options.getDropOperation === 'function') {\n      let types = new DragTypes(e.dataTransfer);\n      dropOperation = getDropOperation(allowedOperationsBits, options.getDropOperation(types, allowedOperations));\n    }\n\n    if (typeof options.getDropOperationForPoint === 'function') {\n      let types = new DragTypes(e.dataTransfer);\n      let rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n      dropOperation = getDropOperation(\n        allowedOperationsBits,\n        options.getDropOperationForPoint(types, allowedOperations, e.clientX - rect.x, e.clientY - rect.y)\n      );\n    }\n\n    state.x = e.clientX;\n    state.y = e.clientY;\n    state.allowedOperations = allowedOperationsBits;\n    state.dropEffect = DROP_OPERATION_TO_DROP_EFFECT[dropOperation] || 'none';\n    e.dataTransfer.dropEffect = state.dropEffect;\n\n    if (dropOperation !== 'cancel') {\n      fireDropEnter(e);\n    }\n  };\n\n  let onDragLeave = (e: DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // We would use e.relatedTarget to detect if the drag is still inside the drop target,\n    // but it is always null in WebKit. https://bugs.webkit.org/show_bug.cgi?id=66547\n    // Instead, we track all of the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n\n    state.dragOverElements.delete(e.target as Element);\n    for (let element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    if (state.dropEffect !== 'none') {\n      fireDropExit(e);\n    }\n\n    clearTimeout(state.dropActivateTimer);\n  };\n\n  let onDrop = (e: DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // Track drop effect in global state for Chrome Android. https://bugs.chromium.org/p/chromium/issues/detail?id=1353951\n    // Android onDragEnd always returns \"none\" as its drop effect.\n    setGlobalDropEffect(state.dropEffect);\n\n    if (typeof options.onDrop === 'function') {\n      let dropOperation = DROP_EFFECT_TO_DROP_OPERATION[state.dropEffect];\n      let items = readFromDataTransfer(e.dataTransfer);\n\n      let rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n      let event: DropEvent = {\n        type: 'drop',\n        x: e.clientX - rect.x,\n        y: e.clientY - rect.y,\n        items,\n        dropOperation\n      };\n\n      options.onDrop(event);\n    }\n\n    let dndStateSnapshot = {...globalDndState};\n    state.dragOverElements.clear();\n    fireDropExit(e);\n    clearTimeout(state.dropActivateTimer);\n    // If there wasn't a collection being tracked as a dragged collection, then we are in a case where a non RSP drag is dropped on a\n    // RSP collection and thus we don't need to preserve the global drop effect\n    if (dndStateSnapshot.draggingCollectionRef == null) {\n      setGlobalDropEffect(undefined);\n    } else {\n      // Otherwise we need to preserve the global dnd state for onDragEnd's isInternal check.\n      // At the moment fireDropExit may clear dropCollectionRef (i.e. useDroppableCollection's provided onDropExit, required to clear dropCollectionRef when exiting a valid drop target)\n      setGlobalDnDState(dndStateSnapshot);\n    }\n  };\n\n  let onDropEnter = useEffectEvent((e: DropEnterEvent) => {\n    if (typeof options.onDropEnter === 'function') {\n      options.onDropEnter(e);\n    }\n  });\n\n  let onDropExit = useEffectEvent((e: DropExitEvent) => {\n    if (typeof options.onDropExit === 'function') {\n      options.onDropExit(e);\n    }\n  });\n\n  let onDropActivate = useEffectEvent((e: DropActivateEvent) => {\n    if (typeof options.onDropActivate === 'function') {\n      options.onDropActivate(e);\n    }\n  });\n\n  let onKeyboardDrop = useEffectEvent((e: DropEvent) => {\n    if (typeof options.onDrop === 'function') {\n      options.onDrop(e);\n    }\n  });\n\n  let getDropOperationKeyboard = useEffectEvent((types: IDragTypes, allowedOperations: DropOperation[]) => {\n    if (options.getDropOperation) {\n      return options.getDropOperation(types, allowedOperations);\n    }\n\n    return allowedOperations[0];\n  });\n\n  let {ref} = options;\n  useLayoutEffect(() => {\n    if (isDisabled) {\n      return;\n    }\n    return DragManager.registerDropTarget({\n      element: ref.current,\n      getDropOperation: getDropOperationKeyboard,\n      onDropEnter(e) {\n        setDropTarget(true);\n        onDropEnter(e);\n      },\n      onDropExit(e) {\n        setDropTarget(false);\n        onDropExit(e);\n      },\n      onDrop: onKeyboardDrop,\n      onDropActivate\n    });\n  }, [isDisabled, ref, getDropOperationKeyboard, onDropEnter, onDropExit, onKeyboardDrop, onDropActivate]);\n\n  let {dropProps} = useVirtualDrop();\n  if (isDisabled) {\n    return {\n      dropProps: {},\n      dropButtonProps: {isDisabled: true},\n      isDropTarget: false\n    };\n  }\n  return {\n    dropProps: {\n      ...(!hasDropButton && dropProps),\n      onDragEnter,\n      onDragOver,\n      onDragLeave,\n      onDrop\n    },\n    dropButtonProps: {...(hasDropButton && dropProps)},\n    isDropTarget\n  };\n}\n\nfunction getAllowedOperations(e: DragEvent) {\n  let allowedOperations = DROP_OPERATION_ALLOWED[e.dataTransfer.effectAllowed];\n\n  // WebKit always sets effectAllowed to \"copyMove\" on macOS, and \"all\" on iOS, regardless of what was\n  // set during the dragstart event: https://bugs.webkit.org/show_bug.cgi?id=178058\n  //\n  // Android Chrome also sets effectAllowed to \"copyMove\" in all cases: https://bugs.chromium.org/p/chromium/issues/detail?id=1359182\n  //\n  // If the drag started within the page, we can use a global variable to get the real allowed operations.\n  // This needs to be intersected with the actual effectAllowed, which may have been filtered based on modifier keys.\n  // Unfortunately, this means that link operations do not work at all in Safari.\n  if (globalAllowedDropOperations) {\n    allowedOperations &= globalAllowedDropOperations;\n  }\n\n  // Chrome and Safari on macOS will automatically filter effectAllowed when pressing modifier keys,\n  // allowing the user to switch between move, link, and copy operations. Firefox on macOS and all\n  // Windows browsers do not do this, so do it ourselves instead. The exact keys are platform dependent.\n  // https://ux.stackexchange.com/questions/83748/what-are-the-most-common-modifier-keys-for-dragging-objects-with-a-mouse\n  //\n  // Note that none of these modifiers are ever set in WebKit due to a bug: https://bugs.webkit.org/show_bug.cgi?id=77465\n  // However, Safari does update effectAllowed correctly, so we can just rely on that.\n  let allowedModifiers = DROP_OPERATION.none;\n  if (isMac()) {\n    if (e.altKey) {\n      allowedModifiers |= DROP_OPERATION.copy;\n    }\n\n    // Chrome and Safari both use the Control key for link, even though Finder uses Command + Option.\n    // iPadOS doesn't support link operations and will not fire the drop event at all if dropEffect is set to link.\n    // https://bugs.webkit.org/show_bug.cgi?id=244701\n    if (e.ctrlKey && !isIPad()) {\n      allowedModifiers |= DROP_OPERATION.link;\n    }\n\n    if (e.metaKey) {\n      allowedModifiers |= DROP_OPERATION.move;\n    }\n  } else {\n    if (e.altKey) {\n      allowedModifiers |= DROP_OPERATION.link;\n    }\n\n    if (e.shiftKey) {\n      allowedModifiers |= DROP_OPERATION.move;\n    }\n\n    if (e.ctrlKey) {\n      allowedModifiers |= DROP_OPERATION.copy;\n    }\n  }\n\n  if (allowedModifiers) {\n    return allowedOperations & allowedModifiers;\n  }\n\n  return allowedOperations;\n}\n\nfunction allowedOperationsToArray(allowedOperationsBits: DROP_OPERATION) {\n  let allowedOperations = [];\n  if (allowedOperationsBits & DROP_OPERATION.move) {\n    allowedOperations.push('move');\n  }\n\n  if (allowedOperationsBits & DROP_OPERATION.copy) {\n    allowedOperations.push('copy');\n  }\n\n  if (allowedOperationsBits & DROP_OPERATION.link) {\n    allowedOperations.push('link');\n  }\n\n  return allowedOperations;\n}\n\nfunction getDropOperation(allowedOperations: DROP_OPERATION, operation: DropOperation) {\n  let op = DROP_OPERATION[operation];\n  return allowedOperations & op ? operation : 'cancel';\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}