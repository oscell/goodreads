{"ast":null,"code":"import { useContextProps as $64fa3d84918910a7$export$29f1550f4b0d4415, useEnterAnimation as $64fa3d84918910a7$export$6d3443f2c48bfc20, useExitAnimation as $64fa3d84918910a7$export$45fda7c47f93fd48, useRenderProps as $64fa3d84918910a7$export$4d86445c2cf5e3 } from \"./utils.mjs\";\nimport { OverlayArrowContext as $44f671af83e7d9e0$export$2de4954e8ae13b9f } from \"./OverlayArrow.mjs\";\nimport { OverlayTriggerStateContext as $de32f1b87079253c$export$d2f961adcb0afbe } from \"./Dialog.mjs\";\nimport { usePopover as $ehFet$usePopover, Overlay as $ehFet$Overlay, DismissButton as $ehFet$DismissButton } from \"react-aria\";\nimport { useLayoutEffect as $ehFet$useLayoutEffect, mergeProps as $ehFet$mergeProps, filterDOMProps as $ehFet$filterDOMProps } from \"@react-aria/utils\";\nimport { useOverlayTriggerState as $ehFet$useOverlayTriggerState } from \"react-stately\";\nimport $ehFet$react, { createContext as $ehFet$createContext, useContext as $ehFet$useContext, forwardRef as $ehFet$forwardRef, useRef as $ehFet$useRef, useState as $ehFet$useState } from \"react\";\nimport { useIsHidden as $ehFet$useIsHidden } from \"@react-aria/collections\";\n\n/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nconst $07b14b47974efb58$export$9b9a0cd73afb7ca4 = /*#__PURE__*/(0, $ehFet$createContext)(null);\nfunction $07b14b47974efb58$var$Popover(props, ref) {\n  [props, ref] = (0, $64fa3d84918910a7$export$29f1550f4b0d4415)(props, ref, $07b14b47974efb58$export$9b9a0cd73afb7ca4);\n  let contextState = (0, $ehFet$useContext)((0, $de32f1b87079253c$export$d2f961adcb0afbe));\n  let localState = (0, $ehFet$useOverlayTriggerState)(props);\n  let state = props.isOpen != null || props.defaultOpen != null || !contextState ? localState : contextState;\n  let isExiting = (0, $64fa3d84918910a7$export$45fda7c47f93fd48)(ref, state.isOpen) || props.isExiting || false;\n  let isHidden = (0, $ehFet$useIsHidden)();\n  // If we are in a hidden tree, we still need to preserve our children.\n  if (isHidden) {\n    let children = props.children;\n    if (typeof children === 'function') children = children({\n      trigger: props.trigger || null,\n      placement: 'bottom',\n      isEntering: false,\n      isExiting: false,\n      defaultChildren: null\n    });\n    return /*#__PURE__*/(0, $ehFet$react).createElement((0, $ehFet$react).Fragment, null, children);\n  }\n  if (state && !state.isOpen && !isExiting) return null;\n  return /*#__PURE__*/(0, $ehFet$react).createElement($07b14b47974efb58$var$PopoverInner, {\n    ...props,\n    triggerRef: props.triggerRef,\n    state: state,\n    popoverRef: ref,\n    isExiting: isExiting\n  });\n}\n/**\n * A popover is an overlay element positioned relative to a trigger.\n */\nconst $07b14b47974efb58$export$5b6b19405a83ff9d = /*#__PURE__*/(0, $ehFet$forwardRef)($07b14b47974efb58$var$Popover);\nfunction $07b14b47974efb58$var$PopoverInner({\n  state: state,\n  isExiting: isExiting,\n  UNSTABLE_portalContainer: UNSTABLE_portalContainer,\n  ...props\n}) {\n  // Calculate the arrow size internally (and remove props.arrowSize from PopoverProps)\n  // Referenced from: packages/@react-spectrum/tooltip/src/TooltipTrigger.tsx\n  let arrowRef = (0, $ehFet$useRef)(null);\n  let [arrowWidth, setArrowWidth] = (0, $ehFet$useState)(0);\n  (0, $ehFet$useLayoutEffect)(() => {\n    if (arrowRef.current && state.isOpen) setArrowWidth(arrowRef.current.getBoundingClientRect().width);\n  }, [state.isOpen, arrowRef]);\n  var _props_offset;\n  let {\n    popoverProps: popoverProps,\n    underlayProps: underlayProps,\n    arrowProps: arrowProps,\n    placement: placement\n  } = (0, $ehFet$usePopover)({\n    ...props,\n    offset: (_props_offset = props.offset) !== null && _props_offset !== void 0 ? _props_offset : 8,\n    arrowSize: arrowWidth\n  }, state);\n  let ref = props.popoverRef;\n  let isEntering = (0, $64fa3d84918910a7$export$6d3443f2c48bfc20)(ref, !!placement) || props.isEntering || false;\n  let renderProps = (0, $64fa3d84918910a7$export$4d86445c2cf5e3)({\n    ...props,\n    defaultClassName: 'react-aria-Popover',\n    values: {\n      trigger: props.trigger || null,\n      placement: placement,\n      isEntering: isEntering,\n      isExiting: isExiting\n    }\n  });\n  let style = {\n    ...popoverProps.style,\n    ...renderProps.style\n  };\n  return /*#__PURE__*/(0, $ehFet$react).createElement((0, $ehFet$Overlay), {\n    isExiting: isExiting,\n    portalContainer: UNSTABLE_portalContainer\n  }, !props.isNonModal && state.isOpen && /*#__PURE__*/(0, $ehFet$react).createElement(\"div\", {\n    \"data-testid\": \"underlay\",\n    ...underlayProps,\n    style: {\n      position: 'fixed',\n      inset: 0\n    }\n  }), /*#__PURE__*/(0, $ehFet$react).createElement(\"div\", {\n    ...(0, $ehFet$mergeProps)((0, $ehFet$filterDOMProps)(props), popoverProps),\n    ...renderProps,\n    ref: ref,\n    slot: props.slot || undefined,\n    style: style,\n    \"data-trigger\": props.trigger,\n    \"data-placement\": placement,\n    \"data-entering\": isEntering || undefined,\n    \"data-exiting\": isExiting || undefined\n  }, !props.isNonModal && /*#__PURE__*/(0, $ehFet$react).createElement((0, $ehFet$DismissButton), {\n    onDismiss: state.close\n  }), /*#__PURE__*/(0, $ehFet$react).createElement((0, $44f671af83e7d9e0$export$2de4954e8ae13b9f).Provider, {\n    value: {\n      ...arrowProps,\n      placement: placement,\n      ref: arrowRef\n    }\n  }, renderProps.children), /*#__PURE__*/(0, $ehFet$react).createElement((0, $ehFet$DismissButton), {\n    onDismiss: state.close\n  })));\n}\nexport { $07b14b47974efb58$export$9b9a0cd73afb7ca4 as PopoverContext, $07b14b47974efb58$export$5b6b19405a83ff9d as Popover };","map":{"version":3,"names":["$07b14b47974efb58$export$9b9a0cd73afb7ca4","$ehFet$createContext","$07b14b47974efb58$var$Popover","props","ref","$64fa3d84918910a7$export$29f1550f4b0d4415","contextState","$ehFet$useContext","$de32f1b87079253c$export$d2f961adcb0afbe","localState","$ehFet$useOverlayTriggerState","state","isOpen","defaultOpen","isExiting","$64fa3d84918910a7$export$45fda7c47f93fd48","isHidden","$ehFet$useIsHidden","children","trigger","placement","isEntering","defaultChildren","$ehFet$react","createElement","Fragment","$07b14b47974efb58$var$PopoverInner","triggerRef","popoverRef","$07b14b47974efb58$export$5b6b19405a83ff9d","$ehFet$forwardRef","UNSTABLE_portalContainer","arrowRef","$ehFet$useRef","arrowWidth","setArrowWidth","$ehFet$useState","$ehFet$useLayoutEffect","current","getBoundingClientRect","width","_props_offset","popoverProps","underlayProps","arrowProps","$ehFet$usePopover","offset","arrowSize","$64fa3d84918910a7$export$6d3443f2c48bfc20","renderProps","$64fa3d84918910a7$export$4d86445c2cf5e3","defaultClassName","values","style","$ehFet$Overlay","portalContainer","isNonModal","position","inset","$ehFet$mergeProps","$ehFet$filterDOMProps","slot","undefined","$ehFet$DismissButton","onDismiss","close","$44f671af83e7d9e0$export$2de4954e8ae13b9f","Provider","value"],"sources":["/Users/oscar.meunier/Documents/Personal/goodreads/node_modules/react-aria-components/dist/packages/react-aria-components/src/Popover.tsx"],"sourcesContent":["/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaPopoverProps, DismissButton, Overlay, PlacementAxis, PositionProps, usePopover} from 'react-aria';\nimport {ContextValue, RenderProps, SlotProps, useContextProps, useEnterAnimation, useExitAnimation, useRenderProps} from './utils';\nimport {filterDOMProps, mergeProps, useLayoutEffect} from '@react-aria/utils';\nimport {forwardRefType, RefObject} from '@react-types/shared';\nimport {OverlayArrowContext} from './OverlayArrow';\nimport {OverlayTriggerProps, OverlayTriggerState, useOverlayTriggerState} from 'react-stately';\nimport {OverlayTriggerStateContext} from './Dialog';\nimport React, {createContext, ForwardedRef, forwardRef, useContext, useRef, useState} from 'react';\nimport {useIsHidden} from '@react-aria/collections';\n\nexport interface PopoverProps extends Omit<PositionProps, 'isOpen'>, Omit<AriaPopoverProps, 'popoverRef' | 'triggerRef' | 'offset' | 'arrowSize'>, OverlayTriggerProps, RenderProps<PopoverRenderProps>, SlotProps {\n  /**\n   * The name of the component that triggered the popover. This is reflected on the element\n   * as the `data-trigger` attribute, and can be used to provide specific\n   * styles for the popover depending on which element triggered it.\n   */\n  trigger?: string,\n  /**\n   * The ref for the element which the popover positions itself with respect to.\n   *\n   * When used within a trigger component such as DialogTrigger, MenuTrigger, Select, etc.,\n   * this is set automatically. It is only required when used standalone.\n   */\n  triggerRef?: RefObject<Element | null>,\n  /**\n   * Whether the popover is currently performing an entry animation.\n   */\n  isEntering?: boolean,\n  /**\n   * Whether the popover is currently performing an exit animation.\n   */\n  isExiting?: boolean,\n  /**\n   * The container element in which the overlay portal will be placed. This may have unknown behavior depending on where it is portalled to.\n   * @default document.body\n   */\n  UNSTABLE_portalContainer?: Element,\n  /**\n   * The additional offset applied along the main axis between the element and its\n   * anchor element.\n   * @default 8\n   */\n  offset?: number\n}\n\nexport interface PopoverRenderProps {\n  /**\n   * The name of the component that triggered the popover, e.g. \"DialogTrigger\" or \"ComboBox\".\n   * @selector [data-trigger=\"...\"]\n   */\n  trigger: string | null,\n  /**\n   * The placement of the popover relative to the trigger.\n   * @selector [data-placement=\"left | right | top | bottom\"]\n   */\n  placement: PlacementAxis,\n  /**\n   * Whether the popover is currently entering. Use this to apply animations.\n   * @selector [data-entering]\n   */\n  isEntering: boolean,\n  /**\n   * Whether the popover is currently exiting. Use this to apply animations.\n   * @selector [data-exiting]\n   */\n  isExiting: boolean\n}\n\nexport const PopoverContext = createContext<ContextValue<PopoverProps, HTMLElement>>(null);\n\nfunction Popover(props: PopoverProps, ref: ForwardedRef<HTMLElement>) {\n  [props, ref] = useContextProps(props, ref, PopoverContext);\n  let contextState = useContext(OverlayTriggerStateContext);\n  let localState = useOverlayTriggerState(props);\n  let state = props.isOpen != null || props.defaultOpen != null || !contextState ? localState : contextState;\n  let isExiting = useExitAnimation(ref, state.isOpen) || props.isExiting || false;\n  let isHidden = useIsHidden();\n\n  // If we are in a hidden tree, we still need to preserve our children.\n  if (isHidden) {\n    let children = props.children;\n    if (typeof children === 'function') {\n      children = children({\n        trigger: props.trigger || null,\n        placement: 'bottom',\n        isEntering: false,\n        isExiting: false,\n        defaultChildren: null\n      });\n    }\n\n    return <>{children}</>;\n  }\n\n  if (state && !state.isOpen && !isExiting) {\n    return null;\n  }\n\n  return (\n    <PopoverInner\n      {...props}\n      triggerRef={props.triggerRef!}\n      state={state}\n      popoverRef={ref}\n      isExiting={isExiting} />\n  );\n}\n\n/**\n * A popover is an overlay element positioned relative to a trigger.\n */\nconst _Popover = /*#__PURE__*/ (forwardRef as forwardRefType)(Popover);\nexport {_Popover as Popover};\n\ninterface PopoverInnerProps extends AriaPopoverProps, RenderProps<PopoverRenderProps>, SlotProps {\n  state: OverlayTriggerState,\n  isEntering?: boolean,\n  isExiting: boolean,\n  UNSTABLE_portalContainer?: Element,\n  trigger?: string\n}\n\nfunction PopoverInner({state, isExiting, UNSTABLE_portalContainer, ...props}: PopoverInnerProps) {\n  // Calculate the arrow size internally (and remove props.arrowSize from PopoverProps)\n  // Referenced from: packages/@react-spectrum/tooltip/src/TooltipTrigger.tsx\n  let arrowRef = useRef<HTMLDivElement>(null);\n  let [arrowWidth, setArrowWidth] = useState(0);\n  useLayoutEffect(() => {\n    if (arrowRef.current && state.isOpen) {\n      setArrowWidth(arrowRef.current.getBoundingClientRect().width);\n    }\n  }, [state.isOpen, arrowRef]);\n\n  let {popoverProps, underlayProps, arrowProps, placement} = usePopover({\n    ...props,\n    offset: props.offset ?? 8,\n    arrowSize: arrowWidth\n  }, state);\n\n  let ref = props.popoverRef as RefObject<HTMLDivElement | null>;\n  let isEntering = useEnterAnimation(ref, !!placement) || props.isEntering || false;\n  let renderProps = useRenderProps({\n    ...props,\n    defaultClassName: 'react-aria-Popover',\n    values: {\n      trigger: props.trigger || null,\n      placement,\n      isEntering,\n      isExiting\n    }\n  });\n\n  let style = {...popoverProps.style, ...renderProps.style};\n\n  return (\n    <Overlay isExiting={isExiting} portalContainer={UNSTABLE_portalContainer}>\n      {!props.isNonModal && state.isOpen && <div data-testid=\"underlay\" {...underlayProps} style={{position: 'fixed', inset: 0}} />}\n      <div\n        {...mergeProps(filterDOMProps(props as any), popoverProps)}\n        {...renderProps}\n        ref={ref}\n        slot={props.slot || undefined}\n        style={style}\n        data-trigger={props.trigger}\n        data-placement={placement}\n        data-entering={isEntering || undefined}\n        data-exiting={isExiting || undefined}>\n        {!props.isNonModal && <DismissButton onDismiss={state.close} />}\n        <OverlayArrowContext.Provider value={{...arrowProps, placement, ref: arrowRef}}>\n          {renderProps.children}\n        </OverlayArrowContext.Provider>\n        <DismissButton onDismiss={state.close} />\n      </div>\n    </Overlay>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}