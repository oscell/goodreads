{"ast":null,"code":"import { useMemo as $luMFQ$useMemo, cloneElement as $luMFQ$cloneElement } from \"react\";\n\n/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\nfunction $e948873055cbafe4$export$727c8fc270210f13(props) {\n  let {\n    children: children,\n    items: items,\n    idScope: idScope,\n    addIdAndValue: addIdAndValue,\n    dependencies = []\n  } = props;\n  // Invalidate the cache whenever the parent value changes.\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  let cache = (0, $luMFQ$useMemo)(() => new WeakMap(), dependencies);\n  return (0, $luMFQ$useMemo)(() => {\n    if (items && typeof children === 'function') {\n      let res = [];\n      for (let item of items) {\n        let rendered = cache.get(item);\n        if (!rendered) {\n          rendered = children(item);\n          var _rendered_props_id, _ref;\n          // @ts-ignore\n          let key = (_ref = (_rendered_props_id = rendered.props.id) !== null && _rendered_props_id !== void 0 ? _rendered_props_id : item.key) !== null && _ref !== void 0 ? _ref : item.id;\n          // eslint-disable-next-line max-depth\n          if (key == null) throw new Error('Could not determine key for item');\n          // eslint-disable-next-line max-depth\n          if (idScope) key = idScope + ':' + key;\n          // Note: only works if wrapped Item passes through id...\n          rendered = (0, $luMFQ$cloneElement)(rendered, addIdAndValue ? {\n            key: key,\n            id: key,\n            value: item\n          } : {\n            key: key\n          });\n          cache.set(item, rendered);\n        }\n        res.push(rendered);\n      }\n      return res;\n    } else if (typeof children !== 'function') return children;\n  }, [children, items, cache, idScope, addIdAndValue]);\n}\nexport { $e948873055cbafe4$export$727c8fc270210f13 as useCachedChildren };","map":{"version":3,"names":["$e948873055cbafe4$export$727c8fc270210f13","props","children","items","idScope","addIdAndValue","dependencies","cache","$luMFQ$useMemo","WeakMap","res","item","rendered","get","_rendered_props_id","_ref","key","id","Error","$luMFQ$cloneElement","value","set","push"],"sources":["/Users/oscar.meunier/Documents/Coding/Personal/final/goodreads/node_modules/@react-aria/collections/dist/packages/@react-aria/collections/src/useCachedChildren.ts"],"sourcesContent":["/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {cloneElement, ReactElement, ReactNode, useMemo} from 'react';\nimport {Key} from '@react-types/shared';\n\nexport interface CachedChildrenOptions<T> {\n  /** Item objects in the collection. */\n  items?: Iterable<T>,\n  /** The contents of the collection. */\n  children?: ReactNode | ((item: T) => ReactNode),\n  /** Values that should invalidate the item cache when using dynamic collections. */\n  dependencies?: any[],\n  /** A scope to prepend to all child item ids to ensure they are unique. */\n  idScope?: Key,\n  /** Whether to add `id` and `value` props to all child items. */\n  addIdAndValue?: boolean\n}\n\n/**\n * Maps over a list of items and renders React elements for them. Each rendered item is\n * cached based on object identity, and React keys are generated from the `key` or `id` property.\n */\nexport function useCachedChildren<T extends object>(props: CachedChildrenOptions<T>): ReactNode {\n  let {children, items, idScope, addIdAndValue, dependencies = []} = props;\n\n  // Invalidate the cache whenever the parent value changes.\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  let cache = useMemo(() => new WeakMap(), dependencies);\n  return useMemo(() => {\n    if (items && typeof children === 'function') {\n      let res: ReactElement[] = [];\n      for (let item of items) {\n        let rendered = cache.get(item);\n        if (!rendered) {\n          rendered = children(item);\n          // @ts-ignore\n          let key = rendered.props.id ?? item.key ?? item.id;\n          // eslint-disable-next-line max-depth\n          if (key == null) {\n            throw new Error('Could not determine key for item');\n          }\n          // eslint-disable-next-line max-depth\n          if (idScope) {\n            key = idScope + ':' + key;\n          }\n          // Note: only works if wrapped Item passes through id...\n          rendered = cloneElement(\n            rendered,\n            addIdAndValue ? {key, id: key, value: item} : {key}\n          );\n          cache.set(item, rendered);\n        }\n        res.push(rendered);\n      }\n      return res;\n    } else if (typeof children !== 'function') {\n      return children;\n    }\n  }, [children, items, cache, idScope, addIdAndValue]);\n}\n"],"mappings":";;AAAA;;;;;;;;;;;AAgCO,SAASA,0CAAoCC,KAA+B;EACjF,IAAI;IAAAC,QAAA,EAACA,QAAQ;IAAAC,KAAA,EAAEA,KAAK;IAAAC,OAAA,EAAEA,OAAO;IAAAC,aAAA,EAAEA,aAAa;IAAEC,YAAA,GAAe;EAAE,CAAC,GAAGL,KAAA;EAEnE;EACA;EACA,IAAIM,KAAA,GAAQ,IAAAC,cAAM,EAAE,MAAM,IAAIC,OAAA,IAAWH,YAAA;EACzC,OAAO,IAAAE,cAAM,EAAE;IACb,IAAIL,KAAA,IAAS,OAAOD,QAAA,KAAa,YAAY;MAC3C,IAAIQ,GAAA,GAAsB,EAAE;MAC5B,KAAK,IAAIC,IAAA,IAAQR,KAAA,EAAO;QACtB,IAAIS,QAAA,GAAWL,KAAA,CAAMM,GAAG,CAACF,IAAA;QACzB,IAAI,CAACC,QAAA,EAAU;UACbA,QAAA,GAAWV,QAAA,CAASS,IAAA;cAEVG,kBAAA,EAAAC,IAAA;UADV;UACA,IAAIC,GAAA,GAAM,CAAAD,IAAA,IAAAD,kBAAA,GAAAF,QAAA,CAASX,KAAK,CAACgB,EAAE,cAAjBH,kBAAA,cAAAA,kBAAA,GAAqBH,IAAA,CAAKK,GAAG,cAA7BD,IAAA,cAAAA,IAAA,GAAiCJ,IAAA,CAAKM,EAAE;UAClD;UACA,IAAID,GAAA,IAAO,MACT,MAAM,IAAIE,KAAA,CAAM;UAElB;UACA,IAAId,OAAA,EACFY,GAAA,GAAMZ,OAAA,GAAU,MAAMY,GAAA;UAExB;UACAJ,QAAA,GAAW,IAAAO,mBAAW,EACpBP,QAAA,EACAP,aAAA,GAAgB;iBAACW,GAAA;YAAKC,EAAA,EAAID,GAAA;YAAKI,KAAA,EAAOT;UAAI,IAAI;iBAACK;UAAG;UAEpDT,KAAA,CAAMc,GAAG,CAACV,IAAA,EAAMC,QAAA;QAClB;QACAF,GAAA,CAAIY,IAAI,CAACV,QAAA;MACX;MACA,OAAOF,GAAA;IACT,OAAO,IAAI,OAAOR,QAAA,KAAa,YAC7B,OAAOA,QAAA;EAEX,GAAG,CAACA,QAAA,EAAUC,KAAA,EAAOI,KAAA,EAAOH,OAAA,EAASC,aAAA,CAAc;AACrD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}