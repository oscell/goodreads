{"ast":null,"code":"import { gridIds as $2140fb2337097f2d$export$552312adfd451dab } from \"./utils.mjs\";\nimport $dDeJM$intlStringsmodulejs from \"./intlStrings.mjs\";\nimport { TableKeyboardDelegate as $0ba3c81c7f1caedd$export$da43f8f5cb04028d } from \"./TableKeyboardDelegate.mjs\";\nimport { announce as $dDeJM$announce } from \"@react-aria/live-announcer\";\nimport { useGrid as $dDeJM$useGrid } from \"@react-aria/grid\";\nimport { useId as $dDeJM$useId, useDescription as $dDeJM$useDescription, useUpdateEffect as $dDeJM$useUpdateEffect, mergeProps as $dDeJM$mergeProps } from \"@react-aria/utils\";\nimport { tableNestedRows as $dDeJM$tableNestedRows } from \"@react-stately/flags\";\nimport { useCollator as $dDeJM$useCollator, useLocale as $dDeJM$useLocale, useLocalizedStringFormatter as $dDeJM$useLocalizedStringFormatter } from \"@react-aria/i18n\";\nimport { useMemo as $dDeJM$useMemo } from \"react\";\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nfunction $6e31608fbba75bab$export$25bceaac3c7e4dc7(props, state, ref) {\n  let {\n    keyboardDelegate: keyboardDelegate,\n    isVirtualized: isVirtualized,\n    layoutDelegate: layoutDelegate,\n    layout: layout\n  } = props;\n  // By default, a KeyboardDelegate is provided which uses the DOM to query layout information (e.g. for page up/page down).\n  // When virtualized, the layout object will be passed in as a prop and override this.\n  let collator = (0, $dDeJM$useCollator)({\n    usage: 'search',\n    sensitivity: 'base'\n  });\n  let {\n    direction: direction\n  } = (0, $dDeJM$useLocale)();\n  let disabledBehavior = state.selectionManager.disabledBehavior;\n  let delegate = (0, $dDeJM$useMemo)(() => keyboardDelegate || new (0, $0ba3c81c7f1caedd$export$da43f8f5cb04028d)({\n    collection: state.collection,\n    disabledKeys: state.disabledKeys,\n    disabledBehavior: disabledBehavior,\n    ref: ref,\n    direction: direction,\n    collator: collator,\n    layoutDelegate: layoutDelegate,\n    layout: layout\n  }), [keyboardDelegate, state.collection, state.disabledKeys, disabledBehavior, ref, direction, collator, layoutDelegate, layout]);\n  let id = (0, $dDeJM$useId)(props.id);\n  (0, $2140fb2337097f2d$export$552312adfd451dab).set(state, id);\n  let {\n    gridProps: gridProps\n  } = (0, $dDeJM$useGrid)({\n    ...props,\n    id: id,\n    keyboardDelegate: delegate\n  }, state, ref);\n  // Override to include header rows\n  if (isVirtualized) gridProps['aria-rowcount'] = state.collection.size + state.collection.headerRows.length;\n  if ((0, $dDeJM$tableNestedRows)() && 'expandedKeys' in state) gridProps.role = 'treegrid';\n  let {\n    column: column,\n    direction: sortDirection\n  } = state.sortDescriptor || {};\n  let stringFormatter = (0, $dDeJM$useLocalizedStringFormatter)((0, $parcel$interopDefault($dDeJM$intlStringsmodulejs)), '@react-aria/table');\n  let sortDescription = (0, $dDeJM$useMemo)(() => {\n    var _state_collection_columns_find;\n    let columnName = (_state_collection_columns_find = state.collection.columns.find(c => c.key === column)) === null || _state_collection_columns_find === void 0 ? void 0 : _state_collection_columns_find.textValue;\n    return sortDirection && column ? stringFormatter.format(`${sortDirection}Sort`, {\n      columnName: columnName\n    }) : undefined;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sortDirection, column, state.collection.columns]);\n  let descriptionProps = (0, $dDeJM$useDescription)(sortDescription);\n  // Only announce after initial render, tabbing to the table will tell you the initial sort info already\n  (0, $dDeJM$useUpdateEffect)(() => {\n    (0, $dDeJM$announce)(sortDescription, 'assertive', 500);\n  }, [sortDescription]);\n  return {\n    gridProps: (0, $dDeJM$mergeProps)(gridProps, descriptionProps, {\n      // merge sort description with long press information\n      'aria-describedby': [descriptionProps['aria-describedby'], gridProps['aria-describedby']].filter(Boolean).join(' ')\n    })\n  };\n}\nexport { $6e31608fbba75bab$export$25bceaac3c7e4dc7 as useTable };","map":{"version":3,"names":["$6e31608fbba75bab$export$25bceaac3c7e4dc7","props","state","ref","keyboardDelegate","isVirtualized","layoutDelegate","layout","collator","$dDeJM$useCollator","usage","sensitivity","direction","$dDeJM$useLocale","disabledBehavior","selectionManager","delegate","$dDeJM$useMemo","$0ba3c81c7f1caedd$export$da43f8f5cb04028d","collection","disabledKeys","id","$dDeJM$useId","$2140fb2337097f2d$export$552312adfd451dab","set","gridProps","$dDeJM$useGrid","size","headerRows","length","$dDeJM$tableNestedRows","role","column","sortDirection","sortDescriptor","stringFormatter","$dDeJM$useLocalizedStringFormatter","$parcel$interopDefault","$dDeJM$intlStringsmodulejs","sortDescription","_state_collection_columns_find","columnName","columns","find","c","key","textValue","format","undefined","descriptionProps","$dDeJM$useDescription","$dDeJM$useUpdateEffect","$dDeJM$announce","$dDeJM$mergeProps","filter","Boolean","join"],"sources":["/Users/oscar.meunier/Documents/Personal/goodreads/node_modules/@react-aria/table/dist/packages/@react-aria/table/src/useTable.ts"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {announce} from '@react-aria/live-announcer';\nimport {GridAria, GridProps, useGrid} from '@react-aria/grid';\nimport {gridIds} from './utils';\n// @ts-ignore\nimport intlMessages from '../intl/*.json';\nimport {Key, LayoutDelegate, Rect, RefObject, Size} from '@react-types/shared';\nimport {mergeProps, useDescription, useId, useUpdateEffect} from '@react-aria/utils';\nimport {TableKeyboardDelegate} from './TableKeyboardDelegate';\nimport {tableNestedRows} from '@react-stately/flags';\nimport {TableState, TreeGridState} from '@react-stately/table';\nimport {useCollator, useLocale, useLocalizedStringFormatter} from '@react-aria/i18n';\nimport {useMemo} from 'react';\n\nexport interface AriaTableProps extends GridProps {\n  /** The layout object for the table. Computes what content is visible and how to position and style them. */\n  layoutDelegate?: LayoutDelegate,\n  /** @deprecated - Use layoutDelegate instead. */\n  layout?: DeprecatedLayout\n}\n\ninterface DeprecatedLayout {\n  getLayoutInfo(key: Key): DeprecatedLayoutInfo,\n  getContentSize(): Size,\n  virtualizer: DeprecatedVirtualizer\n}\n\ninterface DeprecatedLayoutInfo {\n  rect: Rect\n}\n\ninterface DeprecatedVirtualizer {\n  visibleRect: Rect\n}\n\n/**\n * Provides the behavior and accessibility implementation for a table component.\n * A table displays data in rows and columns and enables a user to navigate its contents via directional navigation keys,\n * and optionally supports row selection and sorting.\n * @param props - Props for the table.\n * @param state - State for the table, as returned by `useTableState`.\n * @param ref - The ref attached to the table element.\n */\nexport function useTable<T>(props: AriaTableProps, state: TableState<T> | TreeGridState<T>, ref: RefObject<HTMLElement | null>): GridAria {\n  let {\n    keyboardDelegate,\n    isVirtualized,\n    layoutDelegate,\n    layout\n  } = props;\n\n  // By default, a KeyboardDelegate is provided which uses the DOM to query layout information (e.g. for page up/page down).\n  // When virtualized, the layout object will be passed in as a prop and override this.\n  let collator = useCollator({usage: 'search', sensitivity: 'base'});\n  let {direction} = useLocale();\n  let disabledBehavior = state.selectionManager.disabledBehavior;\n  let delegate = useMemo(() => keyboardDelegate || new TableKeyboardDelegate({\n    collection: state.collection,\n    disabledKeys: state.disabledKeys,\n    disabledBehavior,\n    ref,\n    direction,\n    collator,\n    layoutDelegate,\n    layout\n  }), [keyboardDelegate, state.collection, state.disabledKeys, disabledBehavior, ref, direction, collator, layoutDelegate, layout]);\n  let id = useId(props.id);\n  gridIds.set(state, id);\n\n  let {gridProps} = useGrid({\n    ...props,\n    id,\n    keyboardDelegate: delegate\n  }, state, ref);\n\n  // Override to include header rows\n  if (isVirtualized) {\n    gridProps['aria-rowcount'] = state.collection.size + state.collection.headerRows.length;\n  }\n\n  if (tableNestedRows() && 'expandedKeys' in state) {\n    gridProps.role = 'treegrid';\n  }\n\n  let {column, direction: sortDirection} = state.sortDescriptor || {};\n  let stringFormatter = useLocalizedStringFormatter(intlMessages, '@react-aria/table');\n  let sortDescription = useMemo(() => {\n    let columnName = state.collection.columns.find(c => c.key === column)?.textValue;\n    return sortDirection && column ? stringFormatter.format(`${sortDirection}Sort`, {columnName}) : undefined;\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sortDirection, column, state.collection.columns]);\n\n  let descriptionProps = useDescription(sortDescription);\n\n  // Only announce after initial render, tabbing to the table will tell you the initial sort info already\n  useUpdateEffect(() => {\n    announce(sortDescription, 'assertive', 500);\n  }, [sortDescription]);\n\n  return {\n    gridProps: mergeProps(\n      gridProps,\n      descriptionProps,\n      {\n        // merge sort description with long press information\n        'aria-describedby': [descriptionProps['aria-describedby'], gridProps['aria-describedby']].filter(Boolean).join(' ')\n      }\n    )\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}