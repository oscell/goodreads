{"ast":null,"code":"import { filterDOMProps as $eUtJD$filterDOMProps, mergeProps as $eUtJD$mergeProps } from \"@react-aria/utils\";\nimport { ListKeyboardDelegate as $eUtJD$ListKeyboardDelegate } from \"@react-aria/selection\";\nimport { useState as $eUtJD$useState, useRef as $eUtJD$useRef, useEffect as $eUtJD$useEffect } from \"react\";\nimport { useField as $eUtJD$useField } from \"@react-aria/label\";\nimport { useFocusWithin as $eUtJD$useFocusWithin } from \"@react-aria/interactions\";\nimport { useGridList as $eUtJD$useGridList } from \"@react-aria/gridlist\";\nimport { useLocale as $eUtJD$useLocale } from \"@react-aria/i18n\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nconst $d7323bca8d074eeb$export$653eddfc964b0f8a = new WeakMap();\nfunction $d7323bca8d074eeb$export$4f8b5cda58b7e8ff(props, state, ref) {\n  let {\n    direction: direction\n  } = (0, $eUtJD$useLocale)();\n  let keyboardDelegate = props.keyboardDelegate || new (0, $eUtJD$ListKeyboardDelegate)({\n    collection: state.collection,\n    ref: ref,\n    orientation: 'horizontal',\n    direction: direction,\n    disabledKeys: state.disabledKeys,\n    disabledBehavior: state.selectionManager.disabledBehavior\n  });\n  let {\n    labelProps: labelProps,\n    fieldProps: fieldProps,\n    descriptionProps: descriptionProps,\n    errorMessageProps: errorMessageProps\n  } = (0, $eUtJD$useField)({\n    ...props,\n    labelElementType: 'span'\n  });\n  let {\n    gridProps: gridProps\n  } = (0, $eUtJD$useGridList)({\n    ...props,\n    ...fieldProps,\n    keyboardDelegate: keyboardDelegate,\n    shouldFocusWrap: true,\n    linkBehavior: 'override'\n  }, state, ref);\n  let [isFocusWithin, setFocusWithin] = (0, $eUtJD$useState)(false);\n  let {\n    focusWithinProps: focusWithinProps\n  } = (0, $eUtJD$useFocusWithin)({\n    onFocusWithinChange: setFocusWithin\n  });\n  let domProps = (0, $eUtJD$filterDOMProps)(props);\n  // If the last tag is removed, focus the container.\n  let prevCount = (0, $eUtJD$useRef)(state.collection.size);\n  (0, $eUtJD$useEffect)(() => {\n    if (ref.current && prevCount.current > 0 && state.collection.size === 0 && isFocusWithin) ref.current.focus();\n    prevCount.current = state.collection.size;\n  }, [state.collection.size, isFocusWithin, ref]);\n  $d7323bca8d074eeb$export$653eddfc964b0f8a.set(state, {\n    onRemove: props.onRemove\n  });\n  return {\n    gridProps: (0, $eUtJD$mergeProps)(gridProps, domProps, {\n      role: state.collection.size ? 'grid' : null,\n      'aria-atomic': false,\n      'aria-relevant': 'additions',\n      'aria-live': isFocusWithin ? 'polite' : 'off',\n      ...focusWithinProps,\n      ...fieldProps\n    }),\n    labelProps: labelProps,\n    descriptionProps: descriptionProps,\n    errorMessageProps: errorMessageProps\n  };\n}\nexport { $d7323bca8d074eeb$export$653eddfc964b0f8a as hookData, $d7323bca8d074eeb$export$4f8b5cda58b7e8ff as useTagGroup };","map":{"version":3,"names":["$d7323bca8d074eeb$export$653eddfc964b0f8a","WeakMap","$d7323bca8d074eeb$export$4f8b5cda58b7e8ff","props","state","ref","direction","$eUtJD$useLocale","keyboardDelegate","$eUtJD$ListKeyboardDelegate","collection","orientation","disabledKeys","disabledBehavior","selectionManager","labelProps","fieldProps","descriptionProps","errorMessageProps","$eUtJD$useField","labelElementType","gridProps","$eUtJD$useGridList","shouldFocusWrap","linkBehavior","isFocusWithin","setFocusWithin","$eUtJD$useState","focusWithinProps","$eUtJD$useFocusWithin","onFocusWithinChange","domProps","$eUtJD$filterDOMProps","prevCount","$eUtJD$useRef","size","$eUtJD$useEffect","current","focus","set","onRemove","$eUtJD$mergeProps","role"],"sources":["/Users/oscar.meunier/Documents/Coding/Personal/final/goodreads/node_modules/@react-aria/tag/dist/packages/@react-aria/tag/src/useTagGroup.ts"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaLabelingProps, CollectionBase, DOMAttributes, DOMProps, HelpTextProps, Key, KeyboardDelegate, LabelableProps, MultipleSelection, RefObject, SelectionBehavior} from '@react-types/shared';\nimport {filterDOMProps, mergeProps} from '@react-aria/utils';\nimport {ListKeyboardDelegate} from '@react-aria/selection';\nimport type {ListState} from '@react-stately/list';\nimport {ReactNode, useEffect, useRef, useState} from 'react';\nimport {useField} from '@react-aria/label';\nimport {useFocusWithin} from '@react-aria/interactions';\nimport {useGridList} from '@react-aria/gridlist';\nimport {useLocale} from '@react-aria/i18n';\n\nexport interface TagGroupAria {\n  /** Props for the tag grouping element. */\n  gridProps: DOMAttributes,\n  /** Props for the tag group's visible label (if any). */\n  labelProps: DOMAttributes,\n  /** Props for the tag group description element, if any. */\n  descriptionProps: DOMAttributes,\n  /** Props for the tag group error message element, if any. */\n  errorMessageProps: DOMAttributes\n}\n\nexport interface AriaTagGroupProps<T> extends CollectionBase<T>, MultipleSelection, DOMProps, LabelableProps, AriaLabelingProps, Omit<HelpTextProps, 'errorMessage'> {\n  /** How multiple selection should behave in the collection. */\n  selectionBehavior?: SelectionBehavior,\n  /** Handler that is called when a user deletes a tag.  */\n  onRemove?: (keys: Set<Key>) => void,\n  /** An error message for the field. */\n  errorMessage?: ReactNode\n}\n\nexport interface AriaTagGroupOptions<T> extends Omit<AriaTagGroupProps<T>, 'children'> {\n  /**\n   * An optional keyboard delegate to handle arrow key navigation,\n   * to override the default.\n   */\n  keyboardDelegate?: KeyboardDelegate\n}\n\ninterface HookData {\n  onRemove?: (keys: Set<Key>) => void\n}\n\nexport const hookData = new WeakMap<ListState<any>, HookData>();\n\n/**\n * Provides the behavior and accessibility implementation for a tag group component.\n * A tag group is a focusable list of labels, categories, keywords, filters, or other items, with support for keyboard navigation, selection, and removal.\n * @param props - Props to be applied to the tag group.\n * @param state - State for the tag group, as returned by `useListState`.\n * @param ref - A ref to a DOM element for the tag group.\n */\nexport function useTagGroup<T>(props: AriaTagGroupOptions<T>, state: ListState<T>, ref: RefObject<HTMLElement | null>): TagGroupAria {\n  let {direction} = useLocale();\n  let keyboardDelegate = props.keyboardDelegate || new ListKeyboardDelegate({\n    collection: state.collection,\n    ref,\n    orientation: 'horizontal',\n    direction,\n    disabledKeys: state.disabledKeys,\n    disabledBehavior: state.selectionManager.disabledBehavior\n  });\n  let {labelProps, fieldProps, descriptionProps, errorMessageProps} = useField({\n    ...props,\n    labelElementType: 'span'\n  });\n  let {gridProps} = useGridList({\n    ...props,\n    ...fieldProps,\n    keyboardDelegate,\n    shouldFocusWrap: true,\n    linkBehavior: 'override'\n  }, state, ref);\n\n  let [isFocusWithin, setFocusWithin] = useState(false);\n  let {focusWithinProps} = useFocusWithin({\n    onFocusWithinChange: setFocusWithin\n  });\n  let domProps = filterDOMProps(props);\n\n  // If the last tag is removed, focus the container.\n  let prevCount = useRef(state.collection.size);\n  useEffect(() => {\n    if (ref.current && prevCount.current > 0 && state.collection.size === 0 && isFocusWithin) {\n      ref.current.focus();\n    }\n    prevCount.current = state.collection.size;\n  }, [state.collection.size, isFocusWithin, ref]);\n\n  hookData.set(state, {onRemove: props.onRemove});\n\n  return {\n    gridProps: mergeProps(gridProps, domProps, {\n      role: state.collection.size ? 'grid' : null,\n      'aria-atomic': false,\n      'aria-relevant': 'additions',\n      'aria-live': isFocusWithin ? 'polite' : 'off',\n      ...focusWithinProps,\n      ...fieldProps\n    }),\n    labelProps,\n    descriptionProps,\n    errorMessageProps\n  };\n}\n"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;AAsDO,MAAMA,yCAAA,GAAW,IAAIC,OAAA;AASrB,SAASC,0CAAeC,KAA6B,EAAEC,KAAmB,EAAEC,GAAkC;EACnH,IAAI;IAAAC,SAAA,EAACA;EAAS,CAAC,GAAG,IAAAC,gBAAQ;EAC1B,IAAIC,gBAAA,GAAmBL,KAAA,CAAMK,gBAAgB,IAAI,KAAI,GAAAC,2BAAmB,EAAE;IACxEC,UAAA,EAAYN,KAAA,CAAMM,UAAU;SAC5BL,GAAA;IACAM,WAAA,EAAa;eACbL,SAAA;IACAM,YAAA,EAAcR,KAAA,CAAMQ,YAAY;IAChCC,gBAAA,EAAkBT,KAAA,CAAMU,gBAAgB,CAACD;EAC3C;EACA,IAAI;IAAAE,UAAA,EAACA,UAAU;IAAAC,UAAA,EAAEA,UAAU;IAAAC,gBAAA,EAAEA,gBAAgB;IAAAC,iBAAA,EAAEA;EAAiB,CAAC,GAAG,IAAAC,eAAO,EAAE;IAC3E,GAAGhB,KAAK;IACRiB,gBAAA,EAAkB;EACpB;EACA,IAAI;IAAAC,SAAA,EAACA;EAAS,CAAC,GAAG,IAAAC,kBAAU,EAAE;IAC5B,GAAGnB,KAAK;IACR,GAAGa,UAAU;sBACbR,gBAAA;IACAe,eAAA,EAAiB;IACjBC,YAAA,EAAc;EAChB,GAAGpB,KAAA,EAAOC,GAAA;EAEV,IAAI,CAACoB,aAAA,EAAeC,cAAA,CAAe,GAAG,IAAAC,eAAO,EAAE;EAC/C,IAAI;IAAAC,gBAAA,EAACA;EAAgB,CAAC,GAAG,IAAAC,qBAAa,EAAE;IACtCC,mBAAA,EAAqBJ;EACvB;EACA,IAAIK,QAAA,GAAW,IAAAC,qBAAa,EAAE7B,KAAA;EAE9B;EACA,IAAI8B,SAAA,GAAY,IAAAC,aAAK,EAAE9B,KAAA,CAAMM,UAAU,CAACyB,IAAI;EAC5C,IAAAC,gBAAQ,EAAE;IACR,IAAI/B,GAAA,CAAIgC,OAAO,IAAIJ,SAAA,CAAUI,OAAO,GAAG,KAAKjC,KAAA,CAAMM,UAAU,CAACyB,IAAI,KAAK,KAAKV,aAAA,EACzEpB,GAAA,CAAIgC,OAAO,CAACC,KAAK;IAEnBL,SAAA,CAAUI,OAAO,GAAGjC,KAAA,CAAMM,UAAU,CAACyB,IAAI;EAC3C,GAAG,CAAC/B,KAAA,CAAMM,UAAU,CAACyB,IAAI,EAAEV,aAAA,EAAepB,GAAA,CAAI;EAE9CL,yCAAA,CAASuC,GAAG,CAACnC,KAAA,EAAO;IAACoC,QAAA,EAAUrC,KAAA,CAAMqC;EAAQ;EAE7C,OAAO;IACLnB,SAAA,EAAW,IAAAoB,iBAAS,EAAEpB,SAAA,EAAWU,QAAA,EAAU;MACzCW,IAAA,EAAMtC,KAAA,CAAMM,UAAU,CAACyB,IAAI,GAAG,SAAS;MACvC,eAAe;MACf,iBAAiB;MACjB,aAAaV,aAAA,GAAgB,WAAW;MACxC,GAAGG,gBAAgB;MACnB,GAAGZ;IACL;gBACAD,UAAA;sBACAE,gBAAA;uBACAC;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}