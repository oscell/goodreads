{"ast":null,"code":"import { useVirtualizerItem as $47736c1e63ba1c6d$export$1da781778207e0a2 } from \"./useVirtualizerItem.mjs\";\nimport $ivH3G$react, { useRef as $ivH3G$useRef } from \"react\";\nimport { useLocale as $ivH3G$useLocale } from \"@react-aria/i18n\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nfunction $ccf8a0a04e4175ae$export$6796df8ba7398521(props) {\n  let {\n    style: style,\n    className: className,\n    layoutInfo: layoutInfo,\n    virtualizer: virtualizer,\n    parent: parent,\n    children: children\n  } = props;\n  let {\n    direction: direction\n  } = (0, $ivH3G$useLocale)();\n  let ref = (0, $ivH3G$useRef)(undefined);\n  (0, $47736c1e63ba1c6d$export$1da781778207e0a2)({\n    layoutInfo: layoutInfo,\n    virtualizer: virtualizer,\n    ref: ref\n  });\n  return /*#__PURE__*/(0, $ivH3G$react).createElement(\"div\", {\n    role: \"presentation\",\n    ref: ref,\n    className: className,\n    style: {\n      ...$ccf8a0a04e4175ae$export$1481e64fbe01b8b3(layoutInfo, direction, parent),\n      ...style\n    }\n  }, children);\n}\nlet $ccf8a0a04e4175ae$var$cache = new WeakMap();\nfunction $ccf8a0a04e4175ae$export$1481e64fbe01b8b3(layoutInfo, dir, parent) {\n  let xProperty = dir === 'rtl' ? 'right' : 'left';\n  let cached = $ccf8a0a04e4175ae$var$cache.get(layoutInfo);\n  if (cached && cached[xProperty] != null) {\n    if (!parent) return cached;\n    // Invalidate if the parent position changed.\n    let top = layoutInfo.rect.y - parent.rect.y;\n    let x = layoutInfo.rect.x - parent.rect.x;\n    if (cached.top === top && cached[xProperty] === x) return cached;\n  }\n  let rectStyles = {\n    // TODO: For layoutInfos that are sticky that have parents with overflow visible, their \"top\" will be relative to the to the nearest scrolling container\n    // which WON'T be the parent since the parent has overflow visible. This means we shouldn't offset the height by the parent's position\n    // Not 100% about this change here since it is quite ambigious what the scrolling container maybe and how its top is positioned with respect to the\n    // calculated layoutInfo.y here\n    top: layoutInfo.rect.y - (parent && !(parent.allowOverflow && layoutInfo.isSticky) ? parent.rect.y : 0),\n    [xProperty]: layoutInfo.rect.x - (parent && !(parent.allowOverflow && layoutInfo.isSticky) ? parent.rect.x : 0),\n    width: layoutInfo.rect.width,\n    height: layoutInfo.rect.height\n  };\n  // Get rid of any non finite values since they aren't valid css values\n  Object.entries(rectStyles).forEach(([key, value]) => {\n    if (!Number.isFinite(value)) rectStyles[key] = undefined;\n  });\n  let style = {\n    position: layoutInfo.isSticky ? 'sticky' : 'absolute',\n    // Sticky elements are positioned in normal document flow. Display inline-block so that they don't push other sticky columns onto the following rows.\n    display: layoutInfo.isSticky ? 'inline-block' : undefined,\n    overflow: layoutInfo.allowOverflow ? 'visible' : 'hidden',\n    opacity: layoutInfo.opacity,\n    zIndex: layoutInfo.zIndex,\n    transform: layoutInfo.transform,\n    contain: 'size layout style',\n    ...rectStyles\n  };\n  $ccf8a0a04e4175ae$var$cache.set(layoutInfo, style);\n  return style;\n}\nexport { $ccf8a0a04e4175ae$export$6796df8ba7398521 as VirtualizerItem, $ccf8a0a04e4175ae$export$1481e64fbe01b8b3 as layoutInfoToStyle };","map":{"version":3,"names":["$ccf8a0a04e4175ae$export$6796df8ba7398521","props","style","className","layoutInfo","virtualizer","parent","children","direction","$ivH3G$useLocale","ref","$ivH3G$useRef","undefined","$47736c1e63ba1c6d$export$1da781778207e0a2","$ivH3G$react","createElement","role","$ccf8a0a04e4175ae$export$1481e64fbe01b8b3","$ccf8a0a04e4175ae$var$cache","WeakMap","dir","xProperty","cached","get","top","rect","y","x","rectStyles","allowOverflow","isSticky","width","height","Object","entries","forEach","key","value","Number","isFinite","position","display","overflow","opacity","zIndex","transform","contain","set"],"sources":["/Users/oscar.meunier/Documents/Coding/Personal/final/goodreads/node_modules/@react-aria/virtualizer/dist/packages/@react-aria/virtualizer/src/VirtualizerItem.tsx"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Direction} from '@react-types/shared';\nimport {LayoutInfo} from '@react-stately/virtualizer';\nimport React, {CSSProperties, ReactNode, useRef} from 'react';\nimport {useLocale} from '@react-aria/i18n';\nimport {useVirtualizerItem, VirtualizerItemOptions} from './useVirtualizerItem';\n\ninterface VirtualizerItemProps extends Omit<VirtualizerItemOptions, 'ref'> {\n  parent?: LayoutInfo | null,\n  style?: CSSProperties,\n  className?: string,\n  children: ReactNode\n}\n\nexport function VirtualizerItem(props: VirtualizerItemProps) {\n  let {style, className, layoutInfo, virtualizer, parent, children} = props;\n  let {direction} = useLocale();\n  let ref = useRef(undefined);\n  useVirtualizerItem({\n    layoutInfo,\n    virtualizer,\n    ref\n  });\n\n  return (\n    <div role=\"presentation\" ref={ref} className={className} style={{...layoutInfoToStyle(layoutInfo, direction, parent), ...style}}>\n      {children}\n    </div>\n  );\n}\n\nlet cache = new WeakMap();\nexport function layoutInfoToStyle(layoutInfo: LayoutInfo, dir: Direction, parent?: LayoutInfo | null): CSSProperties {\n  let xProperty = dir === 'rtl' ? 'right' : 'left';\n  let cached = cache.get(layoutInfo);\n  if (cached && cached[xProperty] != null) {\n    if (!parent) {\n      return cached;\n    }\n\n    // Invalidate if the parent position changed.\n    let top = layoutInfo.rect.y - parent.rect.y;\n    let x = layoutInfo.rect.x - parent.rect.x;\n    if (cached.top === top && cached[xProperty] === x) {\n      return cached;\n    }\n  }\n\n  let rectStyles = {\n    // TODO: For layoutInfos that are sticky that have parents with overflow visible, their \"top\" will be relative to the to the nearest scrolling container\n    // which WON'T be the parent since the parent has overflow visible. This means we shouldn't offset the height by the parent's position\n    // Not 100% about this change here since it is quite ambigious what the scrolling container maybe and how its top is positioned with respect to the\n    // calculated layoutInfo.y here\n    top: layoutInfo.rect.y - (parent && !(parent.allowOverflow && layoutInfo.isSticky) ? parent.rect.y : 0),\n    [xProperty]: layoutInfo.rect.x - (parent && !(parent.allowOverflow && layoutInfo.isSticky) ? parent.rect.x : 0),\n    width: layoutInfo.rect.width,\n    height: layoutInfo.rect.height\n  };\n\n  // Get rid of any non finite values since they aren't valid css values\n  Object.entries(rectStyles).forEach(([key, value]) => {\n    if (!Number.isFinite(value)) {\n      rectStyles[key] = undefined;\n    }\n  });\n\n  let style: CSSProperties = {\n    position: layoutInfo.isSticky ? 'sticky' : 'absolute',\n    // Sticky elements are positioned in normal document flow. Display inline-block so that they don't push other sticky columns onto the following rows.\n    display: layoutInfo.isSticky ? 'inline-block' : undefined,\n    overflow: layoutInfo.allowOverflow ? 'visible' : 'hidden',\n    opacity: layoutInfo.opacity,\n    zIndex: layoutInfo.zIndex,\n    transform: layoutInfo.transform,\n    contain: 'size layout style',\n    ...rectStyles\n  };\n\n  cache.set(layoutInfo, style);\n  return style;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}