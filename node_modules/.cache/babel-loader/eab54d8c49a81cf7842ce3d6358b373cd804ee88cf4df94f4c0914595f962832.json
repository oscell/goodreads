{"ast":null,"code":"import { registerDropItem as $67560de7c78cb232$export$aef80212ac99c003, useDragSession as $67560de7c78cb232$export$418e185dd3f1b968 } from \"./DragManager.mjs\";\nimport { getDroppableCollectionRef as $7252cd45fc48c07c$export$7e397efd01d3db27, getTypes as $7252cd45fc48c07c$export$e1d41611756c6326, globalDndState as $7252cd45fc48c07c$export$6ca6700462636d0b, isInternalDropOperation as $7252cd45fc48c07c$export$78bf638634500fa5 } from \"./utils.mjs\";\nimport { useVirtualDrop as $224594fe3e57ff1e$export$62447ad3d2ec7da6 } from \"./useVirtualDrop.mjs\";\nimport { useEffect as $iZAZb$useEffect } from \"react\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nfunction $bfaab576ce1c580e$export$f7b0c5d28b66b6a5(options, state, ref) {\n  let {\n    dropProps: dropProps\n  } = (0, $224594fe3e57ff1e$export$62447ad3d2ec7da6)();\n  let droppableCollectionRef = (0, $7252cd45fc48c07c$export$7e397efd01d3db27)(state);\n  (0, $iZAZb$useEffect)(() => {\n    if (ref.current) return $67560de7c78cb232$export$aef80212ac99c003({\n      element: ref.current,\n      target: options.target,\n      getDropOperation(types, allowedOperations) {\n        let {\n          draggingKeys: draggingKeys\n        } = (0, $7252cd45fc48c07c$export$6ca6700462636d0b);\n        let isInternal = (0, $7252cd45fc48c07c$export$78bf638634500fa5)(droppableCollectionRef);\n        return state.getDropOperation({\n          target: options.target,\n          types: types,\n          allowedOperations: allowedOperations,\n          isInternal: isInternal,\n          draggingKeys: draggingKeys\n        });\n      }\n    });\n  }, [ref, options.target, state, droppableCollectionRef]);\n  let dragSession = $67560de7c78cb232$export$418e185dd3f1b968();\n  let {\n    draggingKeys: draggingKeys\n  } = (0, $7252cd45fc48c07c$export$6ca6700462636d0b);\n  let isInternal = (0, $7252cd45fc48c07c$export$78bf638634500fa5)(droppableCollectionRef);\n  let isValidDropTarget = dragSession && state.getDropOperation({\n    target: options.target,\n    types: (0, $7252cd45fc48c07c$export$e1d41611756c6326)(dragSession.dragTarget.items),\n    allowedOperations: dragSession.dragTarget.allowedDropOperations,\n    isInternal: isInternal,\n    draggingKeys: draggingKeys\n  }) !== 'cancel';\n  let isDropTarget = state.isDropTarget(options.target);\n  (0, $iZAZb$useEffect)(() => {\n    if (dragSession && isDropTarget && ref.current) ref.current.focus();\n  }, [isDropTarget, dragSession, ref]);\n  return {\n    dropProps: {\n      ...dropProps,\n      'aria-hidden': !dragSession || isValidDropTarget ? undefined : 'true'\n    },\n    isDropTarget: isDropTarget\n  };\n}\nexport { $bfaab576ce1c580e$export$f7b0c5d28b66b6a5 as useDroppableItem };","map":{"version":3,"names":["$bfaab576ce1c580e$export$f7b0c5d28b66b6a5","options","state","ref","dropProps","$224594fe3e57ff1e$export$62447ad3d2ec7da6","droppableCollectionRef","$7252cd45fc48c07c$export$7e397efd01d3db27","$iZAZb$useEffect","current","$67560de7c78cb232$export$aef80212ac99c003","element","target","getDropOperation","types","allowedOperations","draggingKeys","$7252cd45fc48c07c$export$6ca6700462636d0b","isInternal","$7252cd45fc48c07c$export$78bf638634500fa5","dragSession","$67560de7c78cb232$export$418e185dd3f1b968","isValidDropTarget","$7252cd45fc48c07c$export$e1d41611756c6326","dragTarget","items","allowedDropOperations","isDropTarget","focus","undefined"],"sources":["/Users/oscar.meunier/Documents/Coding/Personal/final/goodreads/node_modules/@react-aria/dnd/dist/packages/@react-aria/dnd/src/useDroppableItem.ts"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport * as DragManager from './DragManager';\nimport {DroppableCollectionState} from '@react-stately/dnd';\nimport {DropTarget, RefObject} from '@react-types/shared';\nimport {getDroppableCollectionRef, getTypes, globalDndState, isInternalDropOperation} from './utils';\nimport {HTMLAttributes, useEffect} from 'react';\nimport {useVirtualDrop} from './useVirtualDrop';\n\nexport interface DroppableItemOptions {\n  /** The drop target represented by the item. */\n  target: DropTarget\n}\n\nexport interface DroppableItemResult {\n  /** Props for the droppable element. */\n  dropProps: HTMLAttributes<HTMLElement>,\n  /** Whether the item is currently the active drop target. */\n  isDropTarget: boolean\n}\n\n/**\n * Handles drop interactions for an item within a collection component.\n */\nexport function useDroppableItem(options: DroppableItemOptions, state: DroppableCollectionState, ref: RefObject<HTMLElement | null>): DroppableItemResult {\n  let {dropProps} = useVirtualDrop();\n  let droppableCollectionRef = getDroppableCollectionRef(state);\n  useEffect(() => {\n    if (ref.current) {\n      return DragManager.registerDropItem({\n        element: ref.current,\n        target: options.target,\n        getDropOperation(types, allowedOperations) {\n          let {draggingKeys} = globalDndState;\n          let isInternal = isInternalDropOperation(droppableCollectionRef);\n          return state.getDropOperation({\n            target: options.target,\n            types,\n            allowedOperations,\n            isInternal,\n            draggingKeys\n          });\n        }\n      });\n    }\n  }, [ref, options.target, state, droppableCollectionRef]);\n\n  let dragSession = DragManager.useDragSession();\n  let {draggingKeys} = globalDndState;\n  let isInternal = isInternalDropOperation(droppableCollectionRef);\n  let isValidDropTarget = dragSession && state.getDropOperation({\n    target: options.target,\n    types: getTypes(dragSession.dragTarget.items),\n    allowedOperations: dragSession.dragTarget.allowedDropOperations,\n    isInternal,\n    draggingKeys\n  }) !== 'cancel';\n\n  let isDropTarget = state.isDropTarget(options.target);\n  useEffect(() => {\n    if (dragSession && isDropTarget && ref.current) {\n      ref.current.focus();\n    }\n  }, [isDropTarget, dragSession, ref]);\n\n  return {\n    dropProps: {\n      ...dropProps,\n      'aria-hidden': !dragSession || isValidDropTarget ? undefined : 'true'\n    },\n    isDropTarget\n  };\n}\n"],"mappings":";;;;;AAAA;;;;;;;;;;;;AAkCO,SAASA,0CAAiBC,OAA6B,EAAEC,KAA+B,EAAEC,GAAkC;EACjI,IAAI;IAAAC,SAAA,EAACA;EAAS,CAAC,GAAG,IAAAC,yCAAa;EAC/B,IAAIC,sBAAA,GAAyB,IAAAC,yCAAwB,EAAEL,KAAA;EACvD,IAAAM,gBAAQ,EAAE;IACR,IAAIL,GAAA,CAAIM,OAAO,EACb,OAAOC,yCAAA,CAA6B;MAClCC,OAAA,EAASR,GAAA,CAAIM,OAAO;MACpBG,MAAA,EAAQX,OAAA,CAAQW,MAAM;MACtBC,iBAAiBC,KAAK,EAAEC,iBAAiB;QACvC,IAAI;UAAAC,YAAA,EAACA;QAAY,CAAC,IAAG,GAAAC,yCAAa;QAClC,IAAIC,UAAA,GAAa,IAAAC,yCAAsB,EAAEb,sBAAA;QACzC,OAAOJ,KAAA,CAAMW,gBAAgB,CAAC;UAC5BD,MAAA,EAAQX,OAAA,CAAQW,MAAM;iBACtBE,KAAA;6BACAC,iBAAA;sBACAG,UAAA;wBACAF;QACF;MACF;IACF;EAEJ,GAAG,CAACb,GAAA,EAAKF,OAAA,CAAQW,MAAM,EAAEV,KAAA,EAAOI,sBAAA,CAAuB;EAEvD,IAAIc,WAAA,GAAcC,yCAAA;EAClB,IAAI;IAAAL,YAAA,EAACA;EAAY,CAAC,IAAG,GAAAC,yCAAa;EAClC,IAAIC,UAAA,GAAa,IAAAC,yCAAsB,EAAEb,sBAAA;EACzC,IAAIgB,iBAAA,GAAoBF,WAAA,IAAelB,KAAA,CAAMW,gBAAgB,CAAC;IAC5DD,MAAA,EAAQX,OAAA,CAAQW,MAAM;IACtBE,KAAA,EAAO,IAAAS,yCAAO,EAAEH,WAAA,CAAYI,UAAU,CAACC,KAAK;IAC5CV,iBAAA,EAAmBK,WAAA,CAAYI,UAAU,CAACE,qBAAqB;gBAC/DR,UAAA;kBACAF;EACF,OAAO;EAEP,IAAIW,YAAA,GAAezB,KAAA,CAAMyB,YAAY,CAAC1B,OAAA,CAAQW,MAAM;EACpD,IAAAJ,gBAAQ,EAAE;IACR,IAAIY,WAAA,IAAeO,YAAA,IAAgBxB,GAAA,CAAIM,OAAO,EAC5CN,GAAA,CAAIM,OAAO,CAACmB,KAAK;EAErB,GAAG,CAACD,YAAA,EAAcP,WAAA,EAAajB,GAAA,CAAI;EAEnC,OAAO;IACLC,SAAA,EAAW;MACT,GAAGA,SAAS;MACZ,eAAe,CAACgB,WAAA,IAAeE,iBAAA,GAAoBO,SAAA,GAAY;IACjE;kBACAF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}