/*! React InstantSearchCore UNRELEASED | Â© Algolia, inc. | https://github.com/algolia/instantsearch */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactInstantSearchCore={},e.React)}(this,function(e,b){"use strict";var s="default"in b?b.default:b,W="7.13.4";function C(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function m(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?C(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?L(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var U=r;function Q(e){return"function"==typeof e}function B(e){return"object"==typeof e&&null!==e}function q(e){return void 0===e}r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,i,a,o,c;if((this._events||(this._events={}),"error"===e)&&(!this._events.error||B(this._events.error)&&!this._events.error.length))throw(c=arguments[1])instanceof Error?c:((o=new Error('Uncaught, unspecified "error" event. ('+c+")")).context=c,o);if(q(t=this._events[e]))return!1;if(Q(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),t.apply(this,n)}else if(B(t))for(n=Array.prototype.slice.call(arguments,1),r=(a=t.slice()).length,i=0;i<r;i++)a[i].apply(this,n);return!0},r.prototype.on=r.prototype.addListener=function(e,t){if(Q(t))return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Q(t.listener)?t.listener:t),this._events[e]?B(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,B(this._events[e])&&!this._events[e].warned&&(t=q(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<t&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace)&&console.trace(),this;throw TypeError("listener must be a function")},r.prototype.once=function(e,t){var r;if(Q(t))return r=!1,n.listener=t,this.on(e,n),this;throw TypeError("listener must be a function");function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}},r.prototype.removeListener=function(e,t){var r,n,i,a;if(!Q(t))throw TypeError("listener must be a function");if(this._events&&this._events[e])if(i=(r=this._events[e]).length,n=-1,r===t||Q(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(B(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(this._events)if(this._events.removeListener)if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);this.removeAllListeners("removeListener"),this._events={}}else{if(Q(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);delete this._events[e]}else 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e];return this},r.prototype.listeners=function(e){e=this._events&&this._events[e]?Q(this._events[e])?[this._events[e]]:this._events[e].slice():[];return e},r.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(Q(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)};var V=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function J(e,t,r){this.main=e,this.fn=t,this.recommendFn=r,this.lastResults=null,this.lastRecommendResults=null}V(J,U),J.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},J.prototype.getModifiedState=function(e){return this.fn(e)},J.prototype.getModifiedRecommendState=function(e){return this.recommendFn(e)};var z=J;var t=function(e){return"string"!=typeof e?e:String(e).replace(/^-/,"\\-")},X=function(e){return"string"!=typeof e?e:e.replace(/^\\-/,"-")};function K(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function G(e,t){var r,n;if(e!==t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"__proto__"!==i&&"constructor"!==i&&(r=t[i],void 0!==(n=e[i])&&void 0===r||(K(n)&&K(r)?e[i]=G(n,r):e[i]="object"==typeof(n=r)&&null!==n?G(Array.isArray(n)?[]:{},n):n));return e}var Z=function(e){K(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];K(n)&&G(e,n)}return e};var Y=function(e){return e&&0<Object.keys(e).length};var ee=function(e,t){if(null===e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n};function te(e){this.params=(e=e||{}).params||[]}te.prototype={constructor:te,addParams:function(e){var t=this.params.slice();return t.push(e),new te({params:t})},removeParams:function(t){return new te({params:this.params.filter(function(e){return e.$$id!==t})})},addFrequentlyBoughtTogether:function(e){return this.addParams(Object.assign({},e,{model:"bought-together"}))},addRelatedProducts:function(e){return this.addParams(Object.assign({},e,{model:"related-products"}))},addTrendingItems:function(e){return this.addParams(Object.assign({},e,{model:"trending-items"}))},addTrendingFacets:function(e){return this.addParams(Object.assign({},e,{model:"trending-facets"}))},addLookingSimilar:function(e){return this.addParams(Object.assign({},e,{model:"looking-similar"}))},_buildQueries:function(t,r){return this.params.filter(function(e){return void 0===r[e.$$id]}).map(function(e){e=Object.assign({},e,{indexName:t,threshold:e.threshold||0});return delete e.$$id,e})}};var re=te;function ne(e,t){this._state=e,this._rawResults={};var r=this;e.params.forEach(function(e){e=e.$$id;r[e]=t[e],r._rawResults[e]=t[e]})}ne.prototype={constructor:ne};var ie=ne;function ae(r){return Object.keys(r).sort().reduce(function(e,t){return e[t]=r[t],e},{})}function oe(){return Array.prototype.slice.call(arguments).reduceRight(function(t,r){return Object.keys(Object(r)).forEach(function(e){void 0!==r[e]&&(void 0!==t[e]&&delete t[e],t[e]=r[e])}),t},{})}var l={_getQueries:function(c,s){var u=[];return u.push({indexName:c,params:l._getHitsSearchParams(s)}),s.getRefinedDisjunctiveFacets().forEach(function(e){u.push({indexName:c,params:l._getDisjunctiveFacetSearchParams(s,e)})}),s.getRefinedHierarchicalFacets().forEach(function(e){var a,o=s.getHierarchicalFacetByName(e),e=s.getHierarchicalRefinement(e),n=s._getHierarchicalFacetSeparator(o);0<e.length&&1<e[0].split(n).length&&(a=e[0].split(n).slice(0,-1).reduce(function(e,t,r){return e.concat({attribute:o.attributes[r],value:0===r?t:[e[e.length-1].value,t].join(n)})},[])).forEach(function(e,t){e=l._getDisjunctiveFacetSearchParams(s,e.attribute,0===t);function n(t){return o.attributes.some(function(e){return e===t.split(":")[0]})}var r=(e.facetFilters||[]).reduce(function(e,t){var r;return Array.isArray(t)&&0<(r=t.filter(function(e){return!n(e)})).length&&e.push(r),"string"!=typeof t||n(t)||e.push(t),e},[]),i=a[t-1];0<t?e.facetFilters=r.concat(i.attribute+":"+i.value):0<r.length?e.facetFilters=r:delete e.facetFilters,u.push({indexName:c,params:e})})}),u},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(l._getHitsHierarchicalFacetsAttributes(e)).sort(),r=l._getFacetFilters(e),n=l._getNumericFilters(e),i=l._getTagFilters(e),a={};return 0<t.length&&(a.facets=-1<t.indexOf("*")?["*"]:t),0<i.length&&(a.tagFilters=i),0<r.length&&(a.facetFilters=r),0<n.length&&(a.numericFilters=n),ae(Z({},e.getQueryParams(),a))},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=l._getFacetFilters(e,t,r),i=l._getNumericFilters(e,t),a=l._getTagFilters(e),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1},a=(0<a.length&&(o.tagFilters=a),e.getHierarchicalFacetByName(t));return o.facets=a?l._getDisjunctiveHierarchicalFacetAttribute(e,a,r):t,0<i.length&&(o.numericFilters=i),0<n.length&&(o.facetFilters=n),ae(Z({},e.getQueryParams(),o))},_getNumericFilters:function(e,i){var a;return e.numericFilters||(a=[],Object.keys(e.numericRefinements).forEach(function(n){var t=e.numericRefinements[n]||{};Object.keys(t).forEach(function(r){var e=t[r]||[];i!==n&&e.forEach(function(e){var t;Array.isArray(e)?(t=e.map(function(e){return n+r+e}),a.push(t)):a.push(n+r+e)})})}),a)},_getTagFilters:function(e){return e.tagFilters||e.tagRefinements.join(",")},_getFacetFilters:function(o,c,s){var u=[],e=o.facetsRefinements||{},r=(Object.keys(e).sort().forEach(function(t){(e[t]||[]).slice().sort().forEach(function(e){u.push(t+":"+e)})}),o.facetsExcludes||{}),n=(Object.keys(r).sort().forEach(function(t){(r[t]||[]).sort().forEach(function(e){u.push(t+":-"+e)})}),o.disjunctiveFacetsRefinements||{}),l=(Object.keys(n).sort().forEach(function(t){var r,e=n[t]||[];t!==c&&e&&0!==e.length&&(r=[],e.slice().sort().forEach(function(e){r.push(t+":"+e)}),u.push(r))}),o.hierarchicalFacetsRefinements||{});return Object.keys(l).sort().forEach(function(e){var t=(l[e]||[])[0];if(void 0!==t){var r,n=o.getHierarchicalFacetByName(e),i=o._getHierarchicalFacetSeparator(n),a=o._getHierarchicalRootPath(n);if(c===e){if(-1===t.indexOf(i)||!a&&!0===s||a&&a.split(i).length===t.split(i).length)return;t=a?(r=a.split(i).length-1,a):(r=t.split(i).length-2,t.slice(0,t.lastIndexOf(i)))}else r=t.split(i).length-1;(e=n.attributes[r])&&u.push([e+":"+t])}}),u},_getHitsHierarchicalFacetsAttributes:function(i){return i.hierarchicalFacets.reduce(function(e,t){var r,n=i.getHierarchicalRefinement(t.name)[0];return n?(r=i._getHierarchicalFacetSeparator(t),n=n.split(r).length,r=t.attributes.slice(0,n+1),e.concat(r)):(e.push(t.attributes[0]),e)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n,i=e._getHierarchicalFacetSeparator(t);return!0===r?(r=0,(n=e._getHierarchicalRootPath(t))&&(r=n.split(i).length),[t.attributes[r]]):(n=(e.getHierarchicalRefinement(t.name)[0]||"").split(i).length-1,t.attributes.slice(0,1+n))},getSearchForFacetQuery:function(e,t,r,n){n=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,t={facetQuery:t,facetName:e};return"number"==typeof r&&(t.maxFacetHits=r),ae(Z({},l._getHitsSearchParams(n),t))}},ce=l,p=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]};var se=function(r,n){return r.filter(function(e,t){return-1<n.indexOf(e)&&r.indexOf(e)===t})};var ue=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")},le={addRefinement:function(e,t,r){var n;return le.isRefined(e,t,r)?e:(r=""+r,r=e[t]?e[t].concat(r):[r],(n={})[t]=r,oe({},n,e))},removeRefinement:function(e,r,t){var n;return void 0===t?le.clearRefinement(e,function(e,t){return r===t}):(n=""+t,le.clearRefinement(e,function(e,t){return r===t&&n===e}))},toggleRefinement:function(e,t,r){if(void 0===r)throw new Error("toggleRefinement should be used with a value");return le.isRefined(e,t,r)?le.removeRefinement(e,t,r):le.addRefinement(e,t,r)},clearRefinement:function(i,a,o){var c,e;return void 0===a?Y(i)?{}:i:"string"==typeof a?ee(i,[a]):"function"==typeof a?(c=!1,e=Object.keys(i).reduce(function(e,t){var r=i[t]||[],n=r.filter(function(e){return!a(e,t,o)});return n.length!==r.length&&(c=!0),e[t]=n,e},{}),c?e:i):void 0},isRefined:function(e,t,r){var n=Boolean(e[t])&&0<e[t].length;return void 0!==r&&n?-1!==e[t].indexOf(""+r):n}},n=le;function fe(e,r){return Array.isArray(e)&&Array.isArray(r)?e.length===r.length&&e.every(function(e,t){return fe(r[t],e)}):e===r}function o(e){var n=e?o._parseNumbers(e):{},i=(void 0===n.userToken||null!==(e=n.userToken)&&/^[a-zA-Z0-9_-]{1,64}$/.test(e)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=n.facets||[],this.disjunctiveFacets=n.disjunctiveFacets||[],this.hierarchicalFacets=n.hierarchicalFacets||[],this.facetsRefinements=n.facetsRefinements||{},this.facetsExcludes=n.facetsExcludes||{},this.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements||{},this.numericRefinements=n.numericRefinements||{},this.tagRefinements=n.tagRefinements||[],this.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements||{},this);Object.keys(n).forEach(function(e){var t=-1!==o.PARAMETERS.indexOf(e),r=void 0!==n[e];!t&&r&&(i[e]=n[e])})}o.PARAMETERS=Object.keys(new o),o._parseNumbers=function(i){var n,a;return i instanceof o?i:(n={},["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach(function(e){var t,r=i[e];"string"==typeof r&&(t=parseFloat(r),n[e]=isNaN(t)?r:t)}),Array.isArray(i.insideBoundingBox)&&(n.insideBoundingBox=i.insideBoundingBox.map(function(e){return Array.isArray(e)?e.map(function(e){return parseFloat(e)}):e})),i.numericRefinements&&(a={},Object.keys(i.numericRefinements).forEach(function(r){var n=i.numericRefinements[r]||{};a[r]={},Object.keys(n).forEach(function(e){var t=n[e].map(function(e){return Array.isArray(e)?e.map(function(e){return"string"==typeof e?parseFloat(e):e}):"string"==typeof e?parseFloat(e):e});a[r][e]=t})}),n.numericRefinements=a),Z(i,n))},o.make=function(e){var r=new o(e);return(e.hierarchicalFacets||[]).forEach(function(e){var t;e.rootPath&&0===(t=(r=0<(t=r.getHierarchicalRefinement(e.name)).length&&0!==t[0].indexOf(e.rootPath)?r.clearRefinements(e.name):r).getHierarchicalRefinement(e.name)).length&&(r=r.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}),r},o.validate=function(e,t){t=t||{};return e.tagFilters&&t.tagRefinements&&0<t.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&t.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&t.numericRefinements&&Y(t.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):Y(e.numericRefinements)&&t.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},o.prototype={constructor:o,clearRefinements:function(e){e={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:n.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:n.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:n.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:n.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return e.numericRefinements===this.numericRefinements&&e.facetsRefinements===this.facetsRefinements&&e.facetsExcludes===this.facetsExcludes&&e.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&e.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(e)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,r){var n,r=ue(r);return this.isNumericRefined(e,t,r)?this:((n=Z({},this.numericRefinements))[e]=Z({},n[e]),n[e][t]?(n[e][t]=n[e][t].slice(),n[e][t].push(r)):n[e][t]=[r],this.setQueryParameters({numericRefinements:n}))},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(r,n,e){var i=e;return void 0!==i?this.isNumericRefined(r,n,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n&&fe(e.val,ue(i))})}):this:void 0!==n?this.isNumericRefined(r,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n})}):this:this.isNumericRefined(r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(o){var c,t,e;return void 0===o?Y(this.numericRefinements)?{}:this.numericRefinements:"string"==typeof o?ee(this.numericRefinements,[o]):"function"==typeof o?(c=!1,t=this.numericRefinements,e=Object.keys(t).reduce(function(e,n){var i=t[n],a={},i=i||{};return Object.keys(i).forEach(function(t){var e=i[t]||[],r=[];e.forEach(function(e){o({val:e,op:t},n,"numeric")||r.push(e)}),r.length!==e.length&&(c=!0),a[t]=r}),e[n]=a,e},{}),c?e:this.numericRefinements):void 0},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:n.addRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:n.addRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:n.addRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},addTagRefinement:function(e){return this.isTagRefined(e)?this:(e={tagRefinements:this.tagRefinements.concat(e)},this.setQueryParameters(e))},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:n.removeRefinement(this.facetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:n.removeRefinement(this.facetsExcludes,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:n.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},removeTagRefinement:function(t){var e;return this.isTagRefined(t)?(e={tagRefinements:this.tagRefinements.filter(function(e){return e!==t})},this.setQueryParameters(e)):this},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsRefinements:n.toggleRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleExcludeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsExcludes:n.toggleRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return this.setQueryParameters({disjunctiveFacetsRefinements:n.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},toggleHierarchicalFacetRefinement:function(e,t){var r,n;if(this.isHierarchicalFacet(e))return r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n={},void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+r))?-1===t.indexOf(r)?n[e]=[]:n[e]=[t.slice(0,t.lastIndexOf(r))]:n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:oe({},n,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration")},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var r;if(this.isHierarchicalFacet(e))return(r={})[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:oe({},r,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.")},removeHierarchicalFacetRefinement:function(e){var t;return this.isHierarchicalFacetRefined(e)?((t={})[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:oe({},t,this.hierarchicalFacetsRefinements)})):this},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<this.disjunctiveFacets.indexOf(e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<this.facets.indexOf(e)},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&n.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){return!!this.isHierarchicalFacet(e)&&(e=this.getHierarchicalRefinement(e),t?-1!==e.indexOf(t):0<e.length)},isNumericRefined:function(e,t,r){var n,i;return void 0===r&&void 0===t?Boolean(this.numericRefinements[e]):(n=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t],void 0!==r&&n?(r=ue(r),t=void 0!==(e=this.numericRefinements[e][t],i=r,p(e,function(e){return fe(e,i)})),n&&t):n)},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var t=this,e=se(Object.keys(this.numericRefinements).filter(function(e){return 0<Object.keys(t.numericRefinements[e]).length}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(e){return 0<t.disjunctiveFacetsRefinements[e].length}).concat(e).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return se(this.hierarchicalFacets.map(function(e){return e.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(e){return 0<t.hierarchicalFacetsRefinements[e].length})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return-1===t.indexOf(e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var r=this.managedParameters,n={},i=this;return Object.keys(this).forEach(function(e){var t=i[e];-1===r.indexOf(e)&&void 0!==t&&(n[e]=t)}),n},setQueryParameter:function(e,t){var r;return this[e]===t?this:((r={})[e]=t,this.setQueryParameters(r))},setQueryParameters:function(e){if(!e)return this;var t=o.validate(this,e);if(t)throw t;var r=this,i=o._parseNumbers(e),t=Object.keys(this).reduce(function(e,t){return e[t]=r[t],e},{}),e=Object.keys(i).reduce(function(e,t){var r=void 0!==e[t],n=void 0!==i[t];return r&&!n?ee(e,[t]):(n&&(e[t]=i[t]),e)},t);return new this.constructor(e)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(t){return p(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(e){var t;return this.isHierarchicalFacet(e)&&(t=this.getHierarchicalRefinement(e)[0])?(e=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),t.split(e).map(function(e){return e.trim()})):[]},toString:function(){return JSON.stringify(this,null,2)}};function he(e){return Array.isArray(e)?e.filter(Boolean):[]}function de(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function me(e,t){var n=(t||[]).map(function(e){return e.split(":")});return e.reduce(function(e,t){var r=t.split(":"),t=p(n,function(e){return e[0]===r[0]});return 1<r.length||!t?(e[0].push(r[0]),e[1].push(r[1])):(e[0].push(t[0]),e[1].push(t[1])),e},[[],[]])}var pe=o;var ge=function(e,r,i){return Array.isArray(e)?(Array.isArray(i)||(i=[]),(e=e.map(function(t,e){return{criteria:r.map(function(e){return t[e]}),index:e,value:t}})).sort(function(e,t){for(var r=-1;++r<e.criteria.length;){var n=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=void 0!==t,a=null===t;if(!a&&t<e||n&&i||!r)return 1;if(!n&&e<t||a&&r||!i)return-1}return 0}(e.criteria[r],t.criteria[r]);if(n)return!(r>=i.length)&&"desc"===i[r]?-n:n}return e.index-t.index}),e.map(function(e){return e.value})):[]},ye=function(m){return function(e,t){function r(e,o,t){var r,c=e;if(0<t){var n=0;for(c=e;n<t;){var i=c&&Array.isArray(c.data)?c.data:[],c=p(i,function(e){return e.isRefined});n++}}return c&&(r=Object.keys(o.data).map(function(e){return[e,o.data[e]]}).filter(function(e){var t,r,n,i,a,e=e[0];return e=e,t=c.path||u,r=f,n=s,a=l,(!(i=u)||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(n)||i&&e.split(n).length-i.split(n).length==1||-1===e.indexOf(n)&&-1===r.indexOf(n)||0===r.indexOf(e)||0===e.indexOf(t+n)&&(a||0===e.indexOf(r)))}),c.data=ge(r.map(function(e){var t,r,n,i,a=e[0],e=e[1];return e=e,a=a,t=s,r=be(f),n=o.exhaustive,{name:(i=a.split(t))[i.length-1].trim(),path:a,escapedValue:ve(a),count:e,isRefined:r===a||0===r.indexOf(a+t),exhaustive:n,data:null}}),a[0],a[1])),e}var a,s,u,l,f,n=m.hierarchicalFacets[t],i=m.hierarchicalFacetsRefinements[n.name]&&m.hierarchicalFacetsRefinements[n.name][0]||"",o=m._getHierarchicalFacetSeparator(n),c=m._getHierarchicalRootPath(n),h=m._getHierarchicalShowParentLevel(n),n=me(m._getHierarchicalFacetSortBy(n)),d=e.every(function(e){return e.exhaustive}),n=(a=n,s=o,l=h,f=i,e);return(n=(u=c)?e.slice(c.split(o).length):n).reduce(r,{name:m.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:d,data:null})}},ve=t,be=X;var Se=t,Oe=X;function je(e){var r={};return e.forEach(function(e,t){r[e]=t}),r}function we(e,t,r){t&&t[r]&&(e.stats=t[r])}function Pe(l,t,e){var c=t[0]||{},f=(this._rawResults=t,this),r=(Object.keys(c).forEach(function(e){f[e]=c[e]}),Z({persistHierarchicalRootCount:!1},e)),e=(Object.keys(r).forEach(function(e){f[e]=r[e]}),this.processingTimeMS=t.reduce(function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=l.hierarchicalFacets.map(function(){return[]}),this.facets=[],l.getRefinedDisjunctiveFacets()),s=je(l.facets),u=je(l.disjunctiveFacets),n=1,h=c.facets||{};Object.keys(h).forEach(function(e){var t,r,n,i,a=h[e],o=(n=l.hierarchicalFacets,t=e,p(n,function(e){return-1<(e.attributes||[]).indexOf(t)}));o?(n=o.attributes.indexOf(e),r=de(l.hierarchicalFacets,function(e){return e.name===o.name}),f.hierarchicalFacets[r][n]={attribute:e,data:a,exhaustive:c.exhaustiveFacetsCount}):(r=-1!==l.disjunctiveFacets.indexOf(e),n=-1!==l.facets.indexOf(e),r&&(i=u[e],f.disjunctiveFacets[i]={name:e,data:a,exhaustive:c.exhaustiveFacetsCount},we(f.disjunctiveFacets[i],c.facets_stats,e)),n&&(i=s[e],f.facets[i]={name:e,data:a,exhaustive:c.exhaustiveFacetsCount},we(f.facets[i],c.facets_stats,e)))}),this.hierarchicalFacets=he(this.hierarchicalFacets),e.forEach(function(e){var i=t[n],a=i&&i.facets?i.facets:{},o=l.getHierarchicalFacetByName(e);Object.keys(a).forEach(function(t){var r,e,n=a[t];o?(r=de(l.hierarchicalFacets,function(e){return e.name===o.name}),-1!==(e=de(f.hierarchicalFacets[r],function(e){return e.attribute===t}))&&(f.hierarchicalFacets[r][e].data=Z({},f.hierarchicalFacets[r][e].data,n))):(r=u[t],e=c.facets&&c.facets[t]||{},f.disjunctiveFacets[r]={name:t,data:oe({},n,e),exhaustive:i.exhaustiveFacetsCount},we(f.disjunctiveFacets[r],i.facets_stats,t),l.disjunctiveFacetsRefinements[t]&&l.disjunctiveFacetsRefinements[t].forEach(function(e){!f.disjunctiveFacets[r].data[e]&&-1<l.disjunctiveFacetsRefinements[t].indexOf(Oe(e))&&(f.disjunctiveFacets[r].data[e]=0)}))}),n++}),l.getRefinedHierarchicalFacets().forEach(function(e){var c=l.getHierarchicalFacetByName(e),s=l._getHierarchicalFacetSeparator(c),u=l.getHierarchicalRefinement(e);0===u.length||u[0].split(s).length<2||t.slice(n).forEach(function(e){var o=e&&e.facets?e.facets:{};Object.keys(o).forEach(function(t){var e,r,n=o[t],i=de(l.hierarchicalFacets,function(e){return e.name===c.name}),a=de(f.hierarchicalFacets[i],function(e){return e.attribute===t});-1!==a&&(e={},0<u.length&&!f.persistHierarchicalRootCount&&(e[r=u[0].split(s)[0]]=f.hierarchicalFacets[i][a].data[r]),f.hierarchicalFacets[i][a].data=oe(e,n,f.hierarchicalFacets[i][a].data))}),n++})}),Object.keys(l.facetsExcludes).forEach(function(t){var e=l.facetsExcludes[t],r=s[t];f.facets[r]={name:t,data:h[t],exhaustive:c.exhaustiveFacetsCount},e.forEach(function(e){f.facets[r]=f.facets[r]||{name:t},f.facets[r].data=f.facets[r].data||{},f.facets[r].data[e]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(ye(l)),this.facets=he(this.facets),this.disjunctiveFacets=he(this.disjunctiveFacets),this._state=l}function Re(r,n){function e(e){return e.name===n}var i,a,t,o,c,s;return r._state.isConjunctiveFacet(n)?(i=p(r.facets,e))?Object.keys(i.data).map(function(e){var t=Se(e);return{name:e,escapedValue:t,count:i.data[e],isRefined:r._state.isFacetRefined(n,t),isExcluded:r._state.isExcludeRefined(n,e)}}):[]:r._state.isDisjunctiveFacet(n)?(a=p(r.disjunctiveFacets,e))?Object.keys(a.data).map(function(e){var t=Se(e);return{name:e,escapedValue:t,count:a.data[e],isRefined:r._state.isDisjunctiveFacetRefined(n,t)}}):[]:r._state.isHierarchicalFacet(n)?((t=p(r.hierarchicalFacets,e))&&(s=r._state.getHierarchicalFacetByName(n),o=r._state._getHierarchicalFacetSeparator(s),(s=(c=0===(c=Oe(r._state.getHierarchicalRefinement(n)[0]||"")).indexOf(s.rootPath)?c.replace(s.rootPath+o,""):c).split(o)).unshift(n),function t(e,r,n){e.isRefined=e.name===(r[n]&&r[n].trim());e.data&&e.data.forEach(function(e){t(e,r,n+1)})}(t,s,0)),t):void 0}function Ee(e,t){e=p(e,function(e){return e.name===t});return e&&e.stats}function Fe(e,t,r,n,i){var i=p(i,function(e){return e.name===r}),a=i&&i.data&&i.data[n]?i.data[n]:0,i=i&&i.exhaustive||!1;return{type:t,attributeName:r,name:n,count:a,exhaustive:i}}Pe.prototype.getFacetByName=function(t){function e(e){return e.name===t}return p(this.facets,e)||p(this.disjunctiveFacets,e)||p(this.hierarchicalFacets,e)},Pe.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],Pe.prototype.getFacetValues=function(e,t){var c,s,r=Re(this,e);if(r)return c=oe({},t,{sortBy:Pe.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),s=this,function t(r,e,n,i){var a;return i=i||0,Array.isArray(e)?r(e,n[i]):e.data&&0!==e.data.length?(a=e.data.map(function(e){return t(r,e,n,i+1)}),a=r(a,n[i]),oe({data:a},e)):e}(function(e,t){if(c.facetOrdering){t=t;r=(r=s).renderingContent&&r.renderingContent.facetOrdering&&r.renderingContent.facetOrdering.values&&r.renderingContent.facetOrdering.values[t];if(r)return t=e,n=[],i=[],a=(r=r).hide||[],o=(r.order||[]).reduce(function(e,t,r){return e[t]=r,e},{}),t.forEach(function(e){var t=e.path||e.name,r=-1<a.indexOf(t);r||void 0===o[t]?r||i.push(e):n[o[t]]=e}),n=n.filter(function(e){return e}),"hidden"===(t=r.sortRemainingBy)?n:n.concat(ge(i,(r="alpha"===t?[["path","name"],["asc","asc"]]:[["count"],["desc"]])[0],r[1]))}var n,i,a,o,r;if(Array.isArray(c.sortBy))return t=me(c.sortBy,Pe.DEFAULT_SORT),ge(e,t[0],t[1]);if("function"==typeof c.sortBy)return r=c.sortBy,e.sort(r);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,Array.isArray(r)?[e]:s._state.getHierarchicalFacetByName(r.name).attributes)},Pe.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?Ee(this.facets,e):this._state.isDisjunctiveFacet(e)?Ee(this.disjunctiveFacets,e):void 0},Pe.prototype.getRefinements=function(){var o=this._state,c=this,s=[];return Object.keys(o.facetsRefinements).forEach(function(t){o.facetsRefinements[t].forEach(function(e){s.push(Fe(0,"facet",t,e,c.facets))})}),Object.keys(o.facetsExcludes).forEach(function(t){o.facetsExcludes[t].forEach(function(e){s.push(Fe(0,"exclude",t,e,c.facets))})}),Object.keys(o.disjunctiveFacetsRefinements).forEach(function(t){o.disjunctiveFacetsRefinements[t].forEach(function(e){s.push(Fe(0,"disjunctive",t,e,c.disjunctiveFacets))})}),Object.keys(o.hierarchicalFacetsRefinements).forEach(function(a){o.hierarchicalFacetsRefinements[a].forEach(function(e){var t,r,n,i;s.push((t=o,r=a,e=e,n=c.hierarchicalFacets,i=t.getHierarchicalFacetByName(r),t=t._getHierarchicalFacetSeparator(i),i=e.split(t),e=p(n,function(e){return e.name===r}),t=i.reduce(function(e,t){var r=e&&p(e.data,function(e){return e.name===t});return void 0!==r?r:e},e),n=t&&t.count||0,i=t&&t.exhaustive||!1,e=t&&t.path||"",{type:"hierarchical",attributeName:r,name:e,count:n,exhaustive:i}))})}),Object.keys(o.numericRefinements).forEach(function(r){var e=o.numericRefinements[r];Object.keys(e).forEach(function(t){e[t].forEach(function(e){s.push({type:"numeric",attributeName:r,name:e,numericValue:e,operator:t})})})}),o.tagRefinements.forEach(function(e){s.push({type:"tag",attributeName:"_tags",name:e})}),s};var xe=Pe;var Ie=function(n){var t,r,i,a={};return n.forEach(function(e){e.forEach(function(e,t){a[e.objectID]?a[e.objectID]={indexSum:a[e.objectID].indexSum+t,count:a[e.objectID].count+1}:a[e.objectID]={indexSum:t,count:1}})}),t=a,r=n.length,i=[],Object.keys(t).forEach(function(e){t[e].count<2&&(t[e].indexSum+=100),i.push({objectID:e,avgOfIndices:t[e].indexSum/r})}),i.sort(function(e,t){return e.avgOfIndices>t.avgOfIndices?1:-1}).reduce(function(e,t){var r=p(n.reduce(function(e,t){return e.concat(t)},[]),function(e){return e.objectID===t.objectID});return r?e.concat(r):e},[])},X="3.22.5",_e=t;function i(e,t,r,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.22.5)"),this.setClient(e);e=r||{};e.index=t,this.state=pe.make(e),this.recommendState=new re({params:e.recommendState}),this.lastResults=null,this.lastRecommendResults=null,this._queryId=0,this._recommendQueryId=0,this._lastQueryIdReceived=-1,this._lastRecommendQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0,this._currentNbRecommendQueries=0,this._searchResultsOptions=n,this._recommendCache={}}function Te(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function Ae(){return this.state.page}V(i,U),i.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},i.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},i.prototype.recommend=function(){return this._recommend(),this},i.prototype.getQuery=function(){var e=this.state;return ce._getHitsSearchParams(e)},i.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,e=ce._getQueries(r.index,r),n=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),!t)return this.client.search(e).then(function(e){return n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),{content:new xe(r,e.results),state:r,_originalResponse:e}},function(e){throw n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),e});this.client.search(e).then(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(null,new xe(r,e.results),r)}).catch(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(e,null,r)})},i.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var r=r.getModifiedState(t),t=Z({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:ee(ce._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),n="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(n);var i=this.client.initIndex(r.index);if("function"!=typeof i.findAnswers)throw new Error(n);return i.findAnswers(r.query,e.queryLanguages,t)},i.prototype.searchForFacetValues=function(t,e,r,n){var i,a,o,c="function"==typeof this.client.searchForFacetValues&&"function"!=typeof this.client.searchForFacets,s="function"==typeof this.client.initIndex;if(c||s||"function"==typeof this.client.search)return i=this.state.setQueryParameters(n||{}),a=i.isDisjunctiveFacet(t),n=ce.getSearchForFacetQuery(t,e,r,i),this._currentNbQueries++,o=this,r=c?this.client.searchForFacetValues([{indexName:i.index,params:n}]):s?this.client.initIndex(i.index).searchForFacetValues(n):(delete n.facetName,this.client.search([{type:"facet",facet:t,indexName:i.index,params:n}]).then(function(e){return e.results[0]})),this.emit("searchForFacetValues",{state:i,facet:t,query:e}),r.then(function(e){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits.forEach(function(e){e.escapedValue=_e(e.value),e.isRefined=a?i.isDisjunctiveFacetRefined(t,e.escapedValue):i.isFacetRefined(t,e.escapedValue)}),e},function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e});throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues")},i.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},i.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},i.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},i.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},i.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this},i.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},i.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},i.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},i.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},i.prototype.addFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.addFrequentlyBoughtTogether(e)}),this},i.prototype.addRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.addRelatedProducts(e)}),this},i.prototype.addTrendingItems=function(e){return this._recommendChange({state:this.recommendState.addTrendingItems(e)}),this},i.prototype.addTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.addTrendingFacets(e)}),this},i.prototype.addLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.addLookingSimilar(e)}),this},i.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this},i.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},i.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},i.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},i.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},i.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},i.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},i.prototype.removeFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.removeRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.removeTrendingItems=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.removeTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.removeLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},i.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},i.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},i.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},i.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},i.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},i.prototype.setCurrentPage=Te,i.prototype.setPage=Te,i.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},i.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},i.prototype.setState=function(e){return this._change({state:pe.make(e),isPageReset:!1}),this},i.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new pe(e),this},i.prototype.hasRefinements=function(e){return!!Y(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},i.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},i.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},i.prototype.hasTag=function(e){return this.state.isTagRefined(e)},i.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},i.prototype.getIndex=function(){return this.state.index},i.prototype.getCurrentPage=Ae,i.prototype.getPage=Ae,i.prototype.getTags=function(){return this.state.tagRefinements},i.prototype.getRefinements=function(e){var r=[],n=(this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"conjunctive"})}),this.state.getExcludeRefinements(e).forEach(function(e){r.push({value:e,type:"exclude"})})):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"disjunctive"})}),this.state.getNumericRefinements(e));return Object.keys(n).forEach(function(e){var t=n[e];r.push({value:t,operator:e,type:"numeric"})}),r},i.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},i.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},i.prototype._search=function(e){var n=this.state,i=[],t=[],e=(e.onlyWithDerivedHelpers||(t=ce._getQueries(n.index,n),i.push({state:n,queriesCount:t.length,helper:this}),this.emit("search",{state:n,results:this.lastResults})),this.derivedHelpers.map(function(e){var t=e.getModifiedState(n),r=t.index?ce._getQueries(t.index,t):[];return i.push({state:t,queriesCount:r.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),r})),t=Array.prototype.concat.apply(t,e),e=this._queryId++;if(this._currentNbQueries++,!t.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,i,e));try{this.client.search(t).then(this._dispatchAlgoliaResponse.bind(this,i,e)).catch(this._dispatchAlgoliaError.bind(this,e))}catch(e){this.emit("error",{error:e})}},i.prototype._recommend=function(){var n=this.state,e=this.recommendState,t=this.getIndex(),i=[{state:e,index:t,helper:this}],a=e.params.map(function(e){return e.$$id}),o=(this.emit("fetch",{recommend:{state:e,results:this.lastRecommendResults}}),this._recommendCache),e=this.derivedHelpers.map(function(e){var t,r=e.getModifiedState(n).index;return r?(t=e.getModifiedRecommendState(new re),i.push({state:t,index:r,helper:e}),a=Array.prototype.concat.apply(a,t.params.map(function(e){return e.$$id})),e.emit("fetch",{recommend:{state:t,results:e.lastRecommendResults}}),t._buildQueries(r,o)):[]}),t=Array.prototype.concat.apply(this.recommendState._buildQueries(t,o),e);if(0!==t.length)if(0<t.length&&void 0===this.client.getRecommendations)console.warn("Please update algoliasearch/lite to the latest version in order to use recommend widgets.");else{e=this._recommendQueryId++;this._currentNbRecommendQueries++;try{this.client.getRecommendations(t).then(this._dispatchRecommendResponse.bind(this,e,i,a)).catch(this._dispatchRecommendError.bind(this,e))}catch(e){this.emit("error",{error:e})}}},i.prototype._dispatchAlgoliaResponse=function(e,t,r){var n,i=this;t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty"),n=r.results.slice(),e.forEach(function(e){var t=e.state,r=e.queriesCount,e=e.helper,r=n.splice(0,r);t.index?(e.lastResults=new xe(t,r,i._searchResultsOptions),e.emit("result",{results:e.lastResults,state:t})):e.emit("result",{results:null,state:t})}))},i.prototype._dispatchRecommendResponse=function(e,t,r,n){var i,a,o;e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,0===this._currentNbRecommendQueries&&this.emit("recommendQueueEmpty"),i=this._recommendCache,a={},r.filter(function(e){return void 0===i[e]}).forEach(function(e,t){a[e]||(a[e]=[]),a[e].push(t)}),Object.keys(a).forEach(function(e){var t=a[e],r=n.results[t[0]];1===t.length?i[e]=r:i[e]=Object.assign({},r,{hits:Ie(t.map(function(e){return n.results[e].hits}))})}),o={},r.forEach(function(e){o[e]=i[e]}),t.forEach(function(e){var t=e.state,r=e.helper;e.index?(r.lastRecommendResults=new ie(t,o),r.emit("recommend:result",{recommend:{results:r.lastRecommendResults,state:t}})):r.emit("recommend:result",{results:null,state:t})}))},i.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},i.prototype._dispatchRecommendError=function(e,t){e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbRecommendQueries&&this.emit("recommendQueueEmpty"))},i.prototype.containsRefinement=function(e,t,r,n){return e||0!==t.length||0!==r.length||0!==n.length},i.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},i.prototype._change=function(e){var t=e.state,e=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:e}))},i.prototype._recommendChange=function(e){e=e.state;e!==this.recommendState&&(this.recommendState=e,this.emit("recommend:change",{search:{results:this.lastResults,state:this.state},recommend:{results:this.lastRecommendResults,state:this.recommendState}}))},i.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},i.prototype.setClient=function(e){return this.client!==e&&("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.22.5)"),this.client=e),this},i.prototype.getClient=function(){return this.client},i.prototype.derive=function(e,t){e=new z(this,e,t);return this.derivedHelpers.push(e),e},i.prototype.detachDerivedHelper=function(e){e=this.derivedHelpers.indexOf(e);if(-1===e)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)},i.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var De=i;function ke(e,t,r,n){return new De(e,t,r,n)}ke.version=X,ke.AlgoliaSearchHelper=De,ke.SearchParameters=pe,ke.RecommendParameters=re,ke.SearchResults=xe,ke.RecommendResults=ie;var y=ke,Ne=0;function We(){Ne=0}t=("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}).performance||{};t.now||t.mozNow||t.msNow||t.oNow||t.webkitNow;function S(){}function Ce(e){return Object.prototype.toString.call(e).slice(8,-1)}function d(e,t){if(void 0===e||"function"!=typeof e)throw new Error("The render function is not valid (received type ".concat(Ce(e),").\n\n").concat(t))}function He(e){var t=e.helper,e=e.attributesToClear,e=void 0===e?[]:e,r=t.state.setPage(0),r=e.reduce(function(e,t){return r.isNumericRefined(t)?e.removeNumericRefinement(t):r.isHierarchicalFacet(t)?e.removeHierarchicalFacetRefinement(t):r.isDisjunctiveFacet(t)?e.removeDisjunctiveFacetRefinement(t):r.isConjunctiveFacet(t)?e.removeFacetRefinement(t):e},r);return r=-1!==e.indexOf("query")?r.setQuery(""):r}var Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$e=/[&<>"']/g,Le=RegExp($e.source);var Ue={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qe=/&(amp|quot|lt|gt|#39);/g,Be=RegExp(Qe.source);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e){if("object"===qe(t=e)&&null!==t&&"[object Object]"===(null===(t=e)?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t))){var t;if(null===Object.getPrototypeOf(e))return 1;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}}function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(){return(ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ke(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(r),!0).forEach(function(e){Ge(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ge(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Je(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Je(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},u={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function Ze(e){return((e=e)&&Le.test(e)?e.replace($e,function(e){return Me[e]}):e).replace(new RegExp(_.highlightPreTag,"g"),u.highlightPreTag).replace(new RegExp(_.highlightPostTag,"g"),u.highlightPostTag)}function Ye(r){return Ve(r)&&"string"!=typeof r.value?Object.keys(r).reduce(function(e,t){return Ke(Ke({},e),{},Ge({},t,Ye(r[t])))},{}):Array.isArray(r)?r.map(Ye):Ke(Ke({},r),{},{value:Ze(r.value)})}function et(e){return void 0===e.__escaped&&((e=e.map(function(e){e=ze({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return e._highlightResult&&(e._highlightResult=Ye(e._highlightResult)),e._snippetResult&&(e._snippetResult=Ye(e._snippetResult)),e})).__escaped=!0),e}function tt(e){var t=u.highlightPreTag,r=u.highlightPostTag;return e.map(function(e){return e.isHighlighted?t+e.value+r:e.value}).join("")}function rt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function nt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==it(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===it(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):rt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?ot(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ct(e){var h=e.instantSearchInstance,d=e.helper,m=e.attribute,p=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,a,o=t[1],c=t[2],c=void 0===c?"Filter Applied":c,s=t[3],s=void 0===s?{}:s,u=at(t[0].split(":"),2),l=u[0],u=u[1],f="string"==typeof m?m:m(o);1===t.length&&"object"===it(t[0])?h.sendEventToInsights(t[0]):"click"===l&&2<=t.length&&t.length<=4&&(i=f,a=o,((n=d).state.isHierarchicalFacet(i)?n.state.isHierarchicalFacetRefined(i,a):n.state.isConjunctiveFacet(i)?n.state.isFacetRefined(i,a):n.state.isDisjunctiveFacetRefined(i,a))||h.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:p,eventType:l,eventModifier:u,payload:nt({eventName:c,index:d.getIndex(),filters:["".concat(f,":").concat(o)]},s),attribute:f}))}}function st(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function ut(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function lt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==dt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===dt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ut(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?ht(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e){var r,n,i,a,o,t,c,s,u=e.getIndex,l=e.widgetType,f=(e.methodName,e.args),e=e.instantSearchInstance;return 1===f.length&&"object"===dt(f[0])?[f[0]]:(t=ft(f[0].split(":"),2),r=t[0],n=t[1],t=f[1],i=f[2],a=f[3]||{},!t||!("click"!==r&&"conversion"!==r||i)||0===(f=Array.isArray(t)?t:[t]).length?[]:(o=f[0].__queryID,t=function(e,t){for(var r=1<arguments.length&&void 0!==t?t:20,n=[],i=0;i<Math.ceil(e.length/r);i++)n.push(e.slice(i*r,(i+1)*r));return n}(f),c=t.map(function(e){return e.map(function(e){return e.objectID})}),s=t.map(function(e){return e.map(function(e){return e.__position})}),"view"===r?"idle"!==e.status?[]:t.map(function(e,t){return{insightsMethod:"viewedObjectIDs",widgetType:l,eventType:r,payload:lt({eventName:i||"Hits Viewed",index:u(),objectIDs:c[t]},a),hits:e,eventModifier:n}}):"click"===r?t.map(function(e,t){return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:l,eventType:r,payload:lt({eventName:i||"Hit Clicked",index:u(),queryID:o,objectIDs:c[t],positions:s[t]},a),hits:e,eventModifier:n}}):"conversion"===r?t.map(function(e,t){return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:l,eventType:r,payload:lt({eventName:i||"Hit Converted",index:u(),queryID:o,objectIDs:c[t]},a),hits:e,eventModifier:n}}):[]))}function pt(e){var n=e.instantSearchInstance,i=e.getIndex,a=e.widgetType,o={},c=void 0;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];mt({widgetType:a,getIndex:i,methodName:"sendEvent",args:t,instantSearchInstance:n}).forEach(function(e){"click"===e.eventType&&"internal"===e.eventModifier&&o[e.eventType]||(o[e.eventType]=!0,n.sendEventToInsights(e))}),clearTimeout(c),c=setTimeout(function(){o={}},0)}}function gt(e){var i=e.getIndex,a=e.widgetType,o=e.instantSearchInstance;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=mt({widgetType:a,getIndex:i,methodName:"bindEvent",args:t,instantSearchInstance:o});return n.length?"data-insights-event=".concat(st(n)):""}}function O(e){return"ais.index"===e.$$type}function yt(t,e){var r=t[e.getIndexId()]||{};e.getHelper().setState(e.getWidgetSearchParameters(e.getHelper().state,{uiState:r})),e.getWidgets().filter(O).forEach(function(e){return yt(t,e)})}var vt=Promise.resolve();function bt(n){function e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];null===i&&(i=vt.then(function(){i=null,a?a=!1:n.apply(void 0,t)}))}var i=null,a=!1;return e.wait=function(){if(null===i)throw new Error("The deferred function should be called before calling `wait()`");return i},e.cancel=function(){null!==i&&(a=!0)},e}function a(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(e){return t=(e=e).name,e=e.connector,["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",void 0!==e&&e?"#connector":""].join("");var t}).join(", ");return function(e){return[e,"See documentation: ".concat(n)].filter(Boolean).join("\n\n")}}function St(e){return"number"==typeof e&&e<0||"string"==typeof e?String(e).replace(/^-/,"\\-"):e}function Ot(e,t){for(var r,n=0;n<e.length;n++)if(t(r=e[n],n,e))return r}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?wt(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wt(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pt=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/;function Rt(e){if(Array.isArray(e)){var t=e,r=jt(t,1)[0],n=(r=jt(void 0===r?[void 0,void 0,void 0,void 0]:r,4))[0],i=r[1],a=r[2],r=r[3];if(n&&i&&a&&r)return{northEast:{lat:n,lng:i},southWest:{lat:a,lng:r}};throw new Error('Invalid value for "insideBoundingBox" parameter: ['.concat(t,"]"))}n=e,a=(i=jt(n.split(",").map(parseFloat),4))[0],r=i[1],t=i[2],i=i[3];if(a&&r&&t&&i)return{northEast:{lat:a,lng:r},southWest:{lat:t,lng:i}};throw new Error('Invalid value for "insideBoundingBox" parameter: "'.concat(n,'"'))}function Et(e){var t=u.highlightPostTag,r=u.highlightPreTag,e=e.split(r),r=e.shift(),n=r?[{value:r,isHighlighted:!1}]:[];return e.forEach(function(e){e=e.split(t);n.push({value:e[0],isHighlighted:!0}),""!==e[1]&&n.push({value:e[1],isHighlighted:!1})}),n}var Ft=new RegExp(/\w/i);function xt(e,t){var r=e[t],n=(null==(n=e[t+1])?void 0:n.isHighlighted)||!0,t=(null==(e=e[t-1])?void 0:e.isHighlighted)||!0;return Ft.test((e=r.value)&&Be.test(e)?e.replace(Qe,function(e){return Ue[e]}):e)||t!==n?r.isHighlighted:t}function It(e,t){return(Array.isArray(t)?t:t.split(".")).reduce(function(e,t){return e&&e[t]},e)}function _t(e,t,r,n,i){var a,i=4<arguments.length&&void 0!==i?i:[],o={type:t,attribute:r,name:n,escapedValue:St(n)},c=Ot(i,function(e){return e.name===r});if("hierarchical"===t){for(var i=e.getHierarchicalFacetByName(r),s=n.split(i.separator),u=0;void 0!==c&&u<s.length;++u)!function(t){var r;c=c&&c.data&&Ot(Object.keys(c.data).map((r=c.data,function(e){return r[e]})),function(e){return e.name===s[t]})}(u);a=c&&c.count}else a=c&&c.data&&c.data[o.name];return void 0!==a&&(o.count=a),c&&void 0!==c.exhaustive&&(o.exhaustive=c.exhaustive),o}function Tt(r,n,e){var e=2<arguments.length&&void 0!==e&&e,i=[],t=n.facetsRefinements,a=void 0===t?{}:t,t=n.facetsExcludes,o=void 0===t?{}:t,t=n.disjunctiveFacetsRefinements,c=void 0===t?{}:t,t=n.hierarchicalFacetsRefinements,s=void 0===t?{}:t,t=n.numericRefinements,u=void 0===t?{}:t,t=n.tagRefinements,t=void 0===t?[]:t;return Object.keys(a).forEach(function(t){a[t].forEach(function(e){i.push(_t(n,"facet",t,e,r.facets))})}),Object.keys(o).forEach(function(t){o[t].forEach(function(e){i.push({type:"exclude",attribute:t,name:e,exclude:!0})})}),Object.keys(c).forEach(function(t){c[t].forEach(function(e){i.push(_t(n,"disjunctive",t,"string"==typeof(e=e)?e.replace(/^\\-/,"-"):e,r.disjunctiveFacets))})}),Object.keys(s).forEach(function(t){s[t].forEach(function(e){i.push(_t(n,"hierarchical",t,e,r.hierarchicalFacets))})}),Object.keys(u).forEach(function(r){var n=u[r];Object.keys(n).forEach(function(e){var t=e,e=n[t];(Array.isArray(e)?e:[e]).forEach(function(e){i.push({type:"numeric",attribute:r,name:"".concat(e),numericValue:e,operator:t})})})}),t.forEach(function(e){i.push({type:"tag",attribute:"_tags",name:e})}),e&&n.query&&n.query.trim()&&i.push({attribute:"query",type:"query",name:n.query,query:n.query}),i}function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function kt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==At(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===At(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Dt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Nt(e,r,n){return e.map(function(e,t){return kt(kt({},e),{},{__position:n*r+t+1})})}function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ht(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Wt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Wt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ct(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Mt(e,t){return t?e.map(function(e){return Ht(Ht({},e),{},{__queryID:t})}):e}function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ut(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==$t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===$t(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Lt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?qt(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Jt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(r),!0).forEach(function(e){zt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function zt(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Qt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Qt(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xt(a,i){var e,o,t;i&&("transporter"in a&&!a._cacheHydrated||a._useCache&&"function"==typeof a.addAlgoliaAgent)&&(e=[Object.keys(i).reduce(function(e,t){var t=i[t],r=t.state,n=t.requestParams,t=t.results,t=t&&r?t.map(function(e,t){return Jt({indexName:r.index||e.index},null!=n&&n[t]||e.params?{params:Kt((null==n?void 0:n[t])||e.params.split("&").reduce(function(e,t){var t=Bt(t.split("="),2),r=t[0],t=t[1];return e[r]=t?decodeURIComponent(t):"",e},{}))}:{})}):[];return e.concat(t)},[])],t=Object.keys(i).reduce(function(e,t){t=i[t].results;return t?e.concat(t):e},[]),"transporter"in a&&!a._cacheHydrated&&(a._cacheHydrated=!0,o=a.search.bind(a),a.search=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=e.map(function(e){return Jt(Jt({},e),{},{params:Kt(e.params)})});return a.transporter.responsesCache.get({method:"search",args:[i].concat(r)},function(){return o.apply(void 0,[e].concat(r))})},a.transporter.responsesCache.set({method:"search",args:e},{results:t})),"transporter"in a||(t="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:e})),a.cache=Jt(Jt({},a.cache),{},zt({},t,JSON.stringify({results:Object.keys(i).map(function(e){return i[e].results})})))))}function Kt(r){return Object.keys(r).map(function(e){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=0;return e.replace(/%s/g,function(){return encodeURIComponent(r[i++])})}("%s=%s",e,(t=r[e],"[object Object]"===Object.prototype.toString.call(t)||"[object Array]"===Object.prototype.toString.call(t)?JSON.stringify(r[e]):r[e]));var t}).join("&")}function Gt(e){return e!==Object(e)}function Zt(e,t){if(e===t)return 1;if(Gt(e)||Gt(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length===Object.keys(t).length){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(!(i in t))return;if(!Zt(e[i],t[i]))return}return 1}}function v(e){return"number"==typeof e&&isFinite(e)}function Yt(e,t){t(e),e.getWidgets().forEach(function(e){O(e)&&Yt(e,t)})}function er(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})}function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var rr=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function nr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function c(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==tr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===tr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):nr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ir(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function ar(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce(function(e,t){var r=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}(e,function(e){return e.name===t.name});return-1===r?e.concat(t):((e=e.slice()).splice(r,1,t),e)},e.hierarchicalFacets)})}var or=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t){r=t;var e=e.setQueryParameters({hierarchicalFacetsRefinements:c(c({},e.hierarchicalFacetsRefinements),r.hierarchicalFacetsRefinements)}),r=ar(e,t),e=t.tagRefinements.reduce(function(e,t){return e.addTagRefinement(t)},r),e=(r=t,e.setQueryParameters({numericRefinements:c(c({},e.numericRefinements),r.numericRefinements)})),e=(r=t,e.setQueryParameters({disjunctiveFacetsRefinements:c(c({},e.disjunctiveFacetsRefinements),r.disjunctiveFacetsRefinements)})),e=(r=t,e.setQueryParameters({facetsExcludes:c(c({},e.facetsExcludes),r.facetsExcludes)})),e=(r=t,e.setQueryParameters({facetsRefinements:c(c({},e.facetsRefinements),r.facetsRefinements)})),r=function(e,t){t=er([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean));return 0<t.length?e.setQueryParameters({ruleContexts:t}):e}(t.disjunctiveFacets.reduce(function(e,t){return e.addDisjunctiveFacet(t)},e),t),e=t.facets.reduce(function(e,t){return e.addFacet(t)},r),r=t;return r.facets,r.disjunctiveFacets,r.facetsRefinements,r.facetsExcludes,r.disjunctiveFacetsRefinements,r.numericRefinements,r.tagRefinements,r.hierarchicalFacets,r.hierarchicalFacetsRefinements,r.ruleContexts,r=ir(r,rr),e.setQueryParameters(r)})};function cr(e){return function(e){if(Array.isArray(e))return sr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?sr(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sr(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ur(e){var t=e.start,r=void 0===t?0:t,t=e.end,e=e.step,e=void 0===e?1:e,n=0===e?1:e,e=Math.round((t-r)/n);return cr(Array(e)).map(function(e,t){return r+t*n})}function lr(e,t,r){var n=t.getHelper();return{uiState:r,helper:n,parent:t,instantSearchInstance:e,state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function fr(e,t,r){var r=t.getResultsForWidget(r),n=t.getHelper();return{helper:n,parent:t,instantSearchInstance:e,results:r,scopedResults:t.getScopedResults(),state:r&&"_state"in r?r._state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function hr(e){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function mr(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?dr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==hr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===hr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):dr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function pr(r){return r.some(function(e){return e.isHighlighted})?r.map(function(e,t){return mr(mr({},e),{},{isHighlighted:!xt(r,t)})}):r.map(function(e){return mr(mr({},e),{},{isHighlighted:!1})})}function gr(e,t){t=(1<arguments.length&&void 0!==t?t:{fallback:function(){}}).fallback;return"undefined"==typeof window?t():e({window:window})}function yr(e){return Array.isArray(e)?e:[e]}function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function br(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?br(Object(r),!0).forEach(function(e){Sr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Sr(e,t,r){return(t=function(e){e=function(e,t){if("object"!==vr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==vr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===vr(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Or=a({name:"configure",connector:!0});function jr(e,t){return e.setQueryParameters(Object.keys(t.searchParameters).reduce(function(e,t){return f(f({},e),{},Sr({},t,void 0))},{}))}var wr=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:S,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return function(n){var t;if(n&&Ve(n.searchParameters))return t={},{$$type:"ais.configure",init:function(e){var t=e.instantSearchInstance;r(f(f({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(f(f({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),jr(e,n)},getRenderState:function(e,t){t=this.getWidgetRenderState(t);return f(f({},e),{},{configure:f(f({},t),{},{widgetParams:f(f({},t.widgetParams),{},{searchParameters:or(new y.SearchParameters(null==(e=e.configure)?void 0:e.widgetParams.searchParameters),new y.SearchParameters(t.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(e){var r,e=e.helper;return t.refine||(t.refine=(r=e,function(e){var t=jr(r.state,n),t=or(t,new y.SearchParameters(e));n.searchParameters=e,r.setState(t).search()})),{refine:t.refine,widgetParams:n}},getWidgetSearchParameters:function(e,t){t=t.uiState;return or(e,new y.SearchParameters(f(f({},t.configure),n.searchParameters)))},getWidgetUiState:function(e){return f(f({},e),{},{configure:f(f({},e.configure),n.searchParameters)})}};throw new Error(Or("The `searchParameters` option expects an object."))}},Pr=Object.prototype.hasOwnProperty;function Rr(e,t,r){if(null!=r&&r(e,t))return!0;var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&Rr(e[i],t[i],r););return-1===i}if(!n||"object"===H(e)){for(n in i=0,e){if(Pr.call(e,n)&&++i&&!Pr.call(t,n))return!1;if(!(n in t&&Rr(e[n],t[n],r)))return!1}return Object.keys(t).length===i}}return e!=e&&t!=t}function Er(e){var t;return new y.SearchResults(e,[{query:null!=(t=e.query)?t:"",page:null!=(t=e.page)?t:0,hitsPerPage:null!=(t=e.hitsPerPage)?t:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:e.index}],{__isArtificial:!0})}function Fr(r){var e=r.getHelper(),n=r.getResults()||Er(e.state),t=r.getScopedResults().map(function(e){var t=e.indexId===r.getIndexId()?n:Er(e.helper.state);return m(m({},e),{},{results:e.results||t})});return{results:n,scopedResults:t,recommendResults:e.lastRecommendResults}}var xr=b.createContext(null);function Ir(e){if(!e)throw new Error("Invariant failed")}function _r(){var e=b.useContext(xr);return Ir(null!==e),e}var Tr=b.createContext(null);function Ar(){var e=b.useContext(Tr);return Ir(null!==e),e}var Dr=b.createContext(null);function kr(){return b.useContext(Dr)}var Nr=b.createContext(null);function Wr(){return b.useContext(Nr)}function Cr(e){var t=$(b.useState(function(){return e}),2),r=t[0],t=t[1];return Rr(r,e)||t(e),r}var Hr=b.use,Mr="undefined"!=typeof window?b.useLayoutEffect:b.useEffect,$r=b.createContext(null);function Lr(){return b.useContext($r)}function Ur(e){var t=e.widget,r=e.parentIndex,n=e.props,i=e.shouldSsr,e=Lr(),a=b.useRef(n),o=(b.useEffect(function(){a.current=n},[n]),b.useRef(t)),c=(b.useEffect(function(){o.current=t},[t]),b.useRef(null)),s=i&&!r.getWidgets().includes(t),u=Ar();Mr(function(){var e=o.current;return c.current?(clearTimeout(c.current),Rr(n,a.current)||(r.removeWidgets([e]),r.addWidgets([t]))):i||r.addWidgets([t]),function(){c.current=setTimeout(function(){u._schedule(function(){u._preventWidgetCleanup||r.removeWidgets([e])})})}},[r,t,i,u,n]),!s&&"pending"!==(null==e||null==(s=e.current)?void 0:s.status)||r.addWidgets([t]),"undefined"==typeof window&&null!=e&&e.current&&"ais.index"!==t.$$type&&(Hr(e.current),"ais.dynamicWidgets"!==t.$$type)&&null!=(s=u.helper)&&s.lastResults&&Hr(e.current)}var Qr=["instantSearchInstance","widgetParams"],Br=["widgetParams"];function h(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=kr(),i=Wr(),a=Ar(),o=_r(),c=Cr(t),s=Cr(r),u=b.useRef(!0),l=b.useRef(null),f=b.useRef(a.status),h=b.useMemo(function(){return m(m({},e(function(e,t){t?u.current=!0:u.current&&(t=e.instantSearchInstance,e.widgetParams,Rr(e=M(e,Qr),l.current,function(e,t){return(null==e?void 0:e.constructor)===Function&&(null==t?void 0:t.constructor)===Function})&&t.status===f.current||(d(e),l.current=e,f.current=t.status))},function(){u.current=!1})(c)),s)},[e,c,s]),t=$(b.useState(function(){var e,t,r,n;return h.getWidgetRenderState?(e=o.getHelper(),t=o.getWidgetUiState({})[o.getIndexId()],e.state=(null==(n=h.getWidgetSearchParameters)?void 0:n.call(h,e.state,{uiState:t}))||e.state,t=(n=Fr(o)).results,r=n.scopedResults,n=n.recommendResults,(n=h.getWidgetRenderState({helper:e,parent:o,instantSearchInstance:a,results:"recommend"===h.dependsOn&&n&&i?n[i.recommendIdx.current++]:t,scopedResults:r,state:e.state,renderState:a.renderState,templatesConfig:a.templatesConfig,createURL:o.createURL,searchMetadata:{isSearchStalled:"stalled"===a.status},status:a.status,error:a.error})).widgetParams,M(n,Br)):{}}),2),r=t[0],d=t[1];return Ur({widget:h,parentIndex:o,props:c,shouldSsr:Boolean(n)}),r}function qr(e,t){return h(wr,{searchParameters:e},t)}function Vr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Jr(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Vr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==zr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===zr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Vr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Xr=a({name:"dynamic-widgets",connector:!0}),Kr=function(u){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(u,Xr()),function(r){var c,e=r.widgets,t=r.maxValuesPerFacet,n=void 0===t?20:t,t=r.facets,i=void 0===t?["*"]:t,t=r.transformItems,a=void 0===t?function(e){return e}:t,s=r.fallbackWidget;if(!(e&&Array.isArray(e)&&e.every(function(e){return"object"===zr(e)})))throw new Error(Xr("The `widgets` option expects an array of widgets."));if(Array.isArray(i))return c=new Map,{$$type:"ais.dynamicWidgets",init:function(r){e.forEach(function(e){var t=function(e,t){var r=null==(r=e.getWidgetRenderState)?void 0:r.call(e,t),t=null;if(r&&r.widgetParams&&((r=r.widgetParams).attribute?t=r.attribute:Array.isArray(r.attributes)&&(t=r.attributes[0])),"string"!=typeof t)throw new Error("Could not find the attribute of the widget:\n\n".concat(JSON.stringify(e),"\n\nPlease check whether the widget's getWidgetRenderState returns widgetParams.attribute correctly."));return t}(e,r);c.set(t,{widget:e,isMounted:!1})}),u(Jr(Jr({},this.getWidgetRenderState(r)),{},{instantSearchInstance:r.instantSearchInstance}),!0)},render:function(e){var t=e.parent,i=this.getWidgetRenderState(e),a=[],o=[];s&&i.attributesToRender.forEach(function(e){var t;c.has(e)||(t=s({attribute:e}),c.set(e,{widget:t,isMounted:!1}))}),c.forEach(function(e,t){var r=e.widget,e=e.isMounted,n=-1<i.attributesToRender.indexOf(t);!e&&n?(o.push(r),c.set(t,{widget:r,isMounted:!0})):e&&!n&&(a.push(r),c.set(t,{widget:r,isMounted:!1}))}),t.addWidgets(o),setTimeout(function(){return t.removeWidgets(a)},0),u(Jr(Jr({},i),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(e){var e=e.parent,r=[];c.forEach(function(e){var t=e.widget;e.isMounted&&r.push(t)}),e.removeWidgets(r),o()},getWidgetSearchParameters:function(e){return i.reduce(function(e,t){return e.addFacet(t)},e.setQueryParameters({maxValuesPerFacet:Math.max(n||0,e.maxValuesPerFacet||0)}))},getRenderState:function(e,t){return Jr(Jr({},e),{},{dynamicWidgets:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results;e.state;if(!t)return{attributesToRender:[],widgetParams:r};e=a(null!=(e=null==(e=t.renderingContent)||null==(e=e.facetOrdering)||null==(e=e.facets)?void 0:e.order)?e:[],{results:t});if(Array.isArray(e))return{attributesToRender:e,widgetParams:r};throw new Error(Xr("The `transformItems` option expects a function that returns an Array."))}};throw new Error(Xr("The `facets` option only accepts an array of facets, you passed ".concat(JSON.stringify(i))))}};function Gr(e,t){return h(Kr,m(m({},e),{},{widgets:[]}),t)}var Zr=["children","fallbackComponent"];function Yr(){return null}function en(e){return"object"===H(e)&&e.props}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var rn=["initialSearchParameters"],nn=["initialRecommendParameters"];function an(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?an(Object(r),!0).forEach(function(e){on(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function on(e,t,r){return(t=function(e){e=function(e,t){if("object"!==tn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===tn(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cn(e){return function(e){if(Array.isArray(e))return sn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?sn(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sn(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function un(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var ln=a({name:"index-widget"});function fn(e,t){var r=t.state,n=t.recommendState,i=t.isPageReset,t=t._uiState;r!==e.state&&(e.state=r,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:i,_uiState:t})),n!==e.recommendState&&(e.recommendState=n)}function hn(e,r,t){return e.reduce(function(e,t){return!O(t)&&(t.getWidgetUiState||t.getWidgetState)?t.getWidgetUiState?t.getWidgetUiState(e,r):t.getWidgetState(e,r):e},2<arguments.length&&void 0!==t?t:{})}function dn(e,t){var r=t.initialSearchParameters,n=un(t,rn);return e.reduce(function(e,t){return!t.getWidgetSearchParameters||O(t)?e:"search"===t.dependsOn&&t.getWidgetParameters?t.getWidgetParameters(e,n):t.getWidgetSearchParameters(e,n)},r)}function mn(e,t){var r=t.initialRecommendParameters,n=un(t,nn);return e.reduce(function(e,t){return!O(t)&&"recommend"===t.dependsOn&&t.getWidgetParameters?t.getWidgetParameters(e,n):e},r)}var pn=function(e){if(void 0===e||void 0===e.indexName)throw new Error(ln("The `indexName` option is required."));var o=e.indexName,e=e.indexId,c=void 0===e?o:e,s=[],u={},l=null,f=null,h=null,d=null,m=null,p=!1,g=!1;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return o},getIndexId:function(){return c},getHelper:function(){return h},getResults:function(){var e;return null!=(e=d)&&e.lastResults?(d.lastResults._state=h.state,d.lastResults):null},getResultsForWidget:function(e){var t;return"recommend"!==e.dependsOn||O(e)||void 0===e.$$id?this.getResults():null!=(t=h)&&t.lastRecommendResults?h.lastRecommendResults[e.$$id]:null},getPreviousState:function(){return m},getScopedResults:function(){var e=this.getParent(),e=e?e.getWidgets():0===o.length?this.getWidgets():[this];return function r(e){return e.filter(O).reduce(function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(cn(r(t.getWidgets()))))},[])}(e)},getParent:function(){return f},createURL:function(e){return"function"==typeof e?l._createURL(on({},c,e(u))):l._createURL(on({},c,hn(s,{searchParameters:e,helper:h})))},getWidgets:function(){return s},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(ln("The `addWidgets` method expects an array of widgets."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(ln("The widget definition expects a `render` and/or an `init` method."));return e.forEach(function(e){O(e)||(l&&"recommend"===e.dependsOn?l._hasRecommendWidget=!0:l?l._hasSearchWidget=!0:"recommend"===e.dependsOn?p=!0:g=!0,"recommend"===(e=e).dependsOn&&(e.$$id=Ne++))}),s=s.concat(e),l&&Boolean(e.length)&&(fn(h,{state:dn(s,{uiState:u,initialSearchParameters:h.state}),recommendState:mn(s,{uiState:u,initialRecommendParameters:h.recommendState}),_uiState:u}),e.forEach(function(e){e.getRenderState&&gn({renderState:e.getRenderState(l.renderState[t.getIndexId()]||{},lr(l,t,l._initialUiState)),instantSearchInstance:l,parent:t})}),e.forEach(function(e){e.init&&e.init(lr(l,t,l._initialUiState))}),l.scheduleSearch()),this},removeWidgets:function(t){var e,r,n=this;if(!Array.isArray(t))throw new Error(ln("The `removeWidgets` method expects an array of widgets."));if(t.some(function(e){return"function"!=typeof e.dispose}))throw new Error(ln("The widget definition expects a `dispose` method."));return(s=s.filter(function(e){return-1===t.indexOf(e)})).forEach(function(e){O(e)||(l&&"recommend"===e.dependsOn?l._hasRecommendWidget=!0:l?l._hasSearchWidget=!0:"recommend"===e.dependsOn?p=!0:g=!0)}),l&&Boolean(t.length)&&(r=(e=t.reduce(function(e,t){t=t.dispose({helper:h,state:e.cleanedSearchState,recommendState:e.cleanedRecommendState,parent:n});return t instanceof y.RecommendParameters?e.cleanedRecommendState=t:t&&(e.cleanedSearchState=t),e},{cleanedSearchState:h.state,cleanedRecommendState:h.recommendState})).cleanedSearchState,e=e.cleanedRecommendState,r=l.future.preserveSharedStateOnUnmount?dn(s,{uiState:u,initialSearchParameters:new y.SearchParameters({index:this.getIndexName()})}):dn(s,{uiState:hn(s,{searchParameters:r,helper:h}),initialSearchParameters:r}),u=hn(s,{searchParameters:r,helper:h}),h.setState(r),h.recommendState=e,s.length)&&l.scheduleSearch(),this},init:function(e){var i,t=this,r=e.instantSearchInstance,n=e.parent,a=e.uiState;null===h&&(l=r,f=n,u=a[c]||{},i=r.mainHelper,e=dn(s,{uiState:u,initialSearchParameters:new y.SearchParameters({index:o})}),n=mn(s,{uiState:u,initialRecommendParameters:new y.RecommendParameters}),(h=y({},e.index,e)).recommendState=n,h.search=function(){return r.onStateChange?(r.onStateChange({uiState:r.mainIndex.getWidgetUiState({}),setUiState:function(e){return r.setUiState(e,!1)}}),i):i.search()},h.searchWithoutTriggeringOnStateChange=function(){return i.search()},h.searchForFacetValues=function(e,t,r,n){n=h.state.setQueryParameters(n);return i.searchForFacetValues(e,t,r,n)},d=i.derive(function(){return or.apply(void 0,[i.state].concat(cn(function(e){for(var t=e.getParent(),r=[e.getHelper().state];null!==t;)r=[t.getHelper().state].concat(r),t=t.getParent();return r}(t))))},function(){return t.getHelper().recommendState}),null!=(n=null==(e=r._initialResults)?void 0:e[this.getIndexId()])&&n.results&&(e=new y.SearchResults(new y.SearchParameters(n.state),n.results),d.lastResults=e,h.lastResults=e),null!=n&&n.recommendResults&&(e=new y.RecommendResults(new y.RecommendParameters({params:n.recommendResults.params}),n.recommendResults.results),d.lastRecommendResults=e,h.lastRecommendResults=e),h.on("change",function(e){e.isPageReset&&!function r(e){e=e.filter(O);0!==e.length&&e.forEach(function(e){var t=e.getHelper();fn(t,{state:t.state.resetPage(),recommendState:t.recommendState,isPageReset:!0}),r(e.getWidgets())})}(s)}),d.on("search",function(){r.scheduleStalledRender()}),d.on("result",function(e){e=e.results;r.scheduleRender(),h.lastResults=e,m=null==e?void 0:e._state}),d.on("recommend:result",function(e){e=e.recommend;r.scheduleRender(),h.lastRecommendResults=e.results}),s.forEach(function(e){e.getRenderState&&gn({renderState:e.getRenderState(r.renderState[t.getIndexId()]||{},lr(r,t,a)),instantSearchInstance:r,parent:t})}),s.forEach(function(e){e.init&&e.init(lr(r,t,a))}),h.on("change",function(e){var t=e.state,e=e._uiState;u=hn(s,{searchParameters:t,helper:h},e||{}),r.onStateChange||r.onInternalStateChange()}),n&&r.scheduleRender(),p&&(r._hasRecommendWidget=!0),g)&&(r._hasSearchWidget=!0)},render:function(e){var t=this,r=e.instantSearchInstance,e=("error"===r.status&&!r.mainHelper.hasPendingRequests()&&m&&h.setState(m),this.getResults()||null!=(e=d)&&e.lastRecommendResults?s:s.filter(O));(e=e.filter(function(e){return!e.shouldRender||e.shouldRender({instantSearchInstance:r})})).forEach(function(e){e.getRenderState&&gn({renderState:e.getRenderState(r.renderState[t.getIndexId()]||{},fr(r,t,e)),instantSearchInstance:r,parent:t})}),e.forEach(function(e){e.render&&e.render(fr(r,t,e))})},dispose:function(){var e,t=this;s.forEach(function(e){e.dispose&&h&&e.dispose({helper:h,state:h.state,recommendState:h.recommendState,parent:t})}),(f=l=null)!=(e=h)&&e.removeAllListeners(),(h=null)!=(e=d)&&e.detach(),d=null},getWidgetUiState:function(e){return s.filter(O).reduce(function(e,t){return t.getWidgetUiState(e)},j(j({},e),{},on({},c,j(j({},e[c]),u))))},getWidgetState:function(e){return this.getWidgetUiState(e)},getWidgetSearchParameters:function(e,t){t=t.uiState;return dn(s,{uiState:t,initialSearchParameters:e})},refreshUiState:function(){u=hn(s,{searchParameters:this.getHelper().state,helper:this.getHelper()},u)},setIndexUiState:function(e){var t="function"==typeof e?e(u):e;l.setUiState(function(e){return j(j({},e),{},on({},c,t))})}}};function gn(e){var t=e.renderState,r=e.instantSearchInstance,e=e.parent,e=(e||r.mainIndex).getIndexId();r.renderState=j(j({},r.renderState),{},on({},e,j(j({},r.renderState[e]),t)))}function yn(){return $(b.useReducer(function(e){return e+1},0),2)[1]}var vn=["children"];function bn(r){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.descendantName,e=e.modifierName,t=t?"-".concat(t):"",e=e?"--".concat(e):"";return"".concat("ais","-").concat(r).concat(t).concat(e)}}var Sn=bn("Highlight");var On=bn("ReverseHighlight");var jn=bn("Snippet");var wn=bn("ReverseSnippet");function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){var r,e={method:e,payload:t},t=e.method;if("object"!==Pn(e=e.payload))throw new Error("The insights helper expects the payload to be an object.");try{r=st(e)}catch(e){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(t,'" data-insights-payload="').concat(r,'"')}function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Fn="_ALGOLIA";function xn(){var e=Fn;if("object"===("undefined"==typeof document?"undefined":En(document))&&"string"==typeof document.cookie)for(var t="".concat(e,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}}function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Tn(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_n(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==In(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==In(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===In(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):_n(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function An(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||kn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e){return function(e){if(Array.isArray(e))return Nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){var r;if(e)return"string"==typeof e?Nn(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nn(e,t):void 0}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wn="2.15.0",Cn="https://cdn.jsdelivr.net/npm/search-insights@".concat(Wn,"/dist/search-insights.min.js");function Hn(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.insightsClient,m=e.insightsInitParams,p=e.onEvent,r=e.$$internal,g=void 0!==r&&r,r=e.$$automatic,y=void 0!==r&&r,a=t,v=(t||null===t||gr(function(e){var n=e.window,i=n.AlgoliaAnalyticsObject||"aa";(a="string"==typeof i?n[i]:a)||(n.AlgoliaAnalyticsObject=i,n[i]||(n[i]=function(){n[i].queue||(n[i].queue=[]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n[i].queue.push(t)},n[i].version=Wn,n[i].shouldAddScript=!0),a=n[i])}),a||S);return function(e){var a=e.instantSearchInstance,e=a.middleware.filter(function(e){return"ais.insights"===e.instance.$$type&&e.instance.$$internal}).map(function(e){return e.creator});a.unuse.apply(a,Dn(e));var t,r,o,c,n=An((e=a.client).transporter?(n=(t=e.transporter).headers||t.baseHeaders,t=t.queryParameters||t.baseQueryParameters,[n[r="x-algolia-application-id"]||t[r],n[r="x-algolia-api-key"]||t[r]]):[e.applicationID,e.apiKey],2),s=n[0],u=n[1],l=void 0,f=void 0,h=void 0,d=void 0,i=v.queue;return Array.isArray(i)&&(t=["setUserToken","setAuthenticatedUserToken"].map(function(t){var e=Ot(i.slice().reverse(),function(e){return An(e,1)[0]===t})||[];return An(e,2)[1]}),r=An(t,2),l=r[0],f=r[1]),v("getUserToken",null,function(e,t){h=$n(t)}),v("getAuthenticatedUserToken",null,function(e,t){d=$n(t)}),!m&&Mn(v)||v("init",Tn({appId:s,apiKey:u,partial:!0},m)),{$$type:"ais.insights",$$internal:g,$$automatic:y,onStateChange:function(){},subscribe:function(){if(v.shouldAddScript){var t="[insights middleware]: could not load search-insights.js. Please load it manually following https://alg.li/insights-init";try{var e=document.createElement("script");e.async=!0,e.src=Cn,e.onerror=function(){a.emit("error",new Error(t))},document.body.appendChild(e),v.shouldAddScript=!1}catch(e){v.shouldAddScript=!1,a.emit("error",new Error(t))}}},started:function(){v("addAlgoliaAgent","insights-middleware"),c=a.mainHelper,o={userToken:c.state.userToken,clickAnalytics:c.state.clickAnalytics},y||c.overrideStateWithoutTriggeringChangeEvent(Tn(Tn({},c.state),{},{clickAnalytics:!0})),g||a.scheduleSearch();var n=function(e){var t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=$n(e);function i(){c.overrideStateWithoutTriggeringChangeEvent(Tn(Tn({},c.state),{},{userToken:n})),t&&t!==e&&a.scheduleSearch()}n&&(t=c.state.userToken,r?i():setTimeout(i,0))},e=xn();function t(e,t,r){n(e,!0),t&&v("setUserToken",t),r&&v("setAuthenticatedUserToken",r)}e&&n(e,!0);var e=d||h,r=f||l,i=(e?t(e,h,d):r&&t(r,l,f),v("onUserTokenChange",n,{immediate:!0}),v("onAuthenticatedUserTokenChange",function(e){e||v("getUserToken",null,function(e,t){n(t)}),n(e)},{immediate:!0}),v);Mn(v)&&(i=function(e,t){return v(e,t,{headers:{"X-Algolia-Application-Id":s,"X-Algolia-API-Key":u}})}),a.sendEventToInsights=function(e){p?p(e,i):e.insightsMethod&&(e.payload.algoliaSource=["instantsearch"],y&&e.payload.algoliaSource.push("instantsearch-automatic"),"internal"===e.eventModifier&&e.payload.algoliaSource.push("instantsearch-internal"),i(e.insightsMethod,e.payload))}},unsubscribe:function(){v("onUserTokenChange",void 0),v("onAuthenticatedUserTokenChange",void 0),a.sendEventToInsights=S,c&&o&&(c.overrideStateWithoutTriggeringChangeEvent(Tn(Tn({},c.state),o)),a.scheduleSearch())}}}}function Mn(e){var e=An((e.version||"").split(".").map(Number),2),t=e[0],e=e[1];return 3<=t||2===t&&6<=e||1===t&&10<=e}function $n(e){if(e)return"number"==typeof e?e.toString():e}function Ln(e){var e=(0<arguments.length&&void 0!==e?e:{}).$$internal,a=void 0!==e&&e;return function(e){var t=e.instantSearchInstance,r={widgets:[]},n=document.createElement("meta"),i=document.querySelector("head");return n.name="instantsearch:widgets",{$$type:"ais.metadata",$$internal:a,onStateChange:function(){},subscribe:function(){setTimeout(function(){var e=t.client;r.ua=e.transporter&&e.transporter.userAgent?e.transporter.userAgent.value:e._ua,function n(e,i,a){var o=lr(i,i.mainIndex,i._initialUiState);e.forEach(function(e){var t={},r=(e.getWidgetRenderState&&(r=e.getWidgetRenderState(o))&&r.widgetParams&&(t=r.widgetParams),Object.keys(t).filter(function(e){return void 0!==t[e]}));a.widgets.push({type:e.$$type,widgetType:e.$$widgetType,params:r}),"ais.index"===e.$$type&&n(e.getWidgets(),i,a)})}(t.mainIndex.getWidgets(),t,r),t.middleware.forEach(function(e){return r.widgets.push({middleware:!0,type:e.instance.$$type,internal:e.instance.$$internal})}),n.content=JSON.stringify(r),i.appendChild(n)},0)},started:function(){},unsubscribe:function(){n.remove()}}}}function Un(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}function Qn(e,t,r,n,i,a,o,c,s,u,l,f,h,d){var m=e;if("function"==typeof o?m=o(t,m):m instanceof Date?m=u(m):"comma"===r&&Yn(m)&&(m=Kn.maybeMap(m,function(e){return e instanceof Date?u(e):e})),null===m){if(n)return a&&!h?a(t,w.encoder,d,"key",l):t;m=""}if(ii(m)||Kn.isBuffer(m)){if(a){e=h?t:a(t,w.encoder,d,"key",l);if("comma"===r&&h){for(var p=ei.call(String(m),","),g="",y=0;y<p.length;++y)g+=(0===y?"":",")+f(a(p[y],w.encoder,d,"value",l));return[f(e)+"="+g]}return[f(e)+"="+f(a(m,w.encoder,d,"value",l))]}return[f(t)+"="+f(String(m))]}var v,b=[];if(void 0!==m){v="comma"===r&&Yn(m)?[{value:0<m.length?m.join(",")||null:void 0}]:Yn(o)?o:(e=Object.keys(m),c?e.sort(c):e);for(var S=0;S<v.length;++S){var O=v[S],j="object"==typeof O&&void 0!==O.value?O.value:m[O];i&&null===j||(O=Yn(m)?"function"==typeof r?r(t,O):t:t+(s?"."+O:"["+O+"]"),ri(b,Qn(j,O,r,n,i,a,o,c,s,u,l,f,h,d)))}}return b}var Bn=String.prototype.replace,qn=/%20/g,V="RFC3986",Vn={default:V,formatters:{RFC1738:function(e){return Bn.call(e,qn,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:V},Jn=Object.prototype.hasOwnProperty,zn=Array.isArray,Xn=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Kn={arrayToObject:Un,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],o=Object.keys(a),c=0;c<o.length;++c){var s=o[c],u=a[s];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:s}),r.push(u))}for(var l=t;1<l.length;){var f=l.pop(),h=f.obj[f.prop];if(zn(h)){for(var d=[],m=0;m<h.length;++m)void 0!==h[m]&&d.push(h[m]);f.obj[f.prop]=d}}return e},decode:function(t,e,r){t=t.replace(/\+/g," ");if("iso-8859-1"===r)return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch(e){return t}},encode:function(e,t,r,n,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var s=a.charCodeAt(c);45===s||46===s||95===s||126===s||48<=s&&s<=57||65<=s&&s<=90||97<=s&&s<=122||i===Vn.RFC1738&&(40===s||41===s)?o+=a.charAt(c):s<128?o+=Xn[s]:s<2048?o+=Xn[192|s>>6]+Xn[128|63&s]:s<55296||57344<=s?o+=Xn[224|s>>12]+Xn[128|s>>6&63]+Xn[128|63&s]:(c+=1,s=65536+((1023&s)<<10|1023&a.charCodeAt(c)),o+=Xn[240|s>>18]+Xn[128|s>>12&63]+Xn[128|s>>6&63]+Xn[128|63&s])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(zn(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function n(i,a,o){if(!a)return i;if("object"!=typeof a){if(zn(i))i.push(a);else{if(!i||"object"!=typeof i)return[i,a];(o&&(o.plainObjects||o.allowPrototypes)||!Jn.call(Object.prototype,a))&&(i[a]=!0)}return i}var e;return i&&"object"==typeof i?(zn(e=i)&&!zn(a)&&(e=Un(i,o)),zn(i)&&zn(a)?(a.forEach(function(e,t){var r;Jn.call(i,t)?(r=i[t])&&"object"==typeof r&&e&&"object"==typeof e?i[t]=n(r,e,o):i.push(e):i[t]=e}),i):Object.keys(a).reduce(function(e,t){var r=a[t];return Jn.call(e,t)?e[t]=n(e[t],r,o):e[t]=r,e},e)):[i].concat(a)}},Gn=Object.prototype.hasOwnProperty,Zn={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Yn=Array.isArray,ei=String.prototype.split,ti=Array.prototype.push,ri=function(e,t){ti.apply(e,Yn(t)?t:[t])},ni=Date.prototype.toISOString,X=Vn.default,w={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Kn.encode,encodeValuesOnly:!1,format:X,formatter:Vn.formatters[X],indices:!1,serializeDate:function(e){return ni.call(e)},skipNulls:!1,strictNullHandling:!1},ii=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e},ai=Object.prototype.hasOwnProperty,oi=Array.isArray,g={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Kn.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},ci=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},si=function(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e},ui="utf8=%26%2310003%3B",li="utf8=%E2%9C%93",fi=function(e,t,r,n){for(var i=n?t:si(t,r),a=e.length-1;0<=a;--a){var o,c,s,u=e[a];"[]"===u&&r.parseArrays?o=[].concat(i):(o=r.plainObjects?Object.create(null):{},c="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,s=parseInt(c,10),r.parseArrays||""!==c?!isNaN(s)&&u!==c&&String(s)===c&&0<=s&&r.parseArrays&&s<=r.arrayLimit?(o=[])[s]=i:"__proto__"!==c&&(o[c]=i):o={0:i}),i=o}return i},hi={formats:Vn,parse:function(e,t){var r=function(e){if(!e)return g;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?g:e).charset;return{allowDots:void 0===e.allowDots?g.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:g).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:g).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:g).charsetSentinel,comma:("boolean"==typeof e.comma?e:g).comma,decoder:("function"==typeof e.decoder?e:g).decoder,delimiter:("string"==typeof e.delimiter||Kn.isRegExp(e.delimiter)?e:g).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:g.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:g).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:g).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:g).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:g).strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var r,n,i,a,o={},e=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,s=e.split(t.delimiter,c),u=-1,l=t.charset;if(t.charsetSentinel)for(r=0;r<s.length;++r)0===s[r].indexOf("utf8=")&&(s[r]===li?l="utf-8":s[r]===ui&&(l="iso-8859-1"),u=r,r=s.length);for(r=0;r<s.length;++r)r!==u&&((a=-1===(a=-1===(a=(n=s[r]).indexOf("]="))?n.indexOf("="):a+1)?(i=t.decoder(n,g.decoder,l,"key"),t.strictNullHandling?null:""):(i=t.decoder(n.slice(0,a),g.decoder,l,"key"),Kn.maybeMap(si(n.slice(a+1),t),function(e){return t.decoder(e,g.decoder,l,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===l&&(a=ci(a)),-1<n.indexOf("[]=")&&(a=oi(a)?[a]:a),ai.call(o,i)?o[i]=Kn.combine(o[i],a):o[i]=a);return o}(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o)var c=a[o],c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=0<r.depth&&/(\[[^[\]]*])/.exec(i),e=o?i.slice(0,o.index):i,c=[];if(e){if(!r.plainObjects&&ai.call(Object.prototype,e)&&!r.allowPrototypes)return;c.push(e)}for(var s=0;0<r.depth&&null!==(o=a.exec(i))&&s<r.depth;){if(s+=1,!r.plainObjects&&ai.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+i.slice(o.index)+"]"),fi(c,t,r,n)}}(c,n[c],r,"string"==typeof e),i=Kn.merge(i,c,r);return Kn.compact(i)},stringify:function(e,t){var r=e,n=function(e){if(!e)return w;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||w.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Vn.default;if(void 0!==e.format){if(!Gn.call(Vn.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=Vn.formatters[r],i=w.filter;return"function"!=typeof e.filter&&!Yn(e.filter)||(i=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:w).addQueryPrefix,allowDots:void 0===e.allowDots?w.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:w).charsetSentinel,delimiter:(void 0===e.delimiter?w:e).delimiter,encode:("boolean"==typeof e.encode?e:w).encode,encoder:("function"==typeof e.encoder?e:w).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:w).encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:("function"==typeof e.serializeDate?e:w).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:w).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:w).strictNullHandling}}(t),i=("function"==typeof n.filter?r=(0,n.filter)("",r):Yn(n.filter)&&(o=n.filter),[]);if("object"!=typeof r||null===r)return"";var e=t&&t.arrayFormat in Zn?t.arrayFormat:!(t&&"indices"in t)||t.indices?"indices":"repeat",a=Zn[e],o=o||Object.keys(r);n.sort&&o.sort(n.sort);for(var c=0;c<o.length;++c){var s=o[c];n.skipNulls&&null===r[s]||ri(i,Qn(r[s],s,a,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}t=i.join(n.delimiter),e=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}};function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pi(n.key),n)}}function P(e,t,r){(t=pi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function pi(e){e=function(e,t){if("object"!==di(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===di(e)?e:String(e)}function gi(e){e&&(window.document.title=e)}var yi=function(){function l(e){var r=this,t=e.windowTitle,n=e.writeDelay,n=void 0===n?400:n,i=e.createURL,a=e.parseURL,o=e.getLocation,c=e.start,s=e.dispose,u=e.push,e=e.cleanUrlOnDispose;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");P(this,"$$type","ais.browser"),P(this,"windowTitle",void 0),P(this,"writeDelay",void 0),P(this,"_createURL",void 0),P(this,"parseURL",void 0),P(this,"getLocation",void 0),P(this,"writeTimer",void 0),P(this,"_onPopState",void 0),P(this,"inPopState",!1),P(this,"isDisposed",!1),P(this,"latestAcknowledgedHistory",0),P(this,"_start",void 0),P(this,"_dispose",void 0),P(this,"_push",void 0),P(this,"_cleanUrlOnDispose",void 0),this.windowTitle=t,this.writeTimer=void 0,this.writeDelay=n,this._createURL=i,this.parseURL=a,this.getLocation=o,this._start=c,this._dispose=s,this._push=u,this._cleanUrlOnDispose=void 0===e||e,gr(function(e){var e=e.window,t=r.windowTitle&&r.windowTitle(r.read());gi(t),r.latestAcknowledgedHistory=e.history.length})}var e,t,r;return e=l,(t=[{key:"read",value:function(){return this.parseURL({qsModule:hi,location:this.getLocation()})}},{key:"write",value:function(i){var a=this;gr(function(e){var t=e.window,r=a.createURL(i),n=a.windowTitle&&a.windowTitle(i);a.writeTimer&&clearTimeout(a.writeTimer),a.writeTimer=setTimeout(function(){gi(n),a.shouldWrite(r)&&(a._push?a._push(r):t.history.pushState(i,n||"",r),a.latestAcknowledgedHistory=t.history.length),a.inPopState=!1,a.writeTimer=void 0},a.writeDelay)})}},{key:"onUpdate",value:function(e){var t=this;this._start&&this._start(function(){e(t.read())}),this._onPopState=function(){t.writeTimer&&(clearTimeout(t.writeTimer),t.writeTimer=void 0),t.inPopState=!0,e(t.read())},gr(function(e){e.window.addEventListener("popstate",t._onPopState)})}},{key:"createURL",value:function(e){return this._createURL({qsModule:hi,routeState:e,location:this.getLocation()})}},{key:"dispose",value:function(){var t=this;this._dispose&&this._dispose(),this.isDisposed=!0,gr(function(e){e=e.window;t._onPopState&&e.removeEventListener("popstate",t._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this._cleanUrlOnDispose&&this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(r){var n=this;return gr(function(e){var t,e=e.window;return!(n.isDisposed&&!n._cleanUrlOnDispose)&&(t=!(n.isDisposed&&n.latestAcknowledgedHistory!==e.history.length),!n.inPopState)&&t&&r!==e.location.href})}}])&&mi(e.prototype,t),r&&mi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}();function vi(e){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bi=["configure"];function Si(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Oi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Si(Object(r),!0).forEach(function(e){ji(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Si(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ji(e,t,r){return(t=function(e){e=function(e,t){if("object"!==vi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==vi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===vi(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wi(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Pi(e){e.configure;return wi(e,bi)}function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ei(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Fi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ei(Object(r),!0).forEach(function(e){xi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ei(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function xi(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Ri(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ri(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ii(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.router,i=void 0===t?function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.createURL,r=e.parseURL,n=e.writeDelay,i=e.windowTitle,a=e.getLocation,o=e.start,c=e.dispose,s=e.push,e=e.cleanUrlOnDispose;return new yi({createURL:void 0===t?function(e){var t=e.qsModule,r=e.routeState,e=e.location,n=e.protocol,i=e.hostname,a=e.port,a=void 0===a?"":a,o=e.pathname,e=e.hash,t=t.stringify(r),r=""===a?"":":".concat(a);return(t?"".concat(n,"//").concat(i).concat(r).concat(o,"?").concat(t):"".concat(n,"//").concat(i).concat(r).concat(o)).concat(e)}:t,parseURL:void 0===r?function(e){var t=e.qsModule,e=e.location;return t.parse(e.search.slice(1),{arrayLimit:99})}:r,writeDelay:void 0===n?400:n,windowTitle:i,getLocation:void 0===a?function(){return gr(function(e){return e.window.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:a,start:o,dispose:c,push:s,cleanUrlOnDispose:e})}():t,a=void 0===(t=e.stateMapping)?{$$type:"ais.simple",stateToRoute:function(r){return Object.keys(r).reduce(function(e,t){return Oi(Oi({},e),{},ji({},t,Pi(r[t])))},{})},routeToState:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(r).reduce(function(e,t){return Oi(Oi({},e),{},ji({},t,Pi(r[t])))},{})}}:t,o=void 0!==(t=e.$$internal)&&t;return function(e){var t=e.instantSearchInstance;t._createURL=function(r){var e=0===t.mainIndex.getWidgets().length?t._initialUiState:t.mainIndex.getWidgetUiState({}),e=Object.keys(r).reduce(function(e,t){return Fi(Fi({},e),{},xi({},t,r[t]))},e),e=a.stateToRoute(e);return i.createURL(e)};var r=void 0,n=t._initialUiState;return{$$type:"ais.router({router:".concat(i.$$type||"__unknown__",", stateMapping:").concat(a.$$type||"__unknown__","})"),$$internal:o,onStateChange:function(e){e=e.uiState,e=a.stateToRoute(e);void 0!==r&&Zt(r,e)||(i.write(e),r=e)},subscribe:function(){t._initialUiState=Fi(Fi({},n),a.routeToState(i.read())),i.onUpdate(function(e){0<t.mainIndex.getWidgets().length&&t.setUiState(a.routeToState(e))})},started:function(){var e;null!=(e=i.start)&&e.call(i)},unsubscribe:function(){i.dispose()}}}}function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ai(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ti(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==_i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===_i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ti(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Di(e){var r=e.numberLocale;return{formatNumber:function(e,t){return Number(t(e)).toLocaleString(r)},highlight:function(e,t){try{var r=JSON.parse(e);return t((n=Ai(Ai({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(It(o._highlightResult,i)||{}).value)?"":o,o=Sn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseHighlight:function(e,t){try{var r=JSON.parse(e);return t((n=Ai(Ai({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(It(o._highlightResult,i)||{}).value)?"":o,o=On({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),tt(pr(Et(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseHighlight helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},snippet:function(e,t){try{var r=JSON.parse(e);return t((n=Ai(Ai({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(It(o._snippetResult,i)||{}).value)?"":o,o=jn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseSnippet:function(e,t){try{var r=JSON.parse(e);return t((n=Ai(Ai({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(It(o._snippetResult,i)||{}).value)?"":o,o=wn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),tt(pr(Et(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseSnippet helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},insights:function(e,t){try{var r=JSON.parse(e),n=r.method,i=r.payload;return t(Rn(n,Ai({objectIDs:[this.objectID]},i)))}catch(e){throw new Error('\nThe insights helper expects a JSON object of the format:\n{ "method": "method-name", "payload": { "eventName": "name of the event" } }')}}}}function ki(e){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ni(Object(r),!0).forEach(function(e){E(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ni(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Li(n.key),n)}}function Hi(e,t){return(Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Mi(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=$i(r),t=(e=n?(e=$i(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===ki(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return R(t)}}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $i(e){return($i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){(t=Li(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Li(e){e=function(e,t){if("object"!==ki(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ki(e)?e:String(e)}var Ui=a({name:"instantsearch"});function Qi(){return"#"}var Bi={preserveSharedStateOnUnmount:!1,persistHierarchicalRootCount:!1},qi=function(){var e=m,t=U;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hi(e,t);var r,d=Mi(m);function m(e){var r;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");E(R(r=d.call(this)),"client",void 0),E(R(r),"indexName",void 0),E(R(r),"insightsClient",void 0),E(R(r),"onStateChange",null),E(R(r),"future",void 0),E(R(r),"helper",void 0),E(R(r),"mainHelper",void 0),E(R(r),"mainIndex",void 0),E(R(r),"started",void 0),E(R(r),"templatesConfig",void 0),E(R(r),"renderState",{}),E(R(r),"_stalledSearchDelay",void 0),E(R(r),"_searchStalledTimer",void 0),E(R(r),"_initialUiState",void 0),E(R(r),"_initialResults",void 0),E(R(r),"_createURL",void 0),E(R(r),"_searchFunction",void 0),E(R(r),"_mainHelperSearch",void 0),E(R(r),"_hasSearchWidget",!1),E(R(r),"_hasRecommendWidget",!1),E(R(r),"_insights",void 0),E(R(r),"middleware",[]),E(R(r),"sendEventToInsights",void 0),E(R(r),"status","idle"),E(R(r),"error",void 0),E(R(r),"scheduleSearch",bt(function(){r.started&&r.mainHelper.search()})),E(R(r),"scheduleRender",bt(function(){var e,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!=(e=r.mainHelper)&&e.hasPendingRequests()||(clearTimeout(r._searchStalledTimer),r._searchStalledTimer=null,t&&(r.status="idle",r.error=void 0)),r.mainIndex.render({instantSearchInstance:R(r)}),r.emit("render")})),E(R(r),"onInternalStateChange",bt(function(){var t=r.mainIndex.getWidgetUiState({});r.middleware.forEach(function(e){e.instance.onStateChange({uiState:t})})})),r.setMaxListeners(100);var t=e.indexName,t=void 0===t?"":t,n=e.numberLocale,i=e.initialUiState,i=void 0===i?{}:i,a=e.routing,a=void 0===a?null:a,o=e.insights,o=void 0===o?void 0:o,c=e.searchFunction,s=e.stalledSearchDelay,s=void 0===s?200:s,u=e.searchClient,u=void 0===u?null:u,l=e.insightsClient,l=void 0===l?null:l,f=e.onStateChange,f=void 0===f?null:f,h=e.future,e=void 0===h?Wi(Wi({},Bi),e.future||{}):h;if(null===u)throw new Error(Ui("The `searchClient` option is required."));if("function"!=typeof u.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof u.addAlgoliaAgent&&u.addAlgoliaAgent("instantsearch.js (".concat("4.75.1",")")),l&&"function"!=typeof l)throw new Error(Ui("The `insightsClient` option should be a function."));return r.client=u,r.future=e,r.insightsClient=l,r.indexName=t,r.helper=null,r.mainHelper=null,r.mainIndex=pn({indexName:t}),r.onStateChange=f,r.started=!1,r.templatesConfig={helpers:Di({numberLocale:n}),compileOptions:{}},r._stalledSearchDelay=s,r._searchStalledTimer=null,r._createURL=Qi,r._initialUiState=i,r._initialResults=null,r._insights=o,c&&(r._searchFunction=c),r.sendEventToInsights=S,a&&((h="boolean"==typeof a?{}:a).$$internal=!0,r.use(Ii(h))),o&&((u="boolean"==typeof o?{}:o).$$internal=!0,r.use(Hn(u))),gr(function(e){return-1<(null==(e=e.window.navigator)||null==(e=e.userAgent)?void 0:e.indexOf("Algolia Crawler"))},{fallback:function(){return!1}})&&r.use(Ln({$$internal:!0})),r}return e=m,(t=[{key:"_isSearchStalled",get:function(){return"stalled"===this.status}},{key:"use",value:function(){for(var r=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.map(function(e){var t=Wi({$$type:"__unknown__",$$internal:!1,subscribe:S,started:S,unsubscribe:S,onStateChange:S},e({instantSearchInstance:r}));return r.middleware.push({creator:e,instance:t}),t});return this.started&&i.forEach(function(e){e.subscribe(),e.started()}),this}},{key:"unuse",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.middleware.filter(function(e){return t.includes(e.creator)}).forEach(function(e){return e.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(e){return!t.includes(e.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(e){return this.addWidgets([e])}},{key:"addWidgets",value:function(e){if(!Array.isArray(e))throw new Error(Ui("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(Ui("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(e),this}},{key:"removeWidget",value:function(e){return this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){if(!Array.isArray(e))throw new Error(Ui("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(e.some(function(e){return"function"!=typeof e.dispose}))throw new Error(Ui("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(e),this}},{key:"start",value:function(){var n=this;if(this.started)throw new Error(Ui("The `start` method has already been called once."));var r,e,t,i,a,o=this.mainHelper||y(this.client,this.indexName,void 0,{persistHierarchicalRootCount:this.future.persistHierarchicalRootCount});o.search=function(){return n.status="loading",n.scheduleRender(!1),n._hasSearchWidget&&o.searchOnlyWithDerivedHelpers(),n._hasRecommendWidget&&o.recommend(),o},this._searchFunction&&(r={search:function(){return new Promise(S)}},this._mainHelperSearch=o.search.bind(o),o.search=function(){var t=n.mainIndex.getHelper(),e=y(r,t.state.index,t.state);return e.once("search",function(e){e=e.state;t.overrideStateWithoutTriggeringChangeEvent(e),n._mainHelperSearch()}),e.on("change",function(e){e=e.state;t.setState(e)}),n._searchFunction(e),o}),o.on("error",function(e){var r,e=e.error;e instanceof Error||(r=e,e=Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},new Error(r.message))),e.error=e,n.error=e,n.status="error",n.scheduleRender(!1),n.emit("error",e)}),this.mainHelper=o,this.middleware.forEach(function(e){e.instance.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults?(Xt(this.client,this._initialResults),t=this.mainHelper,i=this._initialResults,a=Object.keys(i).reduce(function(e,t){t=i[t];return t.recommendResults?Ut(Ut({},e),t.recommendResults.results):e},{}),t._recommendCache=a,e=this.scheduleSearch,this.scheduleSearch=bt(S),bt(function(){n.scheduleSearch=e})()):0<this.mainIndex.getWidgets().length&&this.scheduleSearch(),this.helper=this.mainIndex.getHelper(),this.started=!0,this.middleware.forEach(function(e){e.instance.started()}),void 0===this._insights&&o.derivedHelpers[0].once("result",function(){n.mainIndex.getScopedResults().some(function(e){e=e.results;return null==e?void 0:e._automaticInsights})&&n.use(Hn({$$internal:!0,$$automatic:!0}))})}},{key:"dispose",value:function(){var e;this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),null!=(e=this.mainHelper)&&e.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(e){e.instance.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var e=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){e.status="stalled",e.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(e){var t=this,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!this.mainHelper)throw new Error(Ui("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var n="function"==typeof e?e(this.mainIndex.getWidgetUiState({})):e;this.onStateChange&&r?this.onStateChange({uiState:n,setUiState:function(e){yt("function"==typeof e?e(n):e,t.mainIndex),t.scheduleSearch(),t.onInternalStateChange()}}):(yt(n,this.mainIndex),this.scheduleSearch(),this.onInternalStateChange())}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(){if(this.started)return this._createURL(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});throw new Error(Ui("The `start` method needs to be called before `createURL`."))}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(Ui("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}])&&Ci(e.prototype,t),r&&Ci(e,r),Object.defineProperty(e,"prototype",{writable:!1}),m}();function Vi(e,t){return e(t={exports:{}},t.exports),t.exports}var Ji="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},zi=s.useState,Xi=s.useEffect,Ki=s.useLayoutEffect,Gi=s.useDebugValue;function Zi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ji(e,r)}catch(e){return 1}}var t="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=zi({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return Ki(function(){i.value=r,i.getSnapshot=t,Zi(i)&&a({inst:i})},[e,r,t]),Xi(function(){return Zi(i)&&a({inst:i}),e(function(){Zi(i)&&a({inst:i})})},[e]),Gi(r),r},Yi={useSyncExternalStore:void 0!==s.useSyncExternalStore?s.useSyncExternalStore:t},ea=(Vi(function(e,t){}).useSyncExternalStore,Vi(function(e){e.exports=Yi}).useSyncExternalStore),ta=["react (".concat(b.version,")"),"react-instantsearch (".concat(W,")"),"react-instantsearch-core (".concat(W,")")],ra="react-instantsearch-server (".concat(W,")"),na=function(e){return e?"next.js (".concat(e,")"):null};function ia(e){var t,r,n=yn(),i=kr(),a=Wr(),o=Lr(),c=null==a?void 0:a.initialResults,s=b.useRef(e),o=i||c||o,u=b.useRef(null),a=(null===(u=a?a.ssrSearchRef:u).current&&((t=new qi(e))._schedule=function(e){t._schedule.queue.push(e),clearTimeout(t._schedule.timer),t._schedule.timer=setTimeout(function(){t._schedule.queue.forEach(function(e){e()}),t._schedule.queue=[]},0)},t._schedule.queue=[],o&&(t._initialResults=c||{}),aa(e.searchClient,[].concat(ta,[i&&ra,na("undefined"!=typeof window&&(null==(r=window.next)?void 0:r.version)||("undefined"==typeof process||null==(r=process.env)?void 0:r.NEXT_RUNTIME))])),o&&t.start(),i&&i.notifyServer({search:t}),e.routing,u.current=t),u.current),c=s.current,l=(c.indexName!==e.indexName&&(a.helper.setIndex(e.indexName||"").search(),s.current=e),c.searchClient!==e.searchClient&&(aa(e.searchClient,[].concat(ta,[i&&ra])),a.mainHelper.setClient(e.searchClient).search(),s.current=e),c.onStateChange!==e.onStateChange&&(a.onStateChange=e.onStateChange,s.current=e),c.searchFunction!==e.searchFunction&&(a._searchFunction=e.searchFunction,s.current=e),c.stalledSearchDelay!==e.stalledSearchDelay&&(a._stalledSearchDelay=null!=(r=e.stalledSearchDelay)?r:200,s.current=e),Rr(c.future,e.future)||(a.future=m(m({},Bi),e.future),s.current=e),b.useRef(null));return ea(b.useCallback(function(){var e=u.current;return null===l.current?e.started||(e.start(),n()):(clearTimeout(l.current),e._preventWidgetCleanup=!1),function(){clearTimeout(e._schedule.timer),l.current=setTimeout(function(){e.dispose()}),e._preventWidgetCleanup=!0}},[n]),function(){return u.current},function(){return u.current})}function aa(t,e){"function"==typeof t.addAlgoliaAgent&&e.filter(Boolean).forEach(function(e){t.addAlgoliaAgent(e)})}var oa=["children"];var ca=["children"];function sa(e){var t=e.children,e=M(e,ca),r=s.useRef(null),n=s.useRef(0);return 0===Object.keys(e).length?s.createElement(s.Fragment,null,t):s.createElement(Nr.Provider,{value:m(m({},e),{},{ssrSearchRef:r,recommendIdx:n})},t)}function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?la(Object(r),!0).forEach(function(e){fa(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):la(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function fa(e,t,r){return(t=function(e){e=function(e,t){if("object"!==ua(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ua(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?da(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?da(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ma(u){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S,f=(d(u,pa()),{});return function(o){var r,e=o||{},n=e.attributes,t=e.separator,i=void 0===t?" > ":t,t=e.rootPath,a=void 0===t?null:t,t=e.transformItems,c=void 0===t?function(e){return e}:t;if(n&&Array.isArray(n)&&0!==n.length)return r=ha(n,1)[0],{$$type:"ais.breadcrumb",init:function(e){u(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){u(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(){l()},getRenderState:function(e,t){return F(F({},e),{},{breadcrumb:F(F({},e.breadcrumb),{},fa({},r,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r=this,n=e.helper,i=e.createURL,t=e.results,e=e.state;var a,e=t&&0!==e.hierarchicalFacets.length?(e=ha(e.hierarchicalFacets,1)[0].name,e=(e=t.getFacetValues(e,{}))&&!Array.isArray(e)&&e.data?e.data:[],c((a=function r(e){return e.reduce(function(e,t){return e=t.isRefined&&(e.push({label:t.name,value:t.escapedValue}),Array.isArray(t.data))?e.concat(r(t.data)):e},[])}(e)).map(function(e,t){return{label:e.label,value:t+1===a.length?null:a[t+1].value}}),{results:t})):[];return f.createURL||(f.createURL=function(t){return i(function(e){return r.getWidgetUiState(e,{searchParameters:s(n.state,t),helper:n})})}),f.refine||(f.refine=function(e){n.setState(s(n.state,e)).search()}),{canRefine:0<e.length,createURL:f.createURL,items:e,refine:f.refine,widgetParams:o}},getWidgetUiState:function(e,t){var t=t.searchParameters.getHierarchicalFacetBreadcrumb(r);return e=F(F({},e),{},{hierarchicalMenu:F(F({},e.hierarchicalMenu),{},fa({},r,t))}),t=r,e.hierarchicalMenu&&(e.hierarchicalMenu[t]&&e.hierarchicalMenu[t].length||delete e.hierarchicalMenu[t],0===Object.keys(e.hierarchicalMenu).length)&&delete e.hierarchicalMenu,e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[r];if(e.isConjunctiveFacet(r)||e.isDisjunctiveFacet(r))return e;e.isHierarchicalFacet(r)&&e.getHierarchicalFacetByName(r);e=e.removeHierarchicalFacet(r).addHierarchicalFacet({name:r,attributes:n,separator:i,rootPath:a});return t?e.addHierarchicalFacetRefinement(r,t.join(i)):e.setQueryParameters({hierarchicalFacetsRefinements:F(F({},e.hierarchicalFacetsRefinements),{},fa({},r,[]))})}};throw new Error(pa("The `attributes` option expects an array of strings."));function s(e,t){return t?e.resetPage().toggleFacetRefinement(r,t):0===(t=e.getHierarchicalFacetBreadcrumb(r)).length?e:e.resetPage().toggleFacetRefinement(r,t[0])}}}var pa=a({name:"breadcrumb",connector:!0});function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e){return function(e){if(Array.isArray(e))return va(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?va(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?va(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ba(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Sa(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ba(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ga(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ga(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ba(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Oa(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,ja()),function(n){var e=n||{},t=e.includedAttributes,c=void 0===t?[]:t,t=e.excludedAttributes,s=void 0===t?["query"]:t,t=e.transformItems,u=void 0===t?function(e){return e}:t;if(n&&n.includedAttributes&&n.excludedAttributes)throw new Error(ja("The options `includedAttributes` and `excludedAttributes` cannot be used together."));function i(){return l.refine()}function a(){return l.createURL()}var l={refine:S,createURL:function(){return""},attributesToClear:[]};return{$$type:"ais.clearRefinements",init:function(e){var t=e.instantSearchInstance;r(Sa(Sa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(Sa(Sa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){o()},getRenderState:function(e,t){return Sa(Sa({},e),{},{clearRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.createURL,r=e.scopedResults,o=e.results,e=(l.attributesToClear=r.reduce(function(e,t){return e.concat((t=(e={scopedResult:t,includedAttributes:c,excludedAttributes:s,transformItems:u,results:o}).scopedResult,r=e.includedAttributes,n=e.excludedAttributes,i=e.transformItems,e=e.results,a=-1!==r.indexOf("query")||-1===n.indexOf("query"),{helper:t.helper,items:i(er(Tt(t.results,t.helper.state,a).map(function(e){return e.attribute}).filter(function(e){return 0===r.length||-1!==r.indexOf(e)}).filter(function(e){return"query"===e&&a||-1===n.indexOf(e)})),{results:e})}));var r,n,i,a},[]),l.refine=function(){l.attributesToClear.forEach(function(e){var t=e.helper,e=e.items;t.setState(He({helper:t,attributesToClear:e})).search()})},l.createURL=function(){return t(or.apply(void 0,ya(l.attributesToClear.map(function(e){return He({helper:e.helper,attributesToClear:e.items})}))))},l.attributesToClear.some(function(e){return 0<e.items.length}));return{canRefine:e,hasRefinements:e,refine:i,createURL:a,widgetParams:n}}}}}var ja=a({name:"clear-refinements",connector:!0});function wa(e){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e){return function(e){if(Array.isArray(e))return Ra(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Ra(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ra(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ea(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Fa(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ea(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==wa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==wa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===wa(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ea(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function xa(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,Ia()),function(a){if((a||{}).includedAttributes&&(a||{}).excludedAttributes)throw new Error(Ia("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var e=a||{},o=e.includedAttributes,t=e.excludedAttributes,c=void 0===t?["query"]:t,t=e.transformItems,s=void 0===t?function(e){return e}:t;return{$$type:"ais.currentRefinements",init:function(e){var t=e.instantSearchInstance;r(Fa(Fa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(Fa(Fa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){n()},getRenderState:function(e,t){return Fa(Fa({},e),{},{currentRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var r=e.results,t=e.scopedResults,n=e.createURL,i=e.helper;e=r?t.reduce(function(e,t){return e.concat(s(_a({results:t.results,helper:t.helper,indexId:t.indexId,includedAttributes:o,excludedAttributes:c}),{results:r}))},[]):s(_a({results:{},helper:i,indexId:i.state.index,includedAttributes:o,excludedAttributes:c}),{results:r});return{items:e,canRefine:0<e.length,refine:function(e){return Aa(i,e)},createURL:function(e){return n(Ta(i.state,e))},widgetParams:a}}}}}var Ia=a({name:"current-refinements",connector:!0});function _a(e){var t=e.results,r=e.helper,n=e.indexId,i=e.includedAttributes,a=e.excludedAttributes,e=-1!==(i||[]).indexOf("query")||-1===(a||[]).indexOf("query"),o=i?function(e){return-1!==i.indexOf(e.attribute)}:function(e){return-1===a.indexOf(e.attribute)},c=Tt(t,r.state,e).map(Da).filter(o);return c.reduce(function(e,t){return[].concat(Pa(e.filter(function(e){return e.attribute!==t.attribute})),[{indexName:r.state.index,indexId:n,attribute:t.attribute,label:t.attribute,refinements:c.filter(function(e){return e.attribute===t.attribute}).sort(function(e,t){return"numeric"===e.type?e.value-t.value:0}),refine:function(e){return Aa(r,e)}}])},[])}function Ta(e,t){switch(e=e.resetPage(),t.type){case"facet":return e.removeFacetRefinement(t.attribute,String(t.value));case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attribute,String(t.value));case"hierarchical":return e.removeHierarchicalFacetRefinement(t.attribute);case"exclude":return e.removeExcludeRefinement(t.attribute,String(t.value));case"numeric":return e.removeNumericRefinement(t.attribute,t.operator,String(t.value));case"tag":return e.removeTagRefinement(String(t.value));case"query":return e.setQueryParameter("query","");default:return e}}function Aa(e,t){e.setState(Ta(e.state,t)).search()}function Da(e){var t=function(e){if("numeric"===e.type)return Number(e.name);if("escapedValue"in e)return e.escapedValue;return e.name}(e),r=e.operator?"".concat(function(e){switch(e){case">=":return"â¥";case"<=":return"â¤";default:return e}}(e.operator)," ").concat(e.name):e.name,t={attribute:e.attribute,type:e.type,value:t,label:r};return void 0!==e.operator&&(t.operator=e.operator),void 0!==e.count&&(t.count=e.count),void 0!==e.exhaustive&&(t.exhaustive=e.exhaustive),t}function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Na(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wa(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Na(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ka(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ka(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Na(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ca(u){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(u,Ha()),function(t){var e=t||{},r=e.escapeHTML,n=void 0===r||r,r=e.transformItems,i=void 0===r?function(e){return e}:r,a=e.objectIDs,o=e.limit,c=e.threshold,s=e.queryParameters;if(a&&0!==a.length)return{dependsOn:"recommend",$$type:"ais.frequentlyBoughtTogether",init:function(e){u(Wa(Wa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);u(Wa(Wa({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){e=e.results;return null==e?{items:[],widgetParams:t}:(n&&0<e.hits.length&&(e.hits=et(e.hits)),{items:i(e.hits,{results:e}),widgetParams:t})},dispose:function(e){e=e.recommendState;return l(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return a.reduce(function(e,t){return e.addFrequentlyBoughtTogether({objectID:t,threshold:c,maxRecommendations:o,queryParameters:Wa(Wa({},s),n?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(Ha("The `objectIDs` option is required."))}}var Ha=a({name:"frequently-bought-together",connector:!0});function Ma(e){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function La(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$a(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Ma(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ma(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ma(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):$a(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var Ua=a({name:"geo-search",connector:!0});function Qa(e){return e.insideBoundingBox||""}function Ba(e,t){return e.setQueryParameter("insideBoundingBox",t)}function qa(g){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(g,Ua()),function(c){function s(e){if(e.aroundLatLng){var e=e.aroundLatLng,t=e.match(Pt);if(t)return{lat:parseFloat(t[1]),lng:parseFloat(t[2])};throw new Error('Invalid value for "aroundLatLng" parameter: "'.concat(e,'"'))}}function u(){return p.internalToggleRefineOnMapMove()}function a(e,t){return function(){p.isRefineOnMapMove=!p.isRefineOnMapMove,t(e)}}function l(){return p.isRefineOnMapMove}function f(){return p.internalSetMapMoveSinceLastRefine()}function o(t,r){return function(){var e=!0!==p.hasMapMoveSinceLastRefine;p.hasMapMoveSinceLastRefine=!0,e&&r(t)}}function h(){return p.hasMapMoveSinceLastRefine}var d,e=c||{},t=e.enableRefineOnMapMove,e=e.transformItems,m=void 0===e?function(e){return e}:e,p={isRefineOnMapMove:void 0===t||t,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:S,internalSetMapMoveSinceLastRefine:S};return{$$type:Va,init:function(e){var t=e.instantSearchInstance;p.internalToggleRefineOnMapMove=a(e,S),p.internalSetMapMoveSinceLastRefine=o(e,S),g(La(La({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.helper,r=e.instantSearchInstance,t=t.state,n=Boolean(t.aroundLatLng)&&Boolean(p.lastRefinePosition)&&t.aroundLatLng!==p.lastRefinePosition,i=!t.insideBoundingBox&&Boolean(p.lastRefineBoundingBox)&&t.insideBoundingBox!==p.lastRefineBoundingBox,n=((n||i)&&(p.hasMapMoveSinceLastRefine=!1),p.lastRefinePosition=t.aroundLatLng||"",p.lastRefineBoundingBox=Qa(t),p.internalToggleRefineOnMapMove=a(e,this.render.bind(this)),p.internalSetMapMoveSinceLastRefine=o(e,this.render.bind(this)),this.getWidgetRenderState(e));d("view:internal",n.items),g(La(La({},n),{},{instantSearchInstance:r}),!1)},getWidgetRenderState:function(e){var t,r,n,i=e.helper,a=e.results,e=e.instantSearchInstance,o=i.state,a=a?m(a.hits.filter(function(e){return e._geoloc}),{results:a}):[];return d=d||pt({instantSearchInstance:e,getIndex:function(){return i.getIndex()},widgetType:Va}),{items:a,position:s(o),currentRefinement:(e=o).insideBoundingBox&&Rt(e.insideBoundingBox),refine:function(e){var t=e.northEast,e=e.southWest,t=[t.lat,t.lng,e.lat,e.lng].join();n.setState(Ba(n.state,t).resetPage()).search(),p.hasMapMoveSinceLastRefine=!1,p.lastRefineBoundingBox=t},sendEvent:d,clearMapRefinement:(r=n=i,function(){r.setQueryParameter("insideBoundingBox",void 0).search()}),isRefinedWithMap:(t=o,function(){return Boolean(t.insideBoundingBox)}),toggleRefineOnMapMove:u,isRefineOnMapMove:l,setMapMoveSinceLastRefine:f,hasMapMoveSinceLastRefine:h,widgetParams:c}},getRenderState:function(e,t){return La(La({},e),{},{geoSearch:this.getWidgetRenderState(t)})},dispose:function(e){e=e.state;return r(),e.setQueryParameter("insideBoundingBox",void 0)},getWidgetUiState:function(e,t){t=Qa(t.searchParameters);return!t||e&&e.geoSearch&&e.geoSearch.boundingBox===t?e:La(La({},e),{},{geoSearch:{boundingBox:t}})},getWidgetSearchParameters:function(e,t){t=t.uiState;return t&&t.geoSearch?Ba(e,t.geoSearch.boundingBox):e.setQueryParameter("insideBoundingBox",void 0)}}}}var Va="ais.geoSearch";function Ja(e){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var za=["name","escapedValue","data","path"];function Xa(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xa(Object(r),!0).forEach(function(e){Ka(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xa(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ka(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Ja(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ja(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ja(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ga(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Za(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Ya(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ya(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eo(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(s,to()),function(u){var e=u||{},l=e.attributes,t=e.separator,f=void 0===t?" > ":t,t=e.rootPath,n=void 0===t?null:t,t=e.showParentLevel,i=void 0===t||t,t=e.limit,a=void 0===t?10:t,t=e.showMore,h=void 0!==t&&t,t=e.showMoreLimit,o=void 0===t?20:t,t=e.sortBy,d=void 0===t?ro:t,t=e.transformItems,m=void 0===t?function(e){return e}:t;if(!l||!Array.isArray(l)||0===l.length)throw new Error(to("The `attributes` option expects an array of strings."));if(!0===h&&o<=a)throw new Error(to("The `showMoreLimit` option must be greater than `limit`."));var p,g,y=Za(l,1)[0],c=function(){};function v(){c()}var b=!1;function S(){return b?o:a}return{$$type:"ais.hierarchicalMenu",init:function(e){var t=e.instantSearchInstance;s(x(x({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t,r,n=e.instantSearchInstance;t=e,c=function(){b=!b,r.render(t)},s(x(x({},(r=this).getWidgetRenderState(e)),{},{instantSearchInstance:n}),!1)},dispose:function(e){e=e.state;return r(),e.removeHierarchicalFacet(y).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return x(x({},e),{},{hierarchicalMenu:x(x({},e.hierarchicalMenu),{},Ka({},y,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=this,n=e.results,i=e.state,a=e.createURL,o=e.instantSearchInstance,c=e.helper,e=[],s=!1;return p=p||ct({instantSearchInstance:o,helper:c,attribute:function(e){e=e.split(f).length-1;return l[e]},widgetType:this.$$type}),g=g||function(e){p("click:internal",e),c.toggleFacetRefinement(y,e).search()},n&&(o=(o=n.getFacetValues(y,{sortBy:d,facetOrdering:d===ro}))&&!Array.isArray(o)&&o.data?o.data:[],t=(i.maxValuesPerFacet||0)>S()?o.length<=S():o.length<S(),s=h&&(b||!t),e=m(function i(e){return e.slice(0,S()).map(function(e){var t=e.name,r=e.escapedValue,n=e.data,e=(e.path,x(x({},Ga(e,za)),{},{value:r,label:t,data:null}));return Array.isArray(n)&&(e.data=i(n)),e})}(o),{results:n})),{items:e,refine:g,canRefine:0<e.length,createURL:function(t){return a(function(e){return r.getWidgetUiState(e,{searchParameters:i.resetPage().toggleFacetRefinement(y,t),helper:c})})},sendEvent:p,widgetParams:u,isShowingMore:b,toggleShowMore:v,canToggleShowMore:s}},getWidgetUiState:function(e,t){var t=t.searchParameters.getHierarchicalFacetBreadcrumb(y);return e=x(x({},e),{},{hierarchicalMenu:x(x({},e.hierarchicalMenu),{},Ka({},y,t))}),t=y,e.hierarchicalMenu&&(e.hierarchicalMenu[t]&&0!==e.hierarchicalMenu[t].length||delete e.hierarchicalMenu[t],0===Object.keys(e.hierarchicalMenu).length)&&delete e.hierarchicalMenu,e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[y];if(e.isConjunctiveFacet(y)||e.isDisjunctiveFacet(y))return e;e.isHierarchicalFacet(y)&&e.getHierarchicalFacetByName(y);var e=e.removeHierarchicalFacet(y).addHierarchicalFacet({name:y,attributes:l,separator:f,rootPath:n,showParentLevel:i}),r=e.maxValuesPerFacet||0,r=Math.max(r,h?o:a),e=e.setQueryParameter("maxValuesPerFacet",r);return t?e.addHierarchicalFacetRefinement(y,t.join(f)):e.setQueryParameters({hierarchicalFacetsRefinements:x(x({},e.hierarchicalFacetsRefinements),{},Ka({},y,[]))})}}}}var to=a({name:"hierarchical-menu",connector:!0}),ro=["name:asc"];function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function io(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ao(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?io(Object(r),!0).forEach(function(e){oo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):io(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function oo(e,t,r){return(t=function(e){e=function(e,t){if("object"!==no(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==no(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===no(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function co(r){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,so()),function(n){var i,a,e=n||{},t=e.escapeHTML,o=void 0===t||t,t=e.transformItems,c=void 0===t?function(e){return e}:t;return{$$type:"ais.hits",init:function(e){r(ao(ao({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(ao(ao({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1),t.sendEvent("view:internal",t.items)},getRenderState:function(e,t){return ao(ao({},e),{},{hits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||pt({instantSearchInstance:e,getIndex:function(){return r.getIndex()},widgetType:this.$$type}),a=a||gt({getIndex:function(){return r.getIndex()},widgetType:this.$$type,instantSearchInstance:e}),!t)return{hits:[],items:[],results:void 0,banner:void 0,sendEvent:i,bindEvent:a,widgetParams:n};o&&0<t.hits.length&&(t.hits=et(t.hits));var e=Mt(Nt(t.hits,t.page,t.hitsPerPage),t.queryID),e=c(e,{results:t});return{hits:e,items:e,results:t,banner:null==(e=t.renderingContent)||null==(t=e.widgets)||null==(e=t.banners)?void 0:e[0],sendEvent:i,bindEvent:a,widgetParams:n}},dispose:function(e){e=e.state;return s(),o?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return ao(ao({},e),{},oo({},t,void 0))},{})):e},getWidgetSearchParameters:function(e,t){return o?e.setQueryParameters(_):e}}}}var so=a({name:"hits",connector:!0});function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e){return function(e){if(Array.isArray(e))return fo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?fo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fo(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ho(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function mo(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ho(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==uo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===uo(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ho(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function po(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(n,go()),function(o){var e=o||{},t=e.items,e=e.transformItems,c=void 0===e?function(e){return e}:e;if(!Array.isArray(t))throw new Error(go("The `items` option expects an array of objects."));var s=t,e=s.filter(function(e){return!0===e.default});if(0===e.length)throw new Error(go("A default value must be specified in `items`."));if(1<e.length)throw new Error(go("More than one default value is specified in `items`."));var r=e[0],u=function(t){return function(e){return(e||0===e?t.setQueryParameter("hitsPerPage",e):t.setQueryParameter("hitsPerPage",void 0)).search()}},l=function(e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(t){return n(function(e){return i(e,{searchParameters:r.resetPage().setQueryParameter("hitsPerPage",t||0===t?t:void 0),helper:a})})}};return{$$type:"ais.hitsPerPage",init:function(e){var t=e.state,r=e.instantSearchInstance;s.some(function(e){return Number(t.hitsPerPage)===Number(e.value)})||(s=[{value:"",label:""}].concat(lo(s))),n(mo(mo({},this.getWidgetRenderState(e)),{},{instantSearchInstance:r}),!0)},render:function(e){var t=e.instantSearchInstance;n(mo(mo({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),e.setQueryParameter("hitsPerPage",void 0)},getRenderState:function(e,t){return mo(mo({},e),{},{hitsPerPage:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r=e.state,n=e.results,i=e.createURL,e=e.helper,a=!!n&&0<n.nbHits;return{items:c((t=r.hitsPerPage,s.map(function(e){return mo(mo({},e),{},{isRefined:Number(e.value)===Number(t)})})),{results:n}),refine:u(e),createURL:l({state:r,createURL:i,getWidgetUiState:this.getWidgetUiState,helper:e}),hasNoResults:!a,canRefine:a,widgetParams:o}},getWidgetUiState:function(e,t){t=t.searchParameters.hitsPerPage;return void 0===t||t===r.value?e:mo(mo({},e),{},{hitsPerPage:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameters({hitsPerPage:t.hitsPerPage||r.value})}}}}var go=a({name:"hits-per-page",connector:!0});function yo(e){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vo=["page"],bo=["clickAnalytics","userToken"];function So(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?So(Object(r),!0).forEach(function(e){Oo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Oo(e,t,r){return(t=function(e){e=function(e,t){if("object"!==yo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===yo(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jo(e){return function(e){if(Array.isArray(e))return wo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?wo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wo(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Po(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var Ro=a({name:"infinite-hits",connector:!0});function Eo(e){e=e||{};e.page;return Po(e,vo)}function Fo(e){e=e||{};e.clickAnalytics,e.userToken;return Po(e,bo)}function xo(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(i,Ro()),function(m){var r,n,p,g,y,v,e=m||{},t=e.escapeHTML,b=void 0===t||t,t=e.transformItems,S=void 0===t?function(e){return e}:t,t=e.cache,O=void 0===t?(n=r=null,{read:function(e){e=e.state;return Zt(n,Eo(e))?r:null},write:function(e){var t=e.state,e=e.hits;n=Eo(t),r=e}}):t,j=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.min.apply(Math,[e].concat(jo(t)))},w=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.max.apply(Math,[e].concat(jo(t)))};return{$$type:"ais.infiniteHits",init:function(e){i(I(I({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e);i(I(I({},e),{},{instantSearchInstance:t}),!1),y("view:internal",e.currentPageHits)},getRenderState:function(e,t){return I(I({},e),{},{infiniteHits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r,n,i,a=e.results,o=e.helper,c=e.parent,s=e.state,e=e.instantSearchInstance,u=[],c=c.getPreviousState()||s,s=O.read({state:Fo(c)})||{},l=null==a||null==(l=a.renderingContent)||null==(l=l.widgets)||null==(l=l.banners)?void 0:l[0],f=a?(h=void 0===(h=c.page)?0:h,b&&0<a.hits.length&&(a.hits=et(a.hits)),d=Mt(Nt(a.hits,a.page,a.hitsPerPage),a.queryID),d=S(d,{results:a}),t=!1,Yt(e.mainIndex,function(e){!t&&e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})&&(t=!0)}),f=!(null!=(f=c.disjunctiveFacets)&&f.length||(c.facets||[]).filter(function(e){return"*"!==e}).length||null!=(f=c.hierarchicalFacets)&&f.length),void 0!==s[h]||a.__isArtificial||"idle"!==e.status||t&&f||(s[h]=d,O.write({state:Fo(c),hits:s})),u=d,0===j(c,s)):(p=function(){n.overrideStateWithoutTriggeringChangeEvent(I(I({},n.state),{},{page:j(n.state,O.read({state:Fo(n.state)})||{})-1})).searchWithoutTriggeringOnStateChange()},r=n=o,g=function(){r.setPage(w(r.state,O.read({state:Fo(r.state)})||{})+1).search()},y=pt({instantSearchInstance:e,getIndex:function(){return o.getIndex()},widgetType:this.$$type}),v=gt({getIndex:function(){return o.getIndex()},widgetType:this.$$type,instantSearchInstance:e}),void 0===c.page||0===j(c,s)),h=(i=s,Object.keys(i).map(Number).sort(function(e,t){return e-t}).reduce(function(e,t){return e.concat(i[t])},[])),d=!a||a.nbPages<=w(c,s)+1;return{hits:h,items:h,currentPageHits:u,sendEvent:y,bindEvent:v,banner:l,results:a,showPrevious:p,showMore:g,isFirstPage:f,isLastPage:d,widgetParams:m}},dispose:function(e){e=e.state,a(),e=e.setQueryParameter("page",void 0);return b?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return I(I({},e),{},Oo({},t,void 0))},{})):e},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?I(I({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,r=e,e=(b&&(r=e.setQueryParameters(_)),t.page?t.page-1:0);return r.setQueryParameter("page",e)}}}}var Io=["name","escapedValue","path"];function _o(e){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Do(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Do(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ko(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ko(Object(r),!0).forEach(function(e){No(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function No(e,t,r){return(t=function(e){e=function(e,t){if("object"!==_o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===_o(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wo(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,Co()),function(l){var f,h,d,e=l||{},m=e.attribute,t=e.limit,n=void 0===t?10:t,t=e.showMore,p=void 0!==t&&t,t=e.showMoreLimit,i=void 0===t?20:t,t=e.sortBy,g=void 0===t?Ho:t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(!m)throw new Error(Co("The `attribute` option is required."));if(!0===p&&i<=n)throw new Error(Co("The `showMoreLimit` option must be greater than `limit`."));var v=!1,b=function(){};function S(){b()}function O(){return v?i:n}return{$$type:"ais.menu",init:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return a(),e.removeHierarchicalFacet(m).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return T(T({},e),{},{menu:T(T({},e.menu),{},No({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.createURL,o=e.instantSearchInstance,c=e.helper,s=[],u=!1;return f=f||ct({instantSearchInstance:o,helper:c,attribute:m,widgetType:this.$$type}),h=h||function(t){return a(function(e){return n.getWidgetUiState(e,{searchParameters:c.state.resetPage().toggleFacetRefinement(m,t),helper:c})})},d=d||function(e){var t=Ao(c.getHierarchicalFacetBreadcrumb(m),1)[0];f("click:internal",e||t),c.toggleFacetRefinement(m,e||t).search()},e.results&&(t=e,r=this,b=function(){v=!v,r.render(t)}),i&&(e=(o=i.getFacetValues(m,{sortBy:g,facetOrdering:g===Ho}))&&!Array.isArray(o)&&o.data?o.data:[],u=p&&(v||e.length>O()),s=y(e.slice(0,O()).map(function(e){var t=e.name,r=e.escapedValue;e.path;return T(T({},To(e,Io)),{},{label:t,value:r})}),{results:i})),{items:s,createURL:h,refine:d,sendEvent:f,canRefine:0<s.length,widgetParams:l,isShowingMore:v,toggleShowMore:S,canToggleShowMore:u}},getWidgetUiState:function(e,t){var t=Ao(t.searchParameters.getHierarchicalFacetBreadcrumb(m),1)[0];return e=T(T({},e),{},{menu:T(T({},e.menu),{},No({},m,t))}),t=m,e.menu&&(void 0===e.menu[t]&&delete e.menu[t],0===Object.keys(e.menu).length)&&delete e.menu,e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.menu&&t.menu[m];return e.isConjunctiveFacet(m)||e.isDisjunctiveFacet(m)?e:(r=(e=e.removeHierarchicalFacet(m).addHierarchicalFacet({name:m,attributes:[m]})).maxValuesPerFacet||0,r=Math.max(r,p?i:n),e=e.setQueryParameter("maxValuesPerFacet",r),t?e.addHierarchicalFacetRefinement(m,t):e.setQueryParameters({hierarchicalFacetsRefinements:T(T({},e.hierarchicalFacetsRefinements),{},No({},m,[]))}))}}}}var Co=a({name:"menu",connector:!0}),Ho=["isRefined","name:asc"];function Mo(e){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||Lo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lo(e,t){var r;if(e)return"string"==typeof e?Uo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uo(e,t):void 0}function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qo(Object(r),!0).forEach(function(e){Bo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Bo(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Mo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Mo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Mo(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qo(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,Vo()),function(h){var d,e=h||{},t=e.attribute,m=void 0===t?"":t,t=e.items,p=void 0===t?[]:t,t=e.transformItems,g=void 0===t?function(e){return e}:t;if(""===m)throw new Error(Vo("The `attribute` option is required."));if(p&&0!==p.length)return d={},{$$type:Jo,init:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeNumericRefinement(m)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(m),r=t["="]&&t["="][0];return r||0===r?A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},Bo({},m,"".concat(t["="])))}):(r=t[">="]&&t[">="][0]||"",t=t["<="]&&t["<="][0]||"",e=A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},Bo({},m,"".concat(r,":").concat(t)))}),r=m,e.numericMenu&&(":"===e.numericMenu[r]&&delete e.numericMenu[r],0===Object.keys(e.numericMenu).length)&&delete e.numericMenu,e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.numericMenu&&t.numericMenu[m],e=e.setQueryParameters({numericRefinements:A(A({},e.numericRefinements),{},Bo({},m,{}))});return t?-1===t.indexOf(":")?e.addNumericRefinement(m,"=",Number(t)):(r=(t=$o(t.split(":").map(parseFloat),2))[0],t=t[1],r=v(r)?e.addNumericRefinement(m,">=",r):e,v(t)?r.addNumericRefinement(m,"<=",t):r):e},getRenderState:function(e,t){return A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},Bo({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var n,t,i=this,r=e.results,a=e.state,o=e.instantSearchInstance,c=e.helper,s=e.createURL,e=(d.refine||(d.refine=function(e){var t=Ko(c.state,m,e);d.sendEvent("click:internal",e),c.setState(t).search()}),d.createURL||(d.createURL=function(r){return function(t){return s(function(e){return i.getWidgetUiState(e,{searchParameters:Ko(r,m,t),helper:c})})}}),d.sendEvent||(d.sendEvent=zo({instantSearchInstance:o})),!r||0===r.nbHits),o=(n=a,p.map(function(e){var t=e.start,r=e.end,e=e.label;return{label:e,value:encodeURI(JSON.stringify({start:t,end:r})),isRefined:Xo(n,m,{start:t,end:r,label:e})}})),u=!0,l=function(e,t){var r,n,i,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return n=!(r=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return r=e.done,e},e:function(e){n=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(n)throw i}}};if(Array.isArray(e)||(o=Lo(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(o);try{for(l.s();!(t=l.n()).done;){var f=t.value;if(f.isRefined&&"{}"!==decodeURI(f.value)){u=!1;break}}}catch(e){l.e(e)}finally{l.f()}return{createURL:d.createURL(a),items:g(o,{results:r}),hasNoResults:e,canRefine:!(e&&u),refine:d.refine,sendEvent:d.sendEvent,widgetParams:h}}};throw new Error(Vo("The `items` option expects an array of objects."))}}var Vo=a({name:"numeric-menu",connector:!0}),Jo="ais.numericMenu",zo=function(e){var t=e.instantSearchInstance;return function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}};function Xo(e,t,r){var n=e.getNumericRefinements(t);return void 0!==r.start&&void 0!==r.end?r.start===r.end?Go(n,"=",r.start):Go(n,">=",r.start)&&Go(n,"<=",r.end):void 0!==r.start?Go(n,">=",r.start):void 0!==r.end?Go(n,"<=",r.end):void 0===r.start&&void 0===r.end&&Object.keys(n).every(function(e){return 0===(n[e]||[]).length})}function Ko(e,t,r){var r=JSON.parse(decodeURI(r)),n=e.getNumericRefinements(t);if(void 0===r.start&&void 0===r.end)return e.removeNumericRefinement(t);if(Xo(e,t,r)||(e=e.removeNumericRefinement(t)),void 0!==r.start&&void 0!==r.end){if(r.start>r.end)throw new Error("option.start should be > to option.end");if(r.start===r.end)return e=Go(n,"=",r.start)?e.removeNumericRefinement(t,"=",r.start):e.addNumericRefinement(t,"=",r.start)}return void 0!==r.start&&(e=(e=Go(n,">=",r.start)?e.removeNumericRefinement(t,">=",r.start):e).addNumericRefinement(t,">=",r.start)),"number"==typeof(e=void 0!==r.end?(e=Go(n,"<=",r.end)?e.removeNumericRefinement(t,"<=",r.end):e).addNumericRefinement(t,"<=",r.end):e).page&&(e.page=0),e}function Go(e,t,r){return void 0!==e[t]&&e[t].includes(r)}function Zo(e){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tc(n.key),n)}}function ec(e,t,r){(t=tc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function tc(e){e=function(e,t){if("object"!==Zo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Zo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Zo(e)?e:String(e)}var rc=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");ec(this,"currentPage",void 0),ec(this,"total",void 0),ec(this,"padding",void 0),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}var e,r,n;return e=t,(r=[{key:"pages",value:function(){var e,t=this.total,r=this.currentPage,n=this.padding;return 0===t?[0]:ur((e=this.nbPagesDisplayed(n,t))===t?{end:t}:{start:r-(n=this.calculatePaddingLeft(r,n,t,e)),end:r+(e-n)})}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,r,n){return e<=t?e:r-t<=e?n-(r-e):t}},{key:"isLastPage",value:function(){return this.currentPage>=this.total-1}},{key:"isFirstPage",value:function(){return this.currentPage<=0}}])&&Yo(e.prototype,r),n&&Yo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nc(e){return(nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ic(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ac(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ic(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==nc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==nc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===nc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ic(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function oc(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,cc()),function(a){var e=a||{},o=e.totalPages,e=e.padding,c=new rc({currentPage:0,total:0,padding:void 0===e?3:e}),s={};return{$$type:"ais.pagination",init:function(e){var t=e.instantSearchInstance;r(ac(ac({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(ac(ac({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("page",void 0)},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?ac(ac({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.page?t.page-1:0;return e.setQueryParameter("page",t)},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,i=e.createURL,e=(s.refine||(s.refine=function(e){r.setPage(e),r.search()}),s.createURL||(s.createURL=function(t){return i(function(e){return ac(ac({},e),{},{page:t+1})})}),n.page||0),n=(n=(n=t||{nbPages:0}).nbPages,void 0!==o?Math.min(o,n):n);return c.currentPage=e,c.total=n,{createURL:s.createURL,refine:s.refine,canRefine:1<n,currentRefinement:e,nbHits:(null==t?void 0:t.nbHits)||0,nbPages:n,pages:t?c.pages():[],isFirstPage:c.isFirstPage(),isLastPage:c.isLastPage(),widgetParams:a}},getRenderState:function(e,t){return ac(ac({},e),{},{pagination:this.getWidgetRenderState(t)})}}}}var cc=a({name:"pagination",connector:!0});function sc(e){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function lc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?uc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==sc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===sc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):uc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function fc(e){return function(e){if(Array.isArray(e))return hc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?hc(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hc(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dc=a({name:"query-rules",connector:!0});function mc(e){var i,a,o,t=this.helper,r=this.initialRuleContexts,n=this.trackedFilters,c=this.transformRuleContexts,e=e.state,s=e.ruleContexts||[],n=(i=(n={helper:t,sharedHelperState:e,trackedFilters:n}).helper,a=n.sharedHelperState,o=n.trackedFilters,Object.keys(o).reduce(function(e,t){var r=Tt(i.lastResults||{},a,!0).filter(function(e){return e.attribute===t}).map(function(e){return e.numericValue||e.name}),n=(0,o[t])(r);return[].concat(fc(e),fc(r.filter(function(e){return n.includes(e)}).map(function(e){return"ais-".concat(t,"-").concat(e).replace(/[^a-z0-9-_]+/gi,"_")})))},[])),c=c([].concat(fc(r),fc(n))).slice(0,10);Zt(s,c)||t.overrideStateWithoutTriggeringChangeEvent(lc(lc({},e),{},{ruleContexts:c}))}function pc(l){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(l,dc()),function(i){var a,e=i||{},t=e.trackedFilters,o=void 0===t?{}:t,t=e.transformRuleContexts,c=void 0===t?function(e){return e}:t,t=e.transformItems,r=void 0===t?function(e){return e}:t,s=(Object.keys(o).forEach(function(e){if("function"!=typeof o[e])throw new Error(dc("'The \"".concat(e,'" filter value in the `trackedFilters` option expects a function.')))}),0<Object.keys(o).length),u=[];return{$$type:"ais.queryRules",init:function(e){var t=e.helper,r=e.state,n=e.instantSearchInstance;u=r.ruleContexts||[],a=mc.bind({helper:t,initialRuleContexts:u,trackedFilters:o,transformRuleContexts:c}),s&&(([r.disjunctiveFacetsRefinements,r.facetsRefinements,r.hierarchicalFacetsRefinements,r.numericRefinements].some(function(e){return Boolean(e&&0<Object.keys(e).length)})||Boolean(i.transformRuleContexts))&&a({state:r}),t.on("change",a)),l(lc(lc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:n}),!0)},render:function(e){var t=e.instantSearchInstance;l(lc(lc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getWidgetRenderState:function(e){var e=e.results,t=(e||{}).userData;return{items:r(void 0===t?[]:t,{results:e}),widgetParams:i}},getRenderState:function(e,t){return lc(lc({},e),{},{queryRules:this.getWidgetRenderState(t)})},dispose:function(e){var t=e.helper,e=e.state;return n(),s?(t.removeListener("change",a),e.setQueryParameter("ruleContexts",u)):e}}}}function gc(e){return(gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yc(Object(r),!0).forEach(function(e){vc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function vc(e,t,r){return(t=function(e){e=function(e,t){if("object"!==gc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==gc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===gc(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Sc(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sc(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oc=a({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),jc="ais.range";function wc(e){var t=e.min,r=e.max,e=e.precision,e=Math.pow(10,e);return{min:t&&Math.floor(t*e)/e,max:r&&Math.ceil(r*e)/e}}function Pc(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,Oc()),function(c){var e=c||{},t=e.attribute,u=void 0===t?"":t,l=e.min,f=e.max,t=e.precision,h=void 0===t?0:t;if(!u)throw new Error(Oc("The `attribute` option is required."));if(v(l)&&v(f)&&f<l)throw new Error(Oc("The `max` option can't be lower than `min`."));var s={from:function(e){return e.toLocaleString()},to:function(e){return Number(Number(e).toFixed(h)).toLocaleString()}},i=function(e,t,r,n){var e=e.state,i=t.min,t=t.max,a=bc(e.getNumericRefinement(u,">=")||[],1)[0],o=bc(e.getNumericRefinement(u,"<=")||[],1)[0],c=void 0===r||""===r,s=void 0===n||""===n,r=wc({min:c?void 0:parseFloat(r),max:s?void 0:parseFloat(n),precision:h}),n=r.min,r=r.max,c=v(l)||i!==n?v(l)&&c?l:n:void 0,n=v(f)||t!==r?v(f)&&s?f:r:void 0,s=void 0===c,r=v(i)&&i<=c,s=s||v(c)&&(!v(i)||r),i=void 0===n,r=v(n)&&n<=t,i=i||v(n)&&(!v(t)||r);return(a!==c||o!==n)&&s&&i?(e=e.removeNumericRefinement(u),v(c)&&(e=e.addNumericRefinement(u,">=",c)),(e=v(n)?e.addNumericRefinement(u,"<=",n):e).resetPage()):null};function d(r,n){return function(){var e=bc(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[void 0,void 0],2),t=e[0],e=e[1],t=i(r,n,t,e);t&&r.setState(t).search()}}return{$$type:jc,init:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return D(D({},e),{},{range:D(D({},e.range),{},vc({},u,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=e.results,n=e.helper,e=e.instantSearchInstance,i=Ot(r&&r.disjunctiveFacets||[],function(e){return e.name===u}),i=i&&i.stats||{min:void 0,max:void 0},a=(i=i,a=v(l)?l:v(i.min)?i.min:0,i=v(f)?f:v(i.max)?i.max:0,wc({min:a,max:i,precision:h})),o=(o=bc((i=n).getNumericRefinement(u,">=")||[],1)[0],i=bc(i.getNumericRefinement(u,"<=")||[],1)[0],[v(o)?o:-1/0,v(i)?i:1/0]),i=d(n,r?a:{min:void 0,max:void 0});return{refine:i,canRefine:a.min!==a.max,format:s,range:a,sendEvent:(t=e,function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}),widgetParams:D(D({},c),{},{precision:h}),start:o}},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(u).removeNumericRefinement(u)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(u),r=t[">="],r=void 0===r?[]:r,t=t["<="],t=void 0===t?[]:t;return 0===r.length&&0===t.length?e:D(D({},e),{},{range:D(D({},e.range),{},vc({},u,"".concat(r,":").concat(t)))})},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,e=e.addDisjunctiveFacet(u).setQueryParameters({numericRefinements:D(D({},e.numericRefinements),{},vc({},u,{}))}),t=(v(l)&&(e=e.addNumericRefinement(u,">=",l)),v(f)&&(e=e.addNumericRefinement(u,"<=",f)),t.range&&t.range[u]);return e=t&&-1!==t.indexOf(":")&&(r=(t=bc(t.split(":").map(parseFloat),2))[0],t=t[1],v(r)&&(!v(l)||l<r)&&(e=(e=e.removeNumericRefinement(u,">=")).addNumericRefinement(u,">=",r)),v(t))&&(!v(f)||t<f)?(e=e.removeNumericRefinement(u,"<=")).addNumericRefinement(u,"<=",t):e}}}}function Rc(e){return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ec=["name","escapedValue"],Fc=["escapedValue","value"];function xc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xc(Object(r),!0).forEach(function(e){Ic(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ic(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Rc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Rc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Rc(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _c(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Tc(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(s,Ac()),function(h){var e=h||{},d=e.attribute,t=e.operator,i=void 0===t?"or":t,t=e.limit,m=void 0===t?10:t,t=e.showMore,p=void 0!==t&&t,t=e.showMoreLimit,a=void 0===t?20:t,t=e.sortBy,g=void 0===t?Dc:t,t=e.escapeFacetValues,c=void 0===t||t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(!d)throw new Error(Ac("The `attribute` option is required."));if(!/^(and|or)$/.test(i))throw new Error(Ac('The `operator` must one of: `"and"`, `"or"` (got "'.concat(i,'").')));if(!0===p&&a<=m)throw new Error(Ac("`showMoreLimit` should be greater than `limit`."));function v(e){var t=e.name,r=e.escapedValue;return k(k({},_c(e,Ec)),{},{value:r,label:t,highlighted:t})}var b,S,O,j=[],w=!0,P=!1,R=function(){};function E(){R()}function F(){return P?a:m}function x(a,o){return function(i){return function(e){var t,r=i.instantSearchInstance,n=i.results;""===e&&j?s(k(k({},o.getWidgetRenderState(k(k({},i),{},{results:b}))),{},{instantSearchInstance:r}),!1):(t={highlightPreTag:(c?_:u).highlightPreTag,highlightPostTag:(c?_:u).highlightPostTag},a.searchForFacetValues(d,e,Math.min(F(),100),t).then(function(e){e=c?e.facetHits.map(function(e){return Ke(Ke({},e),{},{highlighted:Ze(e.highlighted)})}):e.facetHits,e=y(e.map(function(e){var t=e.escapedValue,r=e.value;return k(k({},_c(e,Fc)),{},{value:t,label:r})}),{results:n});s(k(k({},o.getWidgetRenderState(k(k({},i),{},{results:b}))),{},{items:e,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:r}),!1)}))}}}var I=function(){return function(){}};return{$$type:"ais.refinementList",init:function(e){s(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){s(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return k(k({},e),{},{refinementList:k(k({},e.refinementList),{},Ic({},d,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.state,o=e.createURL,c=e.instantSearchInstance,s=e.helper,u=[],l=[],c=(O&&S&&I||(O=ct({instantSearchInstance:c,helper:s,attribute:d,widgetType:this.$$type}),S=function(e){O("click:internal",e),s.toggleFacetRefinement(d,e).search()},I=x(s,this)),i&&(l=(c=i.getFacetValues(d,{sortBy:g,facetOrdering:g===Dc}))&&Array.isArray(c)?c:[],u=y(l.slice(0,F()).map(v),{results:i}),c=a.maxValuesPerFacet,f=F(),w=f<c?l.length<=f:l.length<f,b=i,j=u,e.results)&&(t=e,r=this,R=function(){P=!P,r.render(t)}),I&&I(e)),l=P&&j.length>m,f=p&&!w;return{createURL:function(t){return o(function(e){return n.getWidgetUiState(e,{searchParameters:a.resetPage().toggleFacetRefinement(d,t),helper:s})})},items:u,refine:S,searchForItems:c,isFromSearch:!1,canRefine:0<u.length,widgetParams:h,isShowingMore:P,canToggleShowMore:l||f,toggleShowMore:E,sendEvent:O,hasExhaustiveItems:w}},dispose:function(e){e=e.state,r(),e=e.setQueryParameter("maxValuesPerFacet",void 0);return"and"===i?e.removeFacet(d):e.removeDisjunctiveFacet(d)},getWidgetUiState:function(e,t){var t=t.searchParameters,t="or"===i?t.getDisjunctiveRefinements(d):t.getConjunctiveRefinements(d);return e=k(k({},e),{},{refinementList:k(k({},e.refinementList),{},Ic({},d,t))}),t=d,e.refinementList&&(e.refinementList[t]&&0!==e.refinementList[t].length||delete e.refinementList[t],0===Object.keys(e.refinementList).length)&&delete e.refinementList,e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,n="or"===i;return e.isHierarchicalFacet(d)||n&&e.isConjunctiveFacet(d)||!n&&e.isDisjunctiveFacet(d)?e:(t=t.refinementList&&t.refinementList[d],r=(e=n?e.addDisjunctiveFacet(d).removeDisjunctiveFacetRefinement(d):e.addFacet(d).removeFacetRefinement(d)).maxValuesPerFacet||0,r=Math.max(r,p?a:m),e=e.setQueryParameter("maxValuesPerFacet",r),t?t.reduce(function(e,t){return n?e.addDisjunctiveFacetRefinement(d,t):e.addFacetRefinement(d,t)},e):e.setQueryParameters(Ic({},r=n?"disjunctiveFacetsRefinements":"facetsRefinements",k(k({},e[r]),{},Ic({},d,[])))))}}}}var Ac=a({name:"refinement-list",connector:!0}),Dc=["isRefined","count:desc","name:asc"];function kc(e){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Nc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==kc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==kc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===kc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Nc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Cc(l){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(l,Hc()),function(t){var e=t||{},r=e.escapeHTML,n=void 0===r||r,i=e.objectIDs,a=e.limit,o=e.threshold,c=e.fallbackParameters,s=e.queryParameters,r=e.transformItems,u=void 0===r?function(e){return e}:r;if(i&&0!==i.length)return{dependsOn:"recommend",$$type:"ais.relatedProducts",init:function(e){l(Wc(Wc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);l(Wc(Wc({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){e=e.results;return null==e?{items:[],widgetParams:t}:(n&&0<e.hits.length&&(e.hits=et(e.hits)),{items:u(e.hits,{results:e}),widgetParams:t})},dispose:function(e){e=e.recommendState;return f(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return i.reduce(function(e,t){return e.addRelatedProducts({objectID:t,maxRecommendations:a,threshold:o,fallbackParameters:Wc(Wc({},c),n?_:{}),queryParameters:Wc(Wc({},s),n?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(Hc("The `objectIDs` option is required."))}}var Hc=a({name:"related-products",connector:!0});function Mc(e){return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Lc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$c(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Mc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Mc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Mc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):$c(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Uc(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,Qc()),function(n){var i,a,e=(n||{}).queryHook,o=void 0===e?Bc:e;return{$$type:"ais.searchBox",init:function(e){var t=e.instantSearchInstance;r(Lc(Lc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(Lc(Lc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("query",void 0)},getRenderState:function(e,t){return Lc(Lc({},e),{},{searchBox:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.helper,r=e.instantSearchInstance,e=e.state;return i||(i=function(e){o(e,function(e){return t.setQuery(e).search()})},a=function(){t.setQuery("").search()}),{query:e.query||"",refine:i,clear:a,widgetParams:n,isSearchStalled:"stalled"===r.status}},getWidgetUiState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:Lc(Lc({},e),{},{query:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("query",t.query||"")}}}}var Qc=a({name:"search-box",connector:!0}),Bc=function(e,t){return t(e)};function qc(e){return(qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Jc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Vc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==qc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==qc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===qc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Vc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function zc(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S,c=(d(n,Xc()),{});return function(i){var e=i||{},a=e.items,e=e.transformItems,o=void 0===e?function(e){return e}:e;if(Array.isArray(a))return{$$type:"ais.sortBy",init:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e),r=e.currentRefinement;Ot(a,function(e){return e.value===r});n(Jc(Jc({},e),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(Jc(Jc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),c.initialIndex?e.setIndex(c.initialIndex):e},getRenderState:function(e,t){return Jc(Jc({},e),{},{sortBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,e=e.parent,e=(!c.initialIndex&&e&&(c.initialIndex=e.getIndexName()),c.setIndex||(c.setIndex=function(e){r.setIndex(e).search()}),!t||0===t.nbHits);return{currentRefinement:n.index,options:o(a,{results:t}),refine:c.setIndex,hasNoResults:e,canRefine:!e&&0<a.length,widgetParams:i}},getWidgetUiState:function(e,t){t=t.searchParameters.index;return Jc(Jc({},e),{},{sortBy:t!==c.initialIndex?t:void 0})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("index",t.sortBy||c.initialIndex||e.index)}};throw new Error(Xc("The `items` option expects an array of objects."))}}var Xc=a({name:"sort-by",connector:!0});function Kc(e){return(Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Zc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Gc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Kc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Kc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Kc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Gc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Yc(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(n,es()),function(r){return{$$type:"ais.stats",init:function(e){var t=e.instantSearchInstance;n(Zc(Zc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(Zc(Zc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){e()},getRenderState:function(e,t){return Zc(Zc({},e),{},{stats:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,e=e.state;return t?{hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbSortedHits:t.nbSortedHits,areHitsSorted:void 0!==t.appliedRelevancyStrictness&&0<t.appliedRelevancyStrictness&&t.nbSortedHits!==t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:r}:{hitsPerPage:e.hitsPerPage,nbHits:0,nbSortedHits:void 0,areHitsSorted:!1,nbPages:0,page:e.page||0,processingTimeMS:-1,query:e.query||"",widgetParams:r}}}}}var es=a({name:"stats",connector:!0});function ts(e){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rs(Object(r),!0).forEach(function(e){ns(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rs(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ns(e,t,r){return(t=function(e){e=function(e,t){if("object"!==ts(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ts(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ts(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function is(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?as(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?as(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function os(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(r,cs()),function(h){var d,m,p,g,y,e=h||{},v=e.attribute,t=e.on,e=e.off;if(v)return d=void 0!==e,m=yr(void 0===t||t).map(St),p=d?yr(e).map(St):void 0,y=function(t,e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(){r=r.resetPage();var e=t?m:p,e=(e&&e.forEach(function(e){r=r.removeDisjunctiveFacetRefinement(v,e)}),t?p:m);return e&&e.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),n(function(e){return i(e,{searchParameters:r,helper:a})})}},{$$type:ss,init:function(e){var t=e.instantSearchInstance;r(N(N({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(N(N({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(v)},getRenderState:function(e,t){return N(N({},e),{},{toggleRefinement:N(N({},e.toggleRefinement),{},ns({},v,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r,t,n,i=e.state,a=e.helper,o=e.results,c=e.createURL,e=e.instantSearchInstance,s=o?m.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}):m.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}),u={isRefined:s,count:0},l={isRefined:d&&!s,count:0},f=(o&&(t=yr(p||!1),r=o.getFacetValues(v,{})||[],f=m.map(function(t){return Ot(r,function(e){return e.escapedValue===St(String(t))})}).filter(function(e){return void 0!==e}),t=d?t.map(function(t){return Ot(r,function(e){return e.escapedValue===St(String(t))})}).filter(function(e){return void 0!==e}):[],u={isRefined:!!f.length&&f.every(function(e){return e.isRefined}),count:f.reduce(function(e,t){return e+t.count},0)||null},l={isRefined:!!t.length&&t.every(function(e){return e.isRefined}),count:t.reduce(function(e,t){return e+t.count},0)||r.reduce(function(e,t){return e+t.count},0)}),g=g||us({instantSearchInstance:e,attribute:v,on:m,helper:a}),s?l:u);return{value:{name:v,isRefined:s,count:o?f.count:null,onFacetValue:u,offFacetValue:l},createURL:y(s,{state:i,createURL:c,helper:a,getWidgetUiState:this.getWidgetUiState}),sendEvent:g,canRefine:Boolean(o?f.count:null),refine:(n=a,function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefined:!1}).isRefined;e?(m.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),d&&p.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})):(g("click:internal",e),d&&p.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),m.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})),n.search()}),widgetParams:h}},getWidgetUiState:function(e,t){var r=t.searchParameters,t=m&&m.every(function(e){return r.isDisjunctiveFacetRefined(v,e)});return t?N(N({},e),{},{toggle:N(N({},e.toggle),{},ns({},v,t))}):(null!=(t=e.toggle)&&delete t[v],e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState;return e.isHierarchicalFacet(v)||e.isConjunctiveFacet(v)?e:(r=e.addDisjunctiveFacet(v).removeDisjunctiveFacetRefinement(v),Boolean(t.toggle&&t.toggle[v])?(m&&m.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):d?(p&&p.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):r.setQueryParameters({disjunctiveFacetsRefinements:N(N({},e.disjunctiveFacetsRefinements),{},ns({},v,[]))}))}};throw new Error(cs("The `attribute` option is required."))}}var cs=a({name:"toggle-refinement",connector:!0}),ss="ais.toggleRefinement",us=function(e){var c=e.instantSearchInstance,s=e.helper,u=e.attribute,l=e.on;return function(){for(var e,t,r,n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];1===a.length?c.sendEventToInsights(a[0]):(e=a[1],t=void 0===(t=a[2])?"Filter Applied":t,r=(n=is(a[0].split(":"),2))[0],n=n[1],"click"!==r||void 0===l||e||c.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:ss,eventType:r,eventModifier:n,payload:{eventName:t,index:s.getIndex(),filters:l.map(function(e){return"".concat(u,":").concat(e)})},attribute:u}))}};function ls(e){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function hs(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fs(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ls(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ls(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ls(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):fs(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ds(f){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(f,ms()),function(t){var e=t||{},r=e.facetName,n=e.facetValue,i=e.limit,a=e.threshold,o=e.fallbackParameters,c=e.queryParameters,s=e.escapeHTML,u=void 0===s||s,s=e.transformItems,l=void 0===s?function(e){return e}:s;if(r&&!n||!r&&n)throw new Error(ms("When you provide facetName (received type ".concat(Ce(r),"), you must also provide facetValue (received type ").concat(Ce(n),").")));return{dependsOn:"recommend",$$type:"ais.trendingItems",init:function(e){f(hs(hs({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);f(hs(hs({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){e=e.results;return null==e?{items:[],widgetParams:t}:(u&&0<e.hits.length&&(e.hits=et(e.hits)),{items:l(e.hits,{results:e}),widgetParams:t})},dispose:function(e){e=e.recommendState;return h(),e.removeParams(this.$$id)},getWidgetParameters:function(e){return e.removeParams(this.$$id).addTrendingItems({facetName:r,facetValue:n,maxRecommendations:i,threshold:a,fallbackParameters:hs(hs({},o),u?_:{}),queryParameters:hs(hs({},c),u?_:{}),$$id:this.$$id})}}}}var ms=a({name:"trending-items",connector:!0});function ps(e){return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ys(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?gs(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ps(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ps(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gs(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function vs(l){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return d(l,bs()),function(t){var e=t||{},r=e.escapeHTML,n=void 0===r||r,i=e.objectIDs,a=e.limit,o=e.threshold,c=e.fallbackParameters,s=e.queryParameters,r=e.transformItems,u=void 0===r?function(e){return e}:r;if(i&&0!==i.length)return{dependsOn:"recommend",$$type:"ais.lookingSimilar",init:function(e){l(ys(ys({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);l(ys(ys({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){e=e.results;return null==e?{items:[],widgetParams:t}:(n&&0<e.hits.length&&(e.hits=et(e.hits)),{items:u(e.hits,{results:e}),widgetParams:t})},dispose:function(e){e=e.recommendState;return f(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return i.reduce(function(e,t){return e.addLookingSimilar({objectID:t,maxRecommendations:a,threshold:o,fallbackParameters:ys(ys({},c),n?_:{}),queryParameters:ys(ys({},s),n?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(bs("The `objectIDs` option is required."))}}var bs=a({name:"looking-similar",connector:!0});function Ss(e){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Os(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function js(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Os(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Ss(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ss(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ss(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Os(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ws(e){var t=e.children,r=e.renderToString,n=e.notifyServer,i=e.searchRef,a=e.skipRecommend;return Promise.resolve().then(function(){r(s.createElement(Dr.Provider,{value:{notifyServer:n}},t))}).then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){if(i.current)return function(i,e){var a,o=1<arguments.length&&void 0!==e&&e,c=i.mainHelper,t=c.getClient();return c.setClient(js(js({},t),{},{search:function(e){return a=e.map(function(e){return e.params}),t.search(e)}})),i._hasSearchWidget&&c.searchOnlyWithDerivedHelpers(),!o&&i._hasRecommendWidget&&c.recommend(),new Promise(function(e,t){var r=!i._hasSearchWidget,n=!i._hasRecommendWidget||o;c.derivedHelpers[0].on("result",function(){r=!0,n&&e(a)}),c.derivedHelpers[0].on("recommend:result",function(){n=!0,r&&e(a)}),c.on("error",function(e){t(e)}),i.on("error",function(e){t(e)}),c.derivedHelpers.forEach(function(e){return e.on("error",function(e){t(e)})})})}(i.current,a);throw new Error("Unable to retrieve InstantSearch's server state in `getServerState()`. Did you mount the <InstantSearch> component?")}).then(function(e){return{initialResults:function(e,a){var o={},c=0;if(Yt(e,function(e){var t,r,n=e.getResults(),i=null==(i=e.getHelper())?void 0:i.lastRecommendResults;(n||i)&&(r=(t=(null==n||null==(t=n._rawResults)?void 0:t.length)||0)?null==a?void 0:a.slice(c,c+t):[],c+=t,o[e.getIndexId()]=js(js(js({},n&&{state:js({},n._state),results:n._rawResults}),i&&{recommendResults:{params:JSON.parse(JSON.stringify(i._state.params)),results:i._rawResults}}),r&&{requestParams:r}))}),0===Object.keys(o).length)throw new Error("The root index does not have any results. Make sure you have at least one widget that provides results.");return o}(i.current.mainIndex,e)}})}e.Configure=function(e){return qr(m({},e),{$$widgetType:"ais.configure"}),null},e.DynamicWidgets=function(e){var t=e.children,r=void 0===(r=e.fallbackComponent)?Yr:r,e=M(e,Zr),n=s.useRef(r),r=Gr(e,{$$widgetType:"ais.dynamicWidgets"}).attributesToRender,i=new Map;return s.Children.forEach(t,function(e){var t=function e(t){if(!en(t))return;if(t.props.attribute)return t.props.attribute;if(Array.isArray(t.props.attributes))return t.props.attributes[0];if(t.props.children)return Ir(1===s.Children.count(t.props.children)),e(s.Children.only(t.props.children));return}(e);Ir(void 0!==t),i.set(t,e)}),s.createElement(s.Fragment,null,r.map(function(e){return s.createElement(b.Fragment,{key:e},i.get(e)||s.createElement(n.current,{attribute:e}))}))},e.Index=function(e){var t,r,n,i,a,o=e.children,c=(e=e=M(e,vn),t=kr(),r=null==(r=Wr())?void 0:r.initialResults,n=_r(),i=Cr(e),c=(e=b.useMemo(function(){return pn(i)},[i])).getHelper(),a=yn(),Mr(function(){a()},[c,a]),Ur({widget:e,parentIndex:n,props:i,shouldSsr:Boolean(t||r)}),e);return null===c.getHelper()?null:s.createElement(xr.Provider,{value:c},o)},e.InstantSearch=function(e){var t=e.children;return(e=ia(M(e,oa))).started?s.createElement(Tr.Provider,{value:e},s.createElement(xr.Provider,{value:e.mainIndex},t)):null},e.InstantSearchRSCContext=$r,e.InstantSearchSSRProvider=sa,e.InstantSearchServerContext=Dr,e.getServerState=function(r,e){function n(){var t=!1;return function(e){e=e.search;if(t)throw new Error("getServerState should be called with a single InstantSearchSSRProvider and a single InstantSearch component.");t=!0,a.current=e}}var i=e.renderToString,a={current:void 0};return We(),ws({children:r,renderToString:i,searchRef:a,notifyServer:n()}).then(function(e){var t=!1;return Yt(a.current.mainIndex,function(e){t=t||e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})}),t?(We(),ws({children:s.createElement(sa,e,r),renderToString:i,searchRef:a,notifyServer:n(),skipRecommend:!0})):e})},e.useBreadcrumb=function(e,t){return h(ma,e,t)},e.useClearRefinements=function(e,t){return h(Oa,e,t)},e.useConfigure=qr,e.useConnector=h,e.useCurrentRefinements=function(e,t){return h(xa,e,t)},e.useDynamicWidgets=Gr,e.useFrequentlyBoughtTogether=function(e,t){return h(Ca,e,t)},e.useGeoSearch=function(e,t){return h(qa,e,t)},e.useHierarchicalMenu=function(e,t){return h(eo,e,t)},e.useHits=function(e,t){return h(co,e,t)},e.useHitsPerPage=function(e,t){return h(po,e,t)},e.useInfiniteHits=function(e,t){return h(xo,e,t)},e.useInstantSearch=function(){var t,r,n,i,a,o,c,s=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).catchError,u=Ar();t=Ar(),r=_r(),e=r.getIndexId(),m=(l=$(b.useState(function(){return t.getUiState()}),2))[0],n=l[1],l=m[e],h=(d=$(b.useState(function(){return t.renderState}),2))[0],i=d[1],d=h[e]||{},e=b.useCallback(function(e){t.setUiState(e)},[t]),f=b.useCallback(function(e){r.setIndexUiState(e)},[r]),b.useEffect(function(){function e(){n(t.getUiState()),i(t.renderState)}return t.addListener("render",e),function(){t.removeListener("render",e)}},[t]);var e=(m={uiState:m,setUiState:e,indexUiState:l,setIndexUiState:f,renderState:h,indexRenderState:d}).uiState,l=m.setUiState,f=m.indexUiState,h=m.setIndexUiState,d=m.renderState,m=m.indexRenderState;a=Ar(),o=_r(),g=$(b.useState(function(){var e=Fr(o);return{results:e.results,scopedResults:e.scopedResults}}),2),p=g[0],c=g[1],b.useEffect(function(){function e(){var e=o.getResults();null!==e?c({results:e,scopedResults:o.getScopedResults()}):0===a.mainIndex.getIndexName().length&&(e=a.mainIndex.getWidgets().find(O))&&c({results:Fr(o).results,scopedResults:e.getScopedResults()})}return a.addListener("render",e),function(){a.removeListener("render",e)}},[a,o]);var p=(g=p).results,g=g.scopedResults,y=b.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.use.apply(u,t),function(){u.unuse.apply(u,t)}},[u]),v=b.useCallback(function(){u.refresh()},[u]);return Mr(function(){var e;return s?(u.addListener("error",e=function(){}),function(){return u.removeListener("error",e)}):function(){}},[u,s]),{results:p,scopedResults:g,uiState:e,setUiState:l,indexUiState:f,setIndexUiState:h,renderState:d,indexRenderState:m,addMiddlewares:y,refresh:v,status:u.status,error:u.error}},e.useInstantSearchContext=Ar,e.useLookingSimilar=function(e,t){return h(vs,e,t)},e.useMenu=function(e,t){return h(Wo,e,t)},e.useNumericMenu=function(e,t){return h(qo,e,t)},e.usePagination=function(e,t){return h(oc,e,t)},e.usePoweredBy=function(){var e=gr(function(e){return(null==(e=e.window.location)?void 0:e.hostname)||""},{fallback:function(){return""}});return{url:"https://www.algolia.com/?utm_source=react-instantsearch&utm_medium=website&utm_content=".concat(e,"&utm_campaign=poweredby")}},e.useQueryRules=function(e,t){return h(pc,e,t)},e.useRSCContext=Lr,e.useRange=function(e,t){return h(Pc,e,t)},e.useRefinementList=function(e,t){return h(Tc,e,t)},e.useRelatedProducts=function(e,t){return h(Cc,e,t)},e.useSearchBox=function(e,t){return h(Uc,e,t)},e.useSortBy=function(e,t){return h(zc,e,t)},e.useStats=function(e,t){return h(Yc,e,t)},e.useToggleRefinement=function(e,t){return h(os,e,t)},e.useTrendingItems=function(e,t){return h(ds,e,t)},e.version=W,e.wrapPromiseWithState=function(e){var r;return"status"in e||((r=e).status="pending",r.then(function(e){var t;"pending"===r.status&&((t=r).status="fulfilled",t.value=e)},function(e){var t;"pending"===r.status&&((t=r).status="rejected",t.reason=e)})),e},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ReactInstantSearchCore.min.js.map
